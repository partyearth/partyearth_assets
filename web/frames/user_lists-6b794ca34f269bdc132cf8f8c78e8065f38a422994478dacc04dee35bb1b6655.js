(function(){var i=function(t,e){return function(){return t.apply(e,arguments)}};pe.gigya=pe.gigya||{},pe.Iframe=function(){function t(t,e){this.container=t,this.url=e,this.iframe_loaded=i(this.iframe_loaded,this),this.init=i(this.init,this),this.show=i(this.show,this),this.iframe=null}return t.prototype.show=function(){return this.container.show(),this.init()},t.prototype.init=function(){return this.container.addClass("spinnable"),this.iframe=$("<iframe></iframe>"),this.iframe.attr("scrolling","no"),this.iframe.attr("scroll","no"),this.iframe.attr("src",this.url),this.iframe.attr("frameborder","0"),this.collapse_iframe(),this.iframe.load(this.iframe_loaded),this.container.html(this.iframe)},t.prototype.iframe_loaded=function(){return this.container.removeClass("spinnable")},t.prototype.collapse_iframe=function(){return this.iframe.css("width","0px"),this.iframe.css("height","0px")},t}()}).call(this),function(Dt,t,Lt){Dt.fn.jScrollPane=function(i){function n(c,t){function u(t){var e,i,n,s,o,r,a=!1,l=!1;if(Y=t,G===Lt)o=c.scrollTop(),r=c.scrollLeft(),c.css({overflow:"hidden",padding:0}),X=c.innerWidth()+mt,O=c.innerHeight(),c.width(X),G=Dt('<div class="jspPane" />').css("padding",gt).append(c.children()),R=Dt('<div class="jspContainer" />').css({width:X+"px",height:O+"px"}).append(G).appendTo(c);else{if(c.css("width",""),a=Y.stickToBottom&&T(),l=Y.stickToRight&&D(),(s=c.innerWidth()+mt!=X||c.outerHeight()!=O)&&(X=c.innerWidth()+mt,O=c.innerHeight(),R.css({width:X+"px",height:O+"px"})),!s&&vt==F&&G.outerHeight()==z)return void c.width(X);vt=F,G.css("width",""),c.width(X),R.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}G.css("overflow","auto"),F=t.contentWidth?t.contentWidth:G[0].scrollWidth,z=G[0].scrollHeight,G.css("overflow",""),V=1<(q=z/O),(U=1<($=F/X))||V?(c.addClass("jspScrollable"),(e=Y.maintainPosition&&(Z||et))&&(i=k(),n=C()),d(),p(),h(),e&&(y(l?F-X:i,!1),b(a?z-O:n,!1)),S(),L(),W(),Y.enableKeyboardNavigation&&A(),Y.clickOnTrack&&f(),I(),Y.hijackInternalLinks&&N()):(c.removeClass("jspScrollable"),G.css({top:0,width:R.width()-mt}),H(),E(),P(),_(),x()),Y.autoReinitialise&&!_t?_t=setInterval(function(){u(Y)},Y.autoReinitialiseDelay):!Y.autoReinitialise&&_t&&clearInterval(_t),o&&c.scrollTop(0)&&b(o,!1),r&&c.scrollLeft(0)&&y(r,!1),c.trigger("jsp-initialised",[U||V])}function d(){V&&(R.append(Dt('<div class="jspVerticalBar" />').append(Dt('<div class="jspCap jspCapTop" />'),Dt('<div class="jspTrack" />').append(Dt('<div class="jspDrag" />').append(Dt('<div class="jspDragTop" />'),Dt('<div class="jspDragBottom" />'))),Dt('<div class="jspCap jspCapBottom" />'))),it=R.find(">.jspVerticalBar"),nt=it.find(">.jspTrack"),K=nt.find(">.jspDrag"),Y.showArrows&&(at=Dt('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",s(0,-1)).bind("click.jsp",B),lt=Dt('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",s(0,1)).bind("click.jsp",B),Y.arrowScrollOnHover&&(at.bind("mouseover.jsp",s(0,-1,at)),lt.bind("mouseover.jsp",s(0,1,lt))),e(nt,Y.verticalArrowPositions,at,lt)),ot=O,R.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){ot-=Dt(this).outerHeight()}),K.hover(function(){K.addClass("jspHover")},function(){K.removeClass("jspHover")}).bind("mousedown.jsp",function(t){Dt("html").bind("dragstart.jsp selectstart.jsp",B),K.addClass("jspActive");var e=t.pageY-K.position().top;return Dt("html").bind("mousemove.jsp",function(t){g(t.pageY-e,!1)}).bind("mouseup.jsp mouseleave.jsp",r),!1}),i())}function i(){nt.height(ot+"px"),Z=0,st=Y.verticalGutter+nt.outerWidth(),G.width(X-st-mt);try{0===it.position().left&&G.css("margin-left",st+"px")}catch(t){}}function p(){U&&(R.append(Dt('<div class="jspHorizontalBar" />').append(Dt('<div class="jspCap jspCapLeft" />'),Dt('<div class="jspTrack" />').append(Dt('<div class="jspDrag" />').append(Dt('<div class="jspDragLeft" />'),Dt('<div class="jspDragRight" />'))),Dt('<div class="jspCap jspCapRight" />'))),ct=R.find(">.jspHorizontalBar"),ut=ct.find(">.jspTrack"),J=ut.find(">.jspDrag"),Y.showArrows&&(ht=Dt('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",s(-1,0)).bind("click.jsp",B),ft=Dt('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",s(1,0)).bind("click.jsp",B),Y.arrowScrollOnHover&&(ht.bind("mouseover.jsp",s(-1,0,ht)),ft.bind("mouseover.jsp",s(1,0,ft))),e(ut,Y.horizontalArrowPositions,ht,ft)),J.hover(function(){J.addClass("jspHover")},function(){J.removeClass("jspHover")}).bind("mousedown.jsp",function(t){Dt("html").bind("dragstart.jsp selectstart.jsp",B),J.addClass("jspActive");var e=t.pageX-J.position().left;return Dt("html").bind("mousemove.jsp",function(t){m(t.pageX-e,!1)}).bind("mouseup.jsp mouseleave.jsp",r),!1}),dt=R.innerWidth(),n())}function n(){R.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){dt-=Dt(this).outerWidth()}),ut.width(dt+"px"),et=0}function h(){if(U&&V){var t=ut.outerHeight(),e=nt.outerWidth();ot-=t,Dt(ct).find(">.jspCap:visible,>.jspArrow").each(function(){dt+=Dt(this).outerWidth()}),dt-=e,O-=e,X-=t,ut.parent().append(Dt('<div class="jspCorner" />').css("width",t+"px")),i(),n()}U&&G.width(R.outerWidth()-mt+"px"),z=G.outerHeight(),q=z/O,U&&((pt=Math.ceil(1/$*dt))>Y.horizontalDragMaxWidth?pt=Y.horizontalDragMaxWidth:pt<Y.horizontalDragMinWidth&&(pt=Y.horizontalDragMinWidth),J.width(pt+"px"),tt=dt-pt,l(et)),V&&((rt=Math.ceil(1/q*ot))>Y.verticalDragMaxHeight?rt=Y.verticalDragMaxHeight:rt<Y.verticalDragMinHeight&&(rt=Y.verticalDragMinHeight),K.height(rt+"px"),Q=ot-rt,a(Z))}function e(t,e,i,n){var s,o="before",r="after";"os"==e&&(e=/Mac/.test(navigator.platform)?"after":"split"),e==o?r=e:e==r&&(o=e,s=i,i=n,n=s),t[o](i)[r](n)}function s(t,e,i){return function(){return o(t,e,this,i),this.blur(),!1}}function o(t,e,i,n){i=Dt(i).addClass("jspActive");var s,o,r=!0,a=function(){0!==t&&jt.scrollByX(t*Y.arrowButtonSpeed),0!==e&&jt.scrollByY(e*Y.arrowButtonSpeed),o=setTimeout(a,r?Y.initialDelay:Y.arrowRepeatFreq),r=!1};a(),s=n?"mouseout.jsp":"mouseup.jsp",(n=n||Dt("html")).bind(s,function(){i.removeClass("jspActive"),o&&clearTimeout(o),o=null,n.unbind(s)})}function f(){_(),V&&nt.bind("mousedown.jsp",function(s){if(s.originalTarget===Lt||s.originalTarget==s.currentTarget){var o,r=Dt(this),t=r.offset(),a=s.pageY-t.top-Z,l=!0,c=function(){var t=r.offset(),e=s.pageY-t.top-rt/2,i=O*Y.scrollPagePercent,n=Q*i/(z-O);if(a<0)e<Z-n?jt.scrollByY(-i):g(e);else{if(!(0<a))return void u();Z+n<e?jt.scrollByY(i):g(e)}o=setTimeout(c,l?Y.initialDelay:Y.trackClickRepeatFreq),l=!1},u=function(){o&&clearTimeout(o),o=null,Dt(document).unbind("mouseup.jsp",u)};return c(),Dt(document).bind("mouseup.jsp",u),!1}}),U&&ut.bind("mousedown.jsp",function(s){if(s.originalTarget===Lt||s.originalTarget==s.currentTarget){var o,r=Dt(this),t=r.offset(),a=s.pageX-t.left-et,l=!0,c=function(){var t=r.offset(),e=s.pageX-t.left-pt/2,i=X*Y.scrollPagePercent,n=tt*i/(F-X);if(a<0)e<et-n?jt.scrollByX(-i):m(e);else{if(!(0<a))return void u();et+n<e?jt.scrollByX(i):m(e)}o=setTimeout(c,l?Y.initialDelay:Y.trackClickRepeatFreq),l=!1},u=function(){o&&clearTimeout(o),o=null,Dt(document).unbind("mouseup.jsp",u)};return c(),Dt(document).bind("mouseup.jsp",u),!1}})}function _(){ut&&ut.unbind("mousedown.jsp"),nt&&nt.unbind("mousedown.jsp")}function r(){Dt("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp"),K&&K.removeClass("jspActive"),J&&J.removeClass("jspActive")}function g(t,e){V&&(t<0?t=0:Q<t&&(t=Q),e===Lt&&(e=Y.animateScroll),e?jt.animate(K,"top",t,a):(K.css("top",t),a(t)))}function a(t){t===Lt&&(t=K.position().top),R.scrollTop(0);var e=0===(Z=t),i=Z==Q,n=-(t/Q)*(z-O);bt==e&&wt==i||(bt=e,wt=i,c.trigger("jsp-arrow-change",[bt,wt,yt,kt])),v(e,i),G.css("top",n),c.trigger("jsp-scroll-y",[-n,e,i]).trigger("scroll")}function m(t,e){U&&(t<0?t=0:tt<t&&(t=tt),e===Lt&&(e=Y.animateScroll),e?jt.animate(J,"left",t,l):(J.css("left",t),l(t)))}function l(t){t===Lt&&(t=J.position().left),R.scrollTop(0);var e=0===(et=t),i=et==tt,n=-(t/tt)*(F-X);yt==e&&kt==i||(yt=e,kt=i,c.trigger("jsp-arrow-change",[bt,wt,yt,kt])),j(e,i),G.css("left",n),c.trigger("jsp-scroll-x",[-n,e,i]).trigger("scroll")}function v(t,e){Y.showArrows&&(at[t?"addClass":"removeClass"]("jspDisabled"),lt[e?"addClass":"removeClass"]("jspDisabled"))}function j(t,e){Y.showArrows&&(ht[t?"addClass":"removeClass"]("jspDisabled"),ft[e?"addClass":"removeClass"]("jspDisabled"))}function b(t,e){g(t/(z-O)*Q,e)}function y(t,e){m(t/(F-X)*tt,e)}function w(t,e,i){var n,s,o,r,a,l,c,u,d,p=0,h=0;try{n=Dt(t)}catch(f){return}for(s=n.outerHeight(),o=n.outerWidth(),R.scrollTop(0),R.scrollLeft(0);!n.is(".jspPane");)if(p+=n.position().top,h+=n.position().left,n=n.offsetParent(),/^body|html$/i.test(n[0].nodeName))return;l=(r=C())+O,p<r||e?u=p-Y.verticalGutter:l<p+s&&(u=p-O+s+Y.verticalGutter),u&&b(u,i),c=(a=k())+X,h<a||e?d=h-Y.horizontalGutter:c<h+o&&(d=h-X+o+Y.horizontalGutter),d&&y(d,i)}function k(){return-G.position().left}function C(){return-G.position().top}function T(){var t=z-O;return 20<t&&t-C()<10}function D(){var t=F-X;return 20<t&&t-k()<10}function L(){R.unbind(Tt).bind(Tt,function(t,e,i,n){var s=et,o=Z;return jt.scrollBy(i*Y.mouseWheelSpeed,-n*Y.mouseWheelSpeed,!1),s==et&&o==Z})}function H(){R.unbind(Tt)}function B(){return!1}function S(){G.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(t){w(t.target,!1)})}function E(){G.find(":input,a").unbind("focus.jsp")}function A(){function n(){var t=et,e=Z;switch(s){case 40:jt.scrollByY(Y.keyboardSpeed,!1);break;case 38:jt.scrollByY(-Y.keyboardSpeed,!1);break;case 34:case 32:jt.scrollByY(O*Y.scrollPagePercent,!1);break;case 33:jt.scrollByY(-O*Y.scrollPagePercent,!1);break;case 39:jt.scrollByX(Y.keyboardSpeed,!1);break;case 37:jt.scrollByX(-Y.keyboardSpeed,!1)}return o=t!=et||e!=Z}var s,o,r=[];U&&r.push(ct[0]),V&&r.push(it[0]),G.focus(function(){c.focus()}),c.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(t){if(t.target===this||r.length&&Dt(t.target).closest(r).length){var e=et,i=Z;switch(t.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:s=t.keyCode,n();break;case 35:b(z-O),s=null;break;case 36:b(0),s=null}return!(o=t.keyCode==s&&e!=et||i!=Z)}}).bind("keypress.jsp",function(t){return t.keyCode==s&&n(),!o}),Y.hideFocus?(c.css("outline","none"),"hideFocus"in R[0]&&c.attr("hideFocus",!0)):(c.css("outline",""),"hideFocus"in R[0]&&c.attr("hideFocus",!1))}function P(){c.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp")}function I(){if(location.hash&&1<location.hash.length){var t,e,i=escape(location.hash);try{t=Dt(i)}catch(n){return}t.length&&G.find(i)&&(0===R.scrollTop()?e=setInterval(function(){0<R.scrollTop()&&(w(i,!0),Dt(document).scrollTop(R.position().top),clearInterval(e))},50):(w(i,!0),Dt(document).scrollTop(R.position().top)))}}function x(){Dt("a.jspHijack").unbind("click.jsp-hijack").removeClass("jspHijack")}function N(){x(),Dt("a[href^=#]").addClass("jspHijack").bind("click.jsp-hijack",function(){var t,e=this.href.split("#");if(1<e.length&&0<(t=e[1]).length&&0<G.find("#"+t).length)return w("#"+t,!0),!1})}function W(){var s,o,r,a,l,c=!1;R.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(t){var e=t.originalEvent.touches[0];s=k(),o=C(),r=e.pageX,a=e.pageY,c=!(l=!1)}).bind("touchmove.jsp",function(t){if(c){var e=t.originalEvent.touches[0],i=et,n=Z;return jt.scrollTo(s+r-e.pageX,o+a-e.pageY),l=l||5<Math.abs(r-e.pageX)||5<Math.abs(a-e.pageY),i==et&&n==Z}}).bind("touchend.jsp",function(){c=!1}).bind("click.jsp-touchclick",function(){if(l)return l=!1})}function M(){var t=C(),e=k();c.removeClass("jspScrollable").unbind(".jsp"),c.replaceWith(Ct.append(G.children())),Ct.scrollTop(t),Ct.scrollLeft(e)}var Y,G,X,O,R,F,z,$,q,V,U,K,Q,Z,J,tt,et,it,nt,st,ot,rt,at,lt,ct,ut,dt,pt,ht,ft,_t,gt,mt,vt,jt=this,bt=!0,yt=!0,wt=!1,kt=!1,Ct=c.clone(!1,!1).empty(),Tt=Dt.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";gt=c.css("paddingTop")+" "+c.css("paddingRight")+" "+c.css("paddingBottom")+" "+c.css("paddingLeft"),mt=(parseInt(c.css("paddingLeft"),10)||0)+(parseInt(c.css("paddingRight"),10)||0),Dt.extend(jt,{reinitialise:function(t){u(t=Dt.extend({},Y,t))},scrollToElement:function(t,e,i){w(t,e,i)},scrollTo:function(t,e,i){y(t,i),b(e,i)},scrollToX:function(t,e){y(t,e)},scrollToY:function(t,e){b(t,e)},scrollToPercentX:function(t,e){y(t*(F-X),e)},scrollToPercentY:function(t,e){b(t*(z-O),e)},scrollBy:function(t,e,i){jt.scrollByX(t,i),jt.scrollByY(e,i)},scrollByX:function(t,e){m((k()+Math[t<0?"floor":"ceil"](t))/(F-X)*tt,e)},scrollByY:function(t,e){g((C()+Math[t<0?"floor":"ceil"](t))/(z-O)*Q,e)},positionDragX:function(t,e){m(t,e)},positionDragY:function(t,e){g(t,e)},animate:function(t,e,i,n){var s={};s[e]=i,t.animate(s,{duration:Y.animateDuration,easing:Y.animateEase,queue:!1,step:n})},getContentPositionX:function(){return k()},getContentPositionY:function(){return C()},getContentWidth:function(){return F},getContentHeight:function(){return z},getPercentScrolledX:function(){return k()/(F-X)},getPercentScrolledY:function(){return C()/(z-O)},getIsScrollableH:function(){return U},getIsScrollableV:function(){return V},getContentPane:function(){return G},scrollToBottom:function(t){g(Q,t)},hijackInternalLinks:function(){N()},destroy:function(){M()}}),u(t)}return i=Dt.extend({},Dt.fn.jScrollPane.defaults,i),Dt.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){i[this]=i[this]||i.speed}),this.each(function(){var t=Dt(this),e=t.data("jsp");e?e.reinitialise(i):(e=new n(t,i),t.data("jsp",e))})},Dt.fn.jScrollPane.defaults={showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:Lt,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:.8}}(jQuery),function(r){function e(t){var e=t||window.event,i=[].slice.call(arguments,1),n=0,s=0,o=0;return(t=r.event.fix(e)).type="mousewheel",t.wheelDelta&&(n=t.wheelDelta/120),t.detail&&(n=-t.detail/3),o=n,e.axis!==undefined&&e.axis===e.HORIZONTAL_AXIS&&(o=0,s=-1*n),e.wheelDeltaY!==undefined&&(o=e.wheelDeltaY/120),e.wheelDeltaX!==undefined&&(s=-1*e.wheelDeltaX/120),i.unshift(t,n,s,o),r.event.handle.apply(this,i)}var i=["DOMMouseScroll","mousewheel"];r.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var t=i.length;t;)this.addEventListener(i[--t],e,!1);else this.onmousewheel=e},teardown:function(){if(this.removeEventListener)for(var t=i.length;t;)this.removeEventListener(i[--t],e,!1);else this.onmousewheel=null}},r.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}(jQuery),function(){var e=function(t,e){return function(){return t.apply(e,arguments)}};pe.gigya=pe.gigya||{},pe.gigya.FavoritesList=function(){function t(t){this.container=t,this.on_logged_in=e(this.on_logged_in,this),this.on_registered=e(this.on_registered,this),this.show_login_screen=e(this.show_login_screen,this),this.list_clicked=e(this.list_clicked,this),this.add_to_list_button_clicked=e(this.add_to_list_button_clicked,this),this.add_item=e(this.add_item,this),this.login_required=this.container.data("login-required"),this.form_container=this.container.find(".Form"),this.login_container=this.container.find(".Login"),this.login_iframe=new pe.Iframe(this.login_container,"/frames/login"),this.errors_container=this.container.find(".Errors"),this.errors=[],this.list_container=this.container.find(".List"),this.scroll_pane=this.list_container.jScrollPane({maintainPosition:!1}).data("jsp"),this.checked_list_ids=this.list_container.data("checked"),_.each(this.get_checked_lis(),function(t){return $(t).addClass("checked")}),this.submit_button=this.container.find(".SubmitButton"),this.submit_button.click(this.add_to_list_button_clicked),this.show_login_screen_button=this.container.find(".LoginTrigger"),this.show_login_screen_button.click(this.show_login_screen),this.get_lis().live("click",this.list_clicked),pe.bind_global_event(pe.events.LOGGED_IN,this.on_logged_in),pe.bind_global_event(pe.events.REGISTRATION_COMPLETE,this.on_registered)}return t.errors={NOTHING_SELECTED:"NOTHING_SELECTED",NOTHING_CHANGED:"NOTHING_CHANGED",messages:{NOTHING_SELECTED:"Please select a list",NOTHING_CHANGED:"Item already on selected list"}},t.prototype.add_item=function(t){var e,i,n;return(e=$("<li data-id='"+t.id+"' data-name=\""+t.name+'">'+t.name+"</li>")).data("id",t.id),(i=this.get_lis().toArray()).push(e),i=_.sortBy(i,function(t){return String($(t).data("name")).toLowerCase()}),this.scroll_pane.getContentPane().empty(),_.each(i,(n=this,function(t){return n.scroll_pane.getContentPane().append(t)})),this.scroll_pane.reinitialise(),this.select_by_id(t.id),this.submit_button.focus()},t.prototype.add_to_list_button_clicked=function(){return this.validate()?this.on_validation_passed():this.on_validation_failed()},t.prototype.list_clicked=function(t){return this.select($(t.currentTarget))},t.prototype.select=function(t){if(0<t.length)return this.get_lis().removeClass("selected"),t.addClass("selected"),this.scroll_pane.scrollToElement(t,!0,!0)},t.prototype.get_lis=function(){return this.list_container.find("li")},t.prototype.get_selected_li=function(){return this.get_lis().filter(".selected:first")},t.prototype.get_checked_lis=function(){return _.filter(this.get_lis(),(t=this,function(e){return _.find(t.checked_list_ids,function(t){return t===$(e).data("id")})}));var t},t.prototype.select_by_id=function(e){var t;return t=_.find(this.get_lis(),function(t){return $(t).data("id")===e}),this.select($(t))},t.prototype.get_validation_message=function(){return _.map(this.errors,function(t){return pe.gigya.FavoritesList.errors.messages[t]}).join(", ")},t.prototype.on_validation_failed=function(){return _.isEmpty(this.errors)?this.login_required?this.show_login_screen():void 0:(this.errors_container.html(this.get_validation_message()),pe.on_frame_element_resized())},t.prototype.show_login_screen=function(){return this.form_container.hide(),this.login_container.show(),this.login_iframe.show()},t.prototype.on_registered=function(){return this.form_container.show(),this.login_container.hide(),this.login_required=!1,this.validate()?this.on_validation_passed():this.show_login_screen_button.hide()},t.prototype.on_logged_in=function(){return this.form_container.show(),this.login_container.hide(),this.login_required=!1,this.validate()?this.on_validation_passed():window.location.reload()},t.prototype.on_validation_passed=function(){var t;return t=this.get_selected_li().data("name"),this.container.append("<input type='hidden' name='user_list[name]' value=\""+t+'"/>'),$("body").css("opacity",.3),this.container.submit()},t.prototype.validation_failed=function(t){return this.on_validation_failed=t},t.prototype.validation_passed=function(t){return this.on_validation_passed=t},t.prototype.validate=function(){var e,t;return this.errors=[],0===(t=this.get_selected_li()).length?(this.errors.push(pe.gigya.FavoritesList.errors.NOTHING_SELECTED),!1):(e=t.data("id"),_.detect(this.checked_list_ids,function(t){return t===e})&&this.errors.push(pe.gigya.FavoritesList.errors.NOTHING_CHANGED),_.isEmpty(this.errors)&&!this.login_required)},t}()}.call(this),function(){var n=function(t,e){return function(){return t.apply(e,arguments)}};pe.gigya=pe.gigya||{},pe.gigya.ListCreator=function(){function t(t){var i,e;this.container=t,this.input_field_focused=n(this.input_field_focused,this),this.input_field_focusouted=n(this.input_field_focusouted,this),this.error_message_container_clicked=n(this.error_message_container_clicked,this),this.on_list_created=n(this.on_list_created,this),this.submit_button_clicked=n(this.submit_button_clicked,this),this.error_message_container=this.container.find(".Error"),this.input_field=this.container.find(".Input"),this.submit_button=this.container.find(".CreateButton"),this.cancel_button=this.container.find(".CancelButton"),this.input_field.attr("placeholder",pe.gigya.ListCreator.default_label),this.input_field.focus(this.input_field_focused),this.input_field.focusout(this.input_field_focusouted),this.input_field.keypress((i=this,function(t){var e;if(i.hide_error_message(),13===t.which)return t.preventDefault(),i.hide_error_message(),e=i.input_field.val(),_.isEmpty(e.replace(/\s/g,""))||i.create_list(e),!1})),this.error_message_container.click(this.error_message_container_clicked),this.submit_button.click(this.submit_button_clicked),this.cancel_button.click((e=this,function(){return e.put_name(pe.gigya.ListCreator.default_label)})),this.hide_error_message(),this.put_name(pe.gigya.ListCreator.default_label)}return t.default_label="Please enter a title for your new list",t.prototype.create_list=function(t){return this.on_before_create(),$.post("/api/user_lists",{user_list:{name:t}},this.on_list_created,"json")},t.prototype.put_name=function(t){return this.input_field.val(t)},t.prototype.validate=function(){return!this.is_empty()},t.prototype.show_error_message=function(){return this.container.addClass("failed"),this.input_field.val(pe.gigya.ListCreator.default_label),this.input_field.css("color","red")},t.prototype.hide_error_message=function(){return this.input_field.css("color",""),this.input_field.val()===pe.gigya.ListCreator.default_label&&this.input_field.val(""),this.container.removeClass("failed")},t.prototype.is_empty=function(){var t;return t=this.input_field.val(),_.isEmpty(t)||t===pe.gigya.ListCreator.default_label},t.prototype.submit_button_clicked=function(){return this.validate()?(this.hide_error_message(),this.create_list(this.input_field.val()),this.put_name("")):this.show_error_message()},t.prototype.on_list_created=function(t){return 0===t.status?(this.put_name(""),this.on_after_create(t.instance)):alert("Something went wrong: ListCreator#on_list_created")},t.prototype.on_after_create=function(){return!0},t.prototype.on_before_create=function(){return!0},t.prototype.after_create=function(t){return this.on_after_create=t},t.prototype.before_create=function(t){return this.on_before_create=t},t.prototype.error_message_container_clicked=function(){return this.hide_error_message(),this.put_name(""),this.input_field.focus()},t.prototype.input_field_focusouted=function(){if(_.isEmpty(this.input_field.val()))return this.put_name(pe.gigya.ListCreator.default_label)},t.prototype.input_field_focused=function(){if(this.hide_error_message(),this.is_empty())return this.put_name("")},t}()}.call(this),function(){var e=function(t,e){return function(){return t.apply(e,arguments)}};pe.gigya.UserListsForm=function(){function t(t){this.container=t,this.close_button_clicked=e(this.close_button_clicked,this),this.favorites_list=new pe.gigya.FavoritesList(this.container),this.creator=new pe.gigya.ListCreator(this.container.find(".Creator")),this.creator.after_create(this.favorites_list.add_item),this.container.find(".CloseButton").click(this.close_button_clicked)}return t.prototype.close_button_clicked=function(){return pe.fire_global_event(pe.events.IFRAME_CLOSE_BUTTON_CLICKED)},t}(),$(document).ready(function(){return pe.favorites_form=new pe.gigya.UserListsForm($(".UserLists"))})}.call(this);