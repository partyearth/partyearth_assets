pe.DisplayUpdater=function(a,c,b){pe.init_widget(this,a);this.photos=c;this.current_url="";this.pinterest_div=this.container.find(".PinterestDiv");this.slide_number_div=this.container.find(".SlideNumber");this.photo_caption_div=this.container.find(".Caption");this.credit_container=this.container.find(".Credit");this.tags_container=this.container.find(".Tags");this.tags_title=this.container.find(".TagsTitle");b.bind_event(pe.IndividualPhotoSlider.events.CHANGED,this.callback(this.slider_changed))};
pe.DisplayUpdater.prototype.slider_changed=function(a,c){var b=this.photos[c];this.slide_number_div.html(c+1+"");this.photo_caption_div.html(b.title);this.credit_container.html(""===b.credit?"":"&copy; "+b.credit);this.tags_title.html(0<b.tags.length?"Tags:":"");this.tags_container.html(this.tags_html(b.tags));this.populate_pinterest_with_current_photo(b);this.update_browser_details(b,c);this.update_og_tags(b)};
pe.DisplayUpdater.prototype.populate_pinterest_with_current_photo=function(a){this.pinterest_div.html('<img src="'+pe.assign_photo_size(void 0===a?null:a.src,"660","660x440")+'">')};pe.DisplayUpdater.prototype.tags_html=function(a){var c="";a&&$.each(a,function(b,a){c+="<li>"+a.name+"</li>"});return c};
pe.DisplayUpdater.prototype.update_browser_details=function(a,c){var b=pe.fetch_photo_id_from_url(a.url);this.current_url=window.location.href.replace(/photos\/.+/,"photos/"+b);window.history&&window.history.pushState&&window.history.replaceState({index:c},"",this.current_url)};
pe.DisplayUpdater.prototype.update_og_tags=function(a){$("meta[property=og\\:image]").attr("content",pe.remove_timestamp_from_asset_url(pe.assign_photo_size(a.src,"155","155x105")));$("meta[property=og\\:url]").attr("content",this.current_url)};
