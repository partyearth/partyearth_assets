pe.SearchResultEvent=function(a,b){pe.init_widget(this,null);this.container=$(this.dom_template(b));a.append(this.container);this.container.data("widget",this);this.event=b};pe.previous_search_event_date=null;
pe.SearchResultEvent.prototype.dom_template=function(a){var b=a.locations[0];a.make_date_grey="";a.location_name=b.name;a.location_url=b.url;a.tags_text=a.tags.join(", ");a.primary_photo=pe.https(pe.assign_photo_size(a.thumbnail,"155","155x105"));a.formatted_start_date=$.datepicker.formatDate('<span class="first_line">DD</span>M d',new Date(a.start_date));a.category_text=a.category.join(", ");a.link_title=pe.link_title_for_event(a.name,a.location_name);pe.previous_search_event_date===a.start_date&&
(a.make_date_grey="second_date");pe.previous_search_event_date=a.start_date;a.performer_list_html=this.performer_dom_template(a);return pe.templatize('<div class="result event"><ul class="events_list"><li><div class="event_wrapper"><div class="date headline float_left {{make_date_grey}}">{{formatted_start_date}}</div><div class="details float_left"><a href="/events/{{id}}" target="_blank" title="{{link_title}}" class="image ConvertToRoundedCorners float_left"><img src="{{primary_photo}}"></a><h3 class="event_name"><a href="/events/{{id}}" target="_blank" class="headline" title="{{link_title}}">{{name}}</a></h3><p class="type_venue">{{category_text}}&nbsp;/&nbsp;<a href="{{location_url}}" class="border_link" target="_blank">{{location_name}}</a></p><p class="time">{{start_time}}</p>{{performer_list_html}}</div></div></li></ul></div>',
a)};pe.SearchResultEvent.prototype.performer_dom_template=function(a){var b=a.performers;if("undefined"===typeof b||0===b.length)return"";a.performer_links_html=this.performer_links_html(b);return pe.templatize('<p><div class="event_performers"><table cellpadding="0" cellspacing="0"><tr><td><h4 class="label float_left">{{performer_label}}:</h4></td><td><p class="performers float_left">{{performer_links_html}}</p></td></tr></table></div></p>',a)};
pe.SearchResultEvent.prototype.performer_links_html=function(a){return $.map(a,function(a){a.link_title=pe.link_title_for_performer(a.name);return pe.templatize('<a href="/performers/{{id}}" target="_blank" title="{{link_title}}">{{name}}</a>',a)}).join(", ")};
