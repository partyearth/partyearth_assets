pe.CloseButton=function(b,a){pe.init_widget(this,b);this.close_button=b.find(".CloseButton");if("function"===typeof a)this.close_button.click(a);else switch(a){case pe.CloseButton.close_methods.REMOVE:this.close_button.click(this.callback(this.remove_container));break;case pe.CloseButton.close_methods.HIDE:this.close_button.click(this.callback(this.hide_container));break;default:alert("unknown value for 'close_method' parameter.")}};pe.CloseButton.close_methods={REMOVE:"REMOVE",HIDE:"HIDE"};
pe.CloseButton.events={CLOSED:"CloseButton_CLOSED"};pe.CloseButton.prototype.remove_container=function(){this.container.detach();this.fire_event(pe.CloseButton.events.CLOSED);this.container.remove();return!1};pe.CloseButton.prototype.hide_container=function(){this.fire_event(pe.CloseButton.events.CLOSED);this.container.hide();return!1};
pe.AdminTagSelector=function(b,a,c,d){pe.init_widget(this,b);this.autocomplete_data=a;this.class_name=c;this.container.html(this.html());this.autocomplete_input_field=this.container.find(".Autocomplete");this.autocomplete_handler();this.tag_list_div=this.container.find(".TagList");this.add_existing_tags_html(d)};pe.AdminTagSelector.prototype.html=function(){return'<input class="Autocomplete" type="text"><div class="TagList"></div>'};
pe.AdminTagSelector.prototype.autocomplete_handler=function(){this.autocomplete_input_field.autocomplete({source:this.autocomplete_data,minLength:1,close:this.callback(function(){this.autocomplete_input_field.val("")}),select:this.callback(function(b,a){this.autocomplete_on_select(a.item.value,a.item.id,a.item.category)})}).data("autocomplete")._renderItem=function(b,a){return $("<li></li>").data("item.autocomplete",a).append("<a>"+a.label+" ("+a.category+")</a>").appendTo(b)}};
pe.AdminTagSelector.prototype.tag_html=function(b,a,c){return'<div class="Tag">  <img style="padding-right:20px; width: 15px; height: 15px;" src="/assets/events/close.png"\t\tclass="CloseButton float_left">  <p class="float_left">'+b+" ("+c+')</p>  <input type="hidden" value="'+a+'" name="'+this.class_name+'[tag_ids][]">  <div class="clear"></div></div>'};pe.AdminTagSelector.prototype.add_existing_tags_html=function(b){var a=this;$.each(b,function(b,d){a.autocomplete_on_select(d.label,d.id,d.category)})};
pe.AdminTagSelector.prototype.autocomplete_on_select=function(b,a,c){this.tag_list_div.append(this.tag_html(b,a,c));new pe.CloseButton(this.tag_list_div.find(".Tag").last(),pe.CloseButton.close_methods.REMOVE)};
