pe.VenueTypeOverlay=function(a,b,d){pe.init_widget(this,$(this.html(d)));a.append(this.container);this.city_map=b;new pe.CloseButton(this.container,this.callback(function(){this.revert_configuration();this.container.hide()}));this.container.find(".GoButton").click(this.callback(this.menu_go_clicked));this.container.find(".SelectAll").click(this.callback(this.select_all_clicked));this.container.find(".DeselectAll").click(this.callback(this.deselect_all_clicked));this.checkboxes=pe.load(this.container.find("input:checkbox"));
this.checkboxes.click(this.callback(this.checkbox_clicked));this.start_configuration=this.city_map.current_search_configuration()};pe.VenueTypeOverlay.events={CHANGED:"VenueTypeOverlay_CHANGED"};
pe.VenueTypeOverlay.prototype.add_search_configuration=function(a){if(this.all_options_checked())a.add_filter("venue_types","all");else if(this.all_options_unchecked())a.add_filter("venue_types","none");else{var b=this.checkboxes.filter(":checked"),b=$.map(b,function(a){return $(a).attr("value")});a.add_filter("Venue Type",b)}};pe.VenueTypeOverlay.prototype.all_options_checked=function(){return 0===this.checkboxes.not(":checked").length};
pe.VenueTypeOverlay.prototype.all_options_unchecked=function(){return 0===this.checkboxes.filter(":checked").length};pe.VenueTypeOverlay.prototype.checkbox_clicked=function(){this.fire_event(pe.VenueTypeOverlay.events.CHANGED)};pe.VenueTypeOverlay.prototype.deselect_all_clicked=function(){this.checkboxes.attr("checked",!1)};pe.VenueTypeOverlay.prototype.menu_go_clicked=function(){this.container.hide();this.fire_event(pe.VenueTypeOverlay.events.CHANGED)};
pe.VenueTypeOverlay.prototype.html=function(a){var b=[],d={name:"Events",id:"events"};$.each(a,function(a,c){"Lounge"===c.name&&b.push(d);b.push(c)});for(var a='<div class="overlay venue_type_select"><div class="headline">Select a Type</div><div id="venue_types_wrapper"> <ul id="checkboxes">',c=0,f=b.length,e=Math.ceil(f/3);c<e;c++){var a=a+pe.templatize('<li><input type="checkbox" id="venue_type_{{id}}" name="{{id}}" value="{{name}}" class="ConvertToStyled"><label for="venue_type_{{id}}">{{name}}</label><br></li>',
b[c]),a=a+pe.templatize('<li><input type="checkbox" id="venue_type_{{id}}" name="{{id}}" value="{{name}}" class="ConvertToStyled"><label for="venue_type_{{id}}">{{name}}</label><br></li>',b[c+e]),g=c+2*e;g<f&&(a+=pe.templatize('<li><input type="checkbox" id="venue_type_{{id}}" name="{{id}}" value="{{name}}" class="ConvertToStyled"><label for="venue_type_{{id}}">{{name}}</label><br></li>',b[g]))}return a+'</ul><div id="action_btns"><span class="fake_link SelectAll select_deselect float_left">Select All</span><span class="fake_link DeselectAll select_deselect float_left">Deselect All</span><input type="button" class="GoButton blue_btn float_left" value="go"><br></div><div class="fake_link CloseButton"></div><div id="venue_arrow" class="overlay_arrow"></div> </div></div>'};
pe.VenueTypeOverlay.prototype.revert_configuration=function(){this.checkboxes.attr("checked",!1);this.start_configuration.venue_types&&$.each(this.start_configuration.venue_types,this.callback(function(a,b){this.container.find('input[value="'+b+'"]').attr("checked",!0)}))};pe.VenueTypeOverlay.prototype.select_all_clicked=function(){this.checkboxes.attr("checked",!0)};pe.VenueTypeOverlay.prototype.show=function(){this.start_configuration=this.city_map.current_search_configuration();this.container.show()};
