pe.Curtain=function(a){pe.init_widget(this,a);this.sections_div=this.container.find(".Sections");this.animation_duration=800};pe.Curtain.events={ANIMATION_FINISHED:"Curtain_ANIMATION_FINISHED"};pe.Curtain.prototype.animate_to=function(a,b){this.container.animate({width:a},{duration:this.animation_duration,easing:"cubicEaseInOut",complete:this.callback(this.animation_finished)});null!==b&&this.sections_div.animate({left:b},{duration:this.animation_duration,easing:"cubicEaseInOut"})};
pe.Curtain.prototype.animation_finished=function(){this.fire_event(pe.Curtain.events.ANIMATION_FINISHED)};
pe.PamplonaCourseSection=function(a){pe.init_widget(this,a);$('.AccordionContent[data-type="Course"] .Links .Link').click(this.callback(this.accordionSectionLink_clicked)).mouseenter(this.callback(this.accordionSectionLink_mouseEntered)).mouseleave(this.callback(this.accordionSectionLink_left));this.highlighted_segment_images={One:this.container.find(".HighlightedSegment.One"),Two:this.container.find(".HighlightedSegment.Two"),Three:this.container.find(".HighlightedSegment.Three"),Four:this.container.find(".HighlightedSegment.Four")};
$.each(this.highlighted_segment_images,this.callback(function(a,c){c.mouseleave(this.callback(this.highlightedSection_mouseLeft));c.click(this.callback(this.highlightedSection_clicked))}));this.page_indicators={History:this.container.find('.RightCurtain .PageIndicator[data-segment="History"]'),One:this.container.find('.RightCurtain .PageIndicator[data-segment="One"]'),Two:this.container.find('.RightCurtain .PageIndicator[data-segment="Two"]'),Three:this.container.find('.RightCurtain .PageIndicator[data-segment="Three"]'),
Four:this.container.find('.RightCurtain .PageIndicator[data-segment="Four"]')};$.each(this.page_indicators,this.callback(function(a,c){c.click(this.callback(this.pageIndicator_clicked));c.mouseenter(this.callback(this.pageIndicator_mouseEntered));c.mouseleave(this.callback(this.pageIndicator_mouseLeft))}));this.left_curtain=new pe.Curtain(this.container.find(".LeftCurtain"));this.left_curtain.bind_event(pe.Curtain.events.ANIMATION_FINISHED,this.callback(this.curtain_animation_finished));this.right_curtain=
new pe.Curtain(this.container.find(".RightCurtain"));this.close_button=this.container.find(".CloseButton");this.close_button.click(this.callback(this.closeButton_clicked));this.currently_visible_section=null;a.find(".ImageMap").mouseenter(this.callback(this.imageMap_mouseEntered))};pe.PamplonaCourseSection.prototype.accordionSectionLink_clicked=function(a){this.show_curtain(this.get_accordionLink_segmentId(a));return!1};pe.PamplonaCourseSection.prototype.accordionSectionLink_mouseEntered=function(a){this.highlight_part(this.get_accordionLink_segmentId(a))};
pe.PamplonaCourseSection.prototype.accordionSectionLink_left=function(a){this.remove_highlight(this.get_accordionLink_segmentId(a))};pe.PamplonaCourseSection.prototype.closeButton_clicked=function(){this.left_curtain.animate_to(0,null);this.right_curtain.animate_to(0,null);this.currently_visible_section=null;$.each(this.highlighted_segment_images,function(a,b){b.removeClass("selected")});$('.AccordionContent[data-type="Course"] .Links .Link').removeClass("selected");this.close_button.addClass("hidden")};
pe.PamplonaCourseSection.prototype.curtain_animation_finished=function(){$.each(this.highlighted_segment_images,function(a,b){b.removeClass("hover")});this.currently_visible_section&&"History"!==this.currently_visible_section&&this.highlighted_segment_images[this.currently_visible_section].addClass("selected");this.currently_visible_section&&this.close_button.removeClass("hidden")};pe.PamplonaCourseSection.prototype.get_accordionLink_segmentId=function(a){return $(a.target).closest(".Link").attr("data-segment")};
pe.PamplonaCourseSection.prototype.get_highlightImage_segmentId=function(a){return $(a.target).closest(".HighlightedSegment").attr("data-segment").toString()};pe.PamplonaCourseSection.prototype.get_pageIndicator_segmentId=function(a){return $(a.target).closest(".PageIndicator").attr("data-segment").toString()};
pe.PamplonaCourseSection.prototype.highlight_part=function(a){$('.AccordionContent[data-type="Course"] .Link[data-segment="'+a+'"]').addClass("hover");this.page_indicators[a].addClass("hover");this.currently_visible_section||($.each(this.highlighted_segment_images,function(a,c){c.removeClass("hover")}),this.currently_visible_section||this.highlighted_segment_images[a].addClass("hover"))};pe.PamplonaCourseSection.prototype.highlightedSection_clicked=function(a){this.currently_visible_section||this.show_curtain(this.get_highlightImage_segmentId(a))};
pe.PamplonaCourseSection.prototype.highlightedSection_mouseLeft=function(a){this.remove_highlight(this.get_highlightImage_segmentId(a))};pe.PamplonaCourseSection.prototype.imageMap_mouseEntered=function(a){this.highlight_part($(a.target).closest(".ImageMap").attr("data-segment").toString())};pe.PamplonaCourseSection.prototype.pageIndicator_clicked=function(a){this.show_curtain(this.get_pageIndicator_segmentId(a))};pe.PamplonaCourseSection.prototype.pageIndicator_mouseEntered=function(a){this.highlight_part(this.get_pageIndicator_segmentId(a))};
pe.PamplonaCourseSection.prototype.pageIndicator_mouseLeft=function(a){this.remove_highlight(this.get_pageIndicator_segmentId(a))};pe.PamplonaCourseSection.prototype.remove_highlight=function(a){$('.AccordionContent[data-type="Course"] .Links .Link').removeClass("hover");this.page_indicators[a].removeClass("hover");this.currently_visible_section||this.highlighted_segment_images[a].removeClass("hover")};
pe.PamplonaCourseSection.prototype.show_curtain=function(a){$('.AccordionContent[data-type="Course"] .Links .Link').removeClass("selected");$.each(this.highlighted_segment_images,function(a,b){b.removeClass("selected")});$('.AccordionContent[data-type="Course"] .Link[data-segment="'+a+'"]').addClass("selected");$.each(this.page_indicators,function(a,b){b.removeClass("selected")});this.page_indicators[a].addClass("selected");var b=this.container.find(".LeftCurtain .Section."+a),c=parseInt(b.attr("data-width"),
10),b=parseInt(b.attr("data-left"),10);this.left_curtain.animate_to(c,b);b=this.container.find(".RightCurtain .Section."+a);c=parseInt(b.attr("data-width"),10);b=parseInt(b.attr("data-left"),10);this.right_curtain.animate_to(c,b);this.currently_visible_section=a;"History"===this.currently_visible_section?$.each(this.highlighted_segment_images,function(a,b){b.addClass("selected");b.css("opacity",0);b.animate({opacity:1,duration:pe.Curtain.prototype.animation_duration})}):this.currently_visible_section&&
this.highlighted_segment_images[this.currently_visible_section].addClass("selected").css("opacity",0).animate({opacity:1,duration:pe.Curtain.prototype.animation_duration})};
