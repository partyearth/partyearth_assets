(function(){var f=function(b,a){return function(){return b.apply(a,arguments)}};pe.CityBasedEventJumper=function(){function b(a,b,d){var c=this;this.container=a;this.url=b;this.field_name=d;this.on_item_selected=f(this.on_item_selected,this);this.city_changed=f(this.city_changed,this);this.item=null;this.write_review_button=this.container.find(".WriteReviewButton");this.cities_selector_container=this.container.find(".CitySelector");this.events_selector_container=this.container.find(".EventSelector");
this.write_review_button.click(this.on_write_review_button_clicked);this.cities_selector_container.change(this.city_changed);this.events_selector_container.change(this.on_item_selected);this.write_review_button.click(function(){return c.events_selector_container.val()?!0:!1})}b.prototype.city_changed=function(){var a=this;this.city=this.cities_selector_container.val();this.container=this.events_selector_container;this.options="";if(this.city)return $.getJSON(this.url,{city_id:this.city},function(b){var d,
c,e;d=c=0;for(e=b.length;0<=e?c<e:c>e;d=0<=e?++c:--c)a.options+='<option value="'+b[d].value+'">'+b[d].label+"</option>";a.container.html(a.options);return a.on_item_selected()});this.container.html(this.options);return this.on_item_selected()};b.prototype.on_item_selected=function(){var a;return(a=this.events_selector_container.val())?(this.write_review_button.attr("href",""+a+"#WriteComment"),this.write_review_button.removeClass("disabled")):this.write_review_button.addClass("disabled")};return b}()}).call(this);
