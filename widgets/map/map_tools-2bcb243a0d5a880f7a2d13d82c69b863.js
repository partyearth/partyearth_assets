pe.map_tools={};pe.map_tools.array_contains_marker=function(b,c){var a=!1;$.each(b,function(b,d){if(d.object_id===c)return a=!0,!1});return a};pe.map_tools.event_map_data=function(b){var c=[];$.each(b,function(a,b){$.each(b.locations,function(a,e){if(!e.latitude)return!0;var g=e.name,f=pe.map_tools.find_venue_by_name_in_array(c,g);f||(f={name:g,address:e.address,url:e.url,id:e.id,latitude:e.latitude,longitude:e.longitude,thumbnail:e.photo,events:[]},c.push(f));f.events.push(b)})});return c};
pe.map_tools.find_marker=function(b,c){var a=null;$.each(b,function(b,d){if(d.object_id===c)return a=d,!1});return a};pe.map_tools.find_markers_to_remove=function(b,c){return $.map(b,function(a){if(a.type===pe.Map.marker_types.USER_LOCATION)return!0;var b=pe.map_tools.get_marker_object(c,a);if(!b||!1===b.map_visibility||JSON.stringify(a.events)!==JSON.stringify(b.events))return a})};
pe.map_tools.find_objects_to_add=function(b,c){var a=[];$.each(c,function(c,d){pe.map_tools.markers_contain_venue(b,d)||a.push(d)});return a};pe.map_tools.find_venue_by_name_in_array=function(b,c){var a=null;$.each(b,function(b,d){if(d.name===c)return a=d,!1});return a};pe.map_tools.get_city_name_from_google_address_lookup_result=function(b){var c=null;$.each(b.address_components,function(a,b){var d=!1;$.each(b.types,function(a,b){"locality"===b&&(d=!0)});if(d)return c=b.long_name,!1});return c};
pe.map_tools.get_marker_object=function(b,c){var a=null;$.each(b,function(b,d){if(c.object_id===d.id)return a=d,!1});return a};pe.map_tools.markers_contain_venue=function(b,c){var a=!1;$.each(b,function(b,d){if(d.object_id===c.id&&JSON.stringify(d.events)===JSON.stringify(c.events))return a=!0,!1});return a};
pe.map_tools.marker_icon=function(b,c){var a="http://www.partyearth.com/assets/map/";switch(b){case pe.Map.marker_types.CITY:a+="city.png";break;case pe.Map.marker_types.CURRENT_OBJECT:a+="location.png";break;case pe.Map.marker_types.EVENT:a+=c.disabled?"event_transparent.png":"event.png";break;case pe.Map.marker_types.EVENT_HIGHLIGHTED:a+="event_highlighted.png";break;case pe.Map.marker_types.HOTSPOT:a+=c.disabled?"hotspot_transparent.png":"hotspot.png";break;case pe.Map.marker_types.LANDMARK:a+=
"landmark.png";break;case pe.Map.marker_types.RUNNERS:a+="pamplona/runners.png";break;case pe.Map.marker_types.SPECTATORS:a+="pamplona/spectators.png";break;case pe.Map.marker_types.TIME:a+="pamplona/time.png";break;case pe.Map.marker_types.USER_LOCATION:a+="location.png";break;case pe.Map.marker_types.VENUE:a+=c.disabled?"venue_transparent.png":"venue.png"}return a+="?"+pe.assets_timestamp()};
pe.map_tools.objects_have_marker=function(b,c){var a=!1;$.each(b,function(b,d){if(c.object_id===d.id&&JSON.stringify(c.events)===JSON.stringify(d.events))return a=!0,!1});return a};pe.map_tools.remove_marker_from_array=function(b,c){return $.map(b,function(a){return a.object_id===c.object_id?null:a})};pe.map_tools.venues_contain_venue=function(b,c){var a=!1;$.each(b,function(b,d){if(d.id===c)return a=!0,!1});return a};
