(function(c){function n(){if(c.fn.ajaxSubmit.debug){var a="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(a):window.opera&&window.opera.postError&&window.opera.postError(a)}}c.fn.ajaxSubmit=function(a){function d(){function e(){var a=k.attr("target"),l=k.attr("action");b.setAttribute("target",h);"POST"!=b.getAttribute("method")&&b.setAttribute("method","POST");b.getAttribute("action")!=f.url&&b.setAttribute("action",f.url);f.skipEncodingOverride||
k.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"});f.timeout&&setTimeout(function(){u=!0;g()},f.timeout);var m=[];try{if(f.extraData)for(var n in f.extraData)m.push(c('<input type="hidden" name="'+n+'" value="'+f.extraData[n]+'" />').appendTo(b)[0]);j.appendTo("body");d.attachEvent?d.attachEvent("onload",g):d.addEventListener("load",g,!1);b.submit()}finally{b.setAttribute("action",l),a?b.setAttribute("target",a):k.removeAttr("target"),c(m).remove()}}function g(){if(!l.aborted){var a=
d.contentWindow?d.contentWindow.document:d.contentDocument?d.contentDocument:d.document;if(a&&a.location.href!=f.iframeSrc){d.detachEvent?d.detachEvent("onload",g):d.removeEventListener("load",g,!1);var e=!0;try{if(u)throw"timeout";var b="xml"==f.dataType||a.XMLDocument||c.isXMLDoc(a);n("isXml="+b);if(!b&&(window.opera&&(null==a.body||""==a.body.innerHTML))&&--y){n("requeing onLoad callback, DOM not available");setTimeout(g,250);return}l.responseText=a.body?a.body.innerHTML:a.documentElement?a.documentElement.innerHTML:
null;l.responseXML=a.XMLDocument?a.XMLDocument:a;l.getResponseHeader=function(a){return{"content-type":f.dataType}[a]};var h=/(json|script)/.test(f.dataType);if(h||f.textarea){var k=a.getElementsByTagName("textarea")[0];if(k)l.responseText=k.value;else if(h){var q=a.getElementsByTagName("pre")[0],s=a.getElementsByTagName("body")[0];q?l.responseText=q.textContent:s&&(l.responseText=s.innerHTML)}}else"xml"==f.dataType&&(!l.responseXML&&null!=l.responseText)&&(l.responseXML=z(l.responseText));var a=
l,r=f.dataType,b=f,v=a.getResponseHeader("content-type")||"",w="xml"===r||!r&&0<=v.indexOf("xml"),p=w?a.responseXML:a.responseText;w&&"parsererror"===p.documentElement.nodeName&&c.error&&c.error("parsererror");b&&b.dataFilter&&(p=b.dataFilter(p,r));"string"===typeof p&&("json"===r||!r&&0<=v.indexOf("json")?p=A(p):("script"===r||!r&&0<=v.indexOf("javascript"))&&c.globalEval(p));x=p}catch(t){n("error caught:",t),e=!1,l.error=t,f.error&&f.error.call(f.context,l,"error",t),m&&c.event.trigger("ajaxError",
[l,f,t])}l.aborted&&(n("upload aborted"),e=!1);e&&(f.success&&f.success.call(f.context,x,"success",l),m&&c.event.trigger("ajaxSuccess",[l,f]));m&&c.event.trigger("ajaxComplete",[l,f]);m&&!--c.active&&c.event.trigger("ajaxStop");f.complete&&f.complete.call(f.context,l,e?"success":"error");setTimeout(function(){j.removeData("form-plugin-onload");j.remove();l.responseXML=null},100)}}}var b=k[0];if(c(":input[name=submit],:input[id=submit]",b).length)alert('Error: Form elements must not have name or id of "submit".');
else{var f=c.extend(!0,{},c.ajaxSettings,a);f.context=f.context||f;var h="jqFormIO"+(new Date).getTime(),j=c('<iframe id="'+h+'" name="'+h+'" src="'+f.iframeSrc+'" />'),d=j[0];j.css({position:"absolute",top:"-1000px",left:"-1000px"});var l={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){n("aborting upload...");this.aborted=1;j.attr("src",f.iframeSrc);l.error="aborted";
f.error&&f.error.call(f.context,l,"error","aborted");m&&c.event.trigger("ajaxError",[l,f,"aborted"]);f.complete&&f.complete.call(f.context,l,"error")}},m=f.global;m&&!c.active++&&c.event.trigger("ajaxStart");m&&c.event.trigger("ajaxSend",[l,f]);if(f.beforeSend&&!1===f.beforeSend.call(f.context,l,f))f.global&&c.active--;else if(!l.aborted){var u=0,q=b.clk;if(q){var s=q.name;s&&!q.disabled&&(f.extraData=f.extraData||{},f.extraData[s]=q.value,"image"==q.type&&(f.extraData[s+".x"]=b.clk_x,f.extraData[s+
".y"]=b.clk_y))}f.forceSync?e():setTimeout(e,10);var x,y=50,z=c.parseXML||function(a,c){window.ActiveXObject?(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(a)):c=(new DOMParser).parseFromString(a,"text/xml");return c&&c.documentElement&&"parsererror"!=c.documentElement.nodeName?c:null},A=c.parseJSON||function(a){return window.eval("("+a+")")}}}}if(!this.length)return n("ajaxSubmit: skipping submit process - no element selected"),this;"function"==typeof a&&(a={success:a});var b=
this.attr("action");(b="string"===typeof b?c.trim(b):"")&&(b=(b.match(/^([^#]+)/)||[])[1]);b=b||window.location.href||"";a=c.extend(!0,{url:b,type:this[0].getAttribute("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},a);b={};this.trigger("form-pre-serialize",[this,a,b]);if(b.veto)return n("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(a.beforeSerialize&&!1===a.beforeSerialize(this,a))return n("ajaxSubmit: submit aborted via beforeSerialize callback"),
this;var e,g,h=this.formToArray(a.semantic);if(a.data)for(e in a.extraData=a.data,a.data)if(a.data[e]instanceof Array)for(var j in a.data[e])h.push({name:e,value:a.data[e][j]});else g=a.data[e],g=c.isFunction(g)?g():g,h.push({name:e,value:g});if(a.beforeSubmit&&!1===a.beforeSubmit(h,this,a))return n("ajaxSubmit: submit aborted via beforeSubmit callback"),this;this.trigger("form-submit-validate",[h,this,a,b]);if(b.veto)return n("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;e=c.param(h);
"GET"==a.type.toUpperCase()?(a.url+=(0<=a.url.indexOf("?")?"&":"?")+e,a.data=null):a.data=e;var k=this,m=[];a.resetForm&&m.push(function(){k.resetForm()});a.clearForm&&m.push(function(){k.clearForm()});if(!a.dataType&&a.target){var u=a.success||function(){};m.push(function(b){var e=a.replaceTarget?"replaceWith":"html";c(a.target)[e](b).each(u,arguments)})}else a.success&&m.push(a.success);a.success=function(c,b,e){for(var f=a.context||a,d=0,g=m.length;d<g;d++)m[d].apply(f,[c,b,e||k,k])};e=0<c("input:file",
this).length;j="multipart/form-data"==k.attr("enctype")||"multipart/form-data"==k.attr("encoding");!1!==a.iframe&&(e||a.iframe||j)?a.closeKeepAlive?c.get(a.closeKeepAlive,d):d():c.ajax(a);this.trigger("form-submit-notify",[this,a]);return this};c.fn.ajaxForm=function(a){if(0===this.length){var d=this.selector,b=this.context;if(!c.isReady&&d)return n("DOM not ready, queuing ajaxForm"),c(function(){c(d,b).ajaxForm(a)}),this;n("terminating; zero elements found by selector"+(c.isReady?"":" (DOM not ready)"));
return this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(b){b.isDefaultPrevented()||(b.preventDefault(),c(this).ajaxSubmit(a))}).bind("click.form-plugin",function(a){var b=a.target,d=c(b);if(!d.is(":submit,input:image")){b=d.closest(":submit");if(0==b.length)return;b=b[0]}var j=this;j.clk=b;"image"==b.type&&(void 0!=a.offsetX?(j.clk_x=a.offsetX,j.clk_y=a.offsetY):"function"==typeof c.fn.offset?(d=d.offset(),j.clk_x=a.pageX-d.left,j.clk_y=a.pageY-d.top):(j.clk_x=a.pageX-b.offsetLeft,
j.clk_y=a.pageY-b.offsetTop));setTimeout(function(){j.clk=j.clk_x=j.clk_y=null},100)})};c.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")};c.fn.formToArray=function(a){var d=[];if(0===this.length)return d;var b=this[0],e=a?b.getElementsByTagName("*"):b.elements;if(!e)return d;var g,h,j,k,m,n;g=0;for(m=e.length;g<m;g++)if(h=e[g],j=h.name)if(a&&b.clk&&"image"==h.type)!h.disabled&&b.clk==h&&(d.push({name:j,value:c(h).val()}),d.push({name:j+".x",value:b.clk_x},
{name:j+".y",value:b.clk_y}));else if((k=c.fieldValue(h,!0))&&k.constructor==Array){h=0;for(n=k.length;h<n;h++)d.push({name:j,value:k[h]})}else null!==k&&"undefined"!=typeof k&&d.push({name:j,value:k});if(!a&&b.clk&&(a=c(b.clk),e=a[0],(j=e.name)&&!e.disabled&&"image"==e.type))d.push({name:j,value:a.val()}),d.push({name:j+".x",value:b.clk_x},{name:j+".y",value:b.clk_y});return d};c.fn.formSerialize=function(a){return c.param(this.formToArray(a))};c.fn.fieldSerialize=function(a){var d=[];this.each(function(){var b=
this.name;if(b){var e=c.fieldValue(this,a);if(e&&e.constructor==Array)for(var g=0,h=e.length;g<h;g++)d.push({name:b,value:e[g]});else null!==e&&"undefined"!=typeof e&&d.push({name:this.name,value:e})}});return c.param(d)};c.fn.fieldValue=function(a){for(var d=[],b=0,e=this.length;b<e;b++){var g=c.fieldValue(this[b],a);null===g||("undefined"==typeof g||g.constructor==Array&&!g.length)||(g.constructor==Array?c.merge(d,g):d.push(g))}return d};c.fieldValue=function(a,d){var b=a.name,e=a.type,g=a.tagName.toLowerCase();
void 0===d&&(d=!0);if(d&&(!b||a.disabled||"reset"==e||"button"==e||("checkbox"==e||"radio"==e)&&!a.checked||("submit"==e||"image"==e)&&a.form&&a.form.clk!=a||"select"==g&&-1==a.selectedIndex))return null;if("select"==g){var h=a.selectedIndex;if(0>h)return null;for(var b=[],g=a.options,j=(e="select-one"==e)?h+1:g.length,h=e?h:0;h<j;h++){var k=g[h];if(k.selected){var m=k.value;m||(m=k.attributes&&k.attributes.value&&!k.attributes.value.specified?k.text:k.value);if(e)return m;b.push(m)}}return b}return c(a).val()};
c.fn.clearForm=function(){return this.each(function(){c("input,select,textarea",this).clearFields()})};c.fn.clearFields=c.fn.clearInputs=function(){return this.each(function(){var a=this.type,c=this.tagName.toLowerCase();"text"==a||"password"==a||"textarea"==c?this.value="":"checkbox"==a||"radio"==a?this.checked=!1:"select"==c&&(this.selectedIndex=-1)})};c.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})};
c.fn.enable=function(a){void 0===a&&(a=!0);return this.each(function(){this.disabled=!a})};c.fn.selected=function(a){void 0===a&&(a=!0);return this.each(function(){var d=this.type;"checkbox"==d||"radio"==d?this.checked=a:"option"==this.tagName.toLowerCase()&&(d=c(this).parent("select"),a&&(d[0]&&"select-one"==d[0].type)&&d.find("option").selected(!1),this.selected=a)})}})(jQuery);
(function(){var c,n={}.hasOwnProperty,a=function(a){var b=this;this.container=a;this.enabled_field=this.container.find(".EnabledField");this.on_save=function(){};this.editor=this.container.find(".Editor");this.submit_button=this.container.find(".SubmitButton");this.container.click(function(a){if(b.container.hasClass("Disabled"))return b.container.removeClass("Disabled"),b.enabled_field.val(!0),a.stopPropagation(),b.on_save()});this.disable_button=this.container.find(".DisableButton");this.disable_button.click(function(a){if(!b.container.hasClass("Disabled"))return b.container.addClass("Disabled"),
b.enabled_field.val(!1),a.stopPropagation(),b.on_save()})};a.prototype.save=function(a){return this.on_save=a};var d=function(a){var b=this;this.container=a;d.__super__.constructor.call(this,this.container);this.text_field=this.container.find(".Text");this.input=this.container.find(".Input");this.input.keyup(function(){return b.text_field.html(b.input.val())})},b=d,e=function(){this.constructor=b},g;for(g in a)n.call(a,g)&&(b[g]=a[g]);e.prototype=a.prototype;b.prototype=new e;b.__super__=a.prototype;
c=d;$(document).ready(function(){var a,b;$(".Editor").hide();b=new c($(".SubjectLine"));a=$(".Form");$(".DisableButton").click(function(){return $(".Editor").hide()});$(".EditButton").click(function(a){$(".Editor").hide();return $(a.currentTarget).parent().find(".Editor").show()});$(".CloseEditorButton").click(function(a){return $(a.currentTarget).parents(".Editor").hide()});return b.save(function(){return a.ajaxSubmit()})})}).call(this);
