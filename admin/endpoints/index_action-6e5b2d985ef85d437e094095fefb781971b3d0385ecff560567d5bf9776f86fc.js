pe.EndpointsTree=function(e){pe.init_widget(this,e),$(".Opener").click(this.callback(this.opener_cliked))},pe.EndpointsTree.prototype.opener_cliked=function(e){var t=$(e.target),n=t.attr("id"),a=t.parent().parent();t.html("[--]"),$.post("/admin/endpoints/children",{endpoint_id:n},function(e){a.after(e),$(".Opener").unbind("click"),new pe.EndpointsTree($(".Tree")),t.unbind("click").click(function(){$(".Endpoint"+n).toggle()})})},function(d){var o;d.rails=o={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required],textarea[name][required]",fileInputSelector:"input:file",CSRFProtection:function(e){var t=d('meta[name="csrf-token"]').attr("content");t&&e.setRequestHeader("X-CSRF-Token",t)},fire:function(e,t,n){var a=d.Event(t);return e.trigger(a,n),!1!==a.result},confirm:function(e){return confirm(e)},ajax:function(e){return d.ajax(e)},handleRemote:function(a){var e,t,n,i=a.data("type")||d.ajaxSettings&&d.ajaxSettings.dataType;if(o.fire(a,"ajax:before")){if(a.is("form")){e=a.attr("method"),t=a.attr("action"),n=a.serializeArray();var r=a.data("ujs:submit-button");r&&(n.push(r),a.data("ujs:submit-button",null))}else e=a.data("method"),t=a.attr("href"),n=null;o.ajax({url:t,type:e||"GET",data:n,dataType:i,beforeSend:function(e,t){return t.dataType===undefined&&e.setRequestHeader("accept","*/*;q=0.5, "+t.accepts.script),o.fire(a,"ajax:beforeSend",[e,t])},success:function(e,t,n){a.trigger("ajax:success",[e,t,n])},complete:function(e,t){a.trigger("ajax:complete",[e,t])},error:function(e,t,n){a.trigger("ajax:error",[e,t,n])}})}},handleMethod:function(e){var t=e.attr("href"),n=e.data("method"),a=d("meta[name=csrf-token]").attr("content"),i=d("meta[name=csrf-param]").attr("content"),r=d('<form method="post" action="'+t+'"></form>'),o='<input name="_method" value="'+n+'" type="hidden" />';i!==undefined&&a!==undefined&&(o+='<input name="'+i+'" value="'+a+'" type="hidden" />'),r.hide().append(o).appendTo("body"),r.submit()},disableFormElements:function(e){e.find(o.disableSelector).each(function(){var e=d(this),t=e.is("button")?"html":"val";e.data("ujs:enable-with",e[t]()),e[t](e.data("disable-with")),e.attr("disabled","disabled")})},enableFormElements:function(e){e.find(o.enableSelector).each(function(){var e=d(this),t=e.is("button")?"html":"val";e.data("ujs:enable-with")&&e[t](e.data("ujs:enable-with")),e.removeAttr("disabled")})},allowAction:function(e){var t,n=e.data("confirm"),a=!1;return!n||(o.fire(e,"confirm")&&(a=o.confirm(n),t=o.fire(e,"confirm:complete",[a])),a&&t)},blankInputs:function(e,t,n){var a,i=d(),r=t||"input,textarea";return e.find(r).each(function(){a=d(this),(n?a.val():!a.val())&&(i=i.add(a))}),!!i.length&&i},nonBlankInputs:function(e,t){return o.blankInputs(e,t,!0)},stopEverything:function(e){return e.stopImmediatePropagation(),!1},callFormSubmitBindings:function(e){var t=e.data("events"),n=!0;return t!==undefined&&t.submit!==undefined&&d.each(t.submit,function(e,t){if("function"==typeof t.handler)return n=t.handler(t.data)}),n}},"ajaxPrefilter"in d?d.ajaxPrefilter(function(e,t,n){o.CSRFProtection(n)}):d(document).ajaxSend(function(e,t){o.CSRFProtection(t)}),d(o.linkClickSelector).live("click.rails",function(e){var t=d(this);return o.allowAction(t)?t.data("remote")!==undefined?(o.handleRemote(t),!1):t.data("method")?(o.handleMethod(t),!1):void 0:o.stopEverything(e)}),d(o.formSubmitSelector).live("submit.rails",function(e){var t=d(this),n=t.data("remote")!==undefined,a=o.blankInputs(t,o.requiredInputSelector),i=o.nonBlankInputs(t,o.fileInputSelector);return o.allowAction(t)?a&&o.fire(t,"ajax:aborted:required",[a])?!n:n?i?o.fire(t,"ajax:aborted:file",[i]):d.support.submitBubbles||!1!==o.callFormSubmitBindings(t)?(o.handleRemote(t),!1):o.stopEverything(e):void setTimeout(function(){o.disableFormElements(t)},13):o.stopEverything(e)}),d(o.formInputClickSelector).live("click.rails",function(e){var t=d(this);if(!o.allowAction(t))return o.stopEverything(e);var n=t.attr("name"),a=n?{name:n,value:t.val()}:null;t.closest("form").data("ujs:submit-button",a)}),d(o.formSubmitSelector).live("ajax:beforeSend.rails",function(e){this==e.target&&o.disableFormElements(d(this))}),d(o.formSubmitSelector).live("ajax:complete.rails",function(e){this==e.target&&o.enableFormElements(d(this))})}(jQuery),$(document).ready(function(){new pe.EndpointsTree($(".Tree"))});