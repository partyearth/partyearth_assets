pe.SortableList=function(a,b,c,d){pe.init_widget(this,a);this.field_container=a.find(".Field");this.cookie_name=b;this.cookie_path=c||"/";this.item_template=d||"<li data-value='{{value}}'>{{title}}</li>";this.save_ordering_button=a.find(".SaveOrderingButton");this.displayed_values_container=a.find(".DisplayedValues");this.displayed_values=$.parseJSON(this.displayed_values_container.text());this.sortable_container=$(this.container.find(".List")).sortable({stop:this.callback(this.update_field_value)});
this.sortable_container.disableSelection();this.fill_in_list(this.field_container.val().split(";"));this.save_ordering_button.click(this.callback(this.save_ordering))};pe.SortableList.prototype.fill_in_list=function(a){this.sortable_container.find("li").remove();for(var b=0;b<a.length;b++){var c=a[b];this.sortable_container.append($(pe.templatize(this.item_template,{value:c,title:this.displayed_values[c]})))}};pe.SortableList.prototype.update_field_value=function(){this.field_container.val(this.sortable_container.find("li").map(function(){return $(this).data("value")}).toArray().join(";"))};
pe.SortableList.prototype.save_ordering=function(){document.cookie=this.cookie_name+"="+escape(""+this.field_container.val())+"; root="+this.cookie_path};
