(function(){var i=function(t,i){return function(){return t.apply(i,arguments)}};pe.ListPublisher=function(){function t(t){this.container=t,this.publish=i(this.publish,this),this.validate=i(this.validate,this),this.button=this.container.find(".Button"),this.error_container=this.container.find(".Error"),this.congrats=this.container.find(".Congrats"),this.validators=[],this.button.click(this.publish)}return t.prototype.add_validator=function(t){return this.validators.push(t)},t.prototype.validate=function(){var i;return i=null,_.each(this.validators,function(t){if(t.failed())return i=t.message}),i&&(this.error_container.show(),this.error_container.html(i)),!i},t.prototype.show=function(){return this.container.show(),this.button.show(),this.error_container.hide(),this.congrats.hide()},t.prototype.hide=function(){return this.button.hide(),this.error_container.hide(),this.congrats.show()},t.prototype.publish=function(){var t,i;if(this.validate())return(t={user_list:{},_method:"put"}).user_list.is_visible="true",pe.routes.Request.from_current_location("api_user_list",t).post((i=this,function(t){return 0===t.status?i.hide():i.error_container.html(t.errors[0])}))},t}()}).call(this);