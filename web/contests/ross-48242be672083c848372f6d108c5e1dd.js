(function(a){function g(a,g){var a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),l=RegExp("[\\?&]"+a+"=([^&#]*)").exec(g);return null==l?"":l[1]}a.prettyPhoto={version:"3.0"};a.fn.prettyPhoto=function(i){function s(c){$pp_pic_holder.find("#pp_full_res object,#pp_full_res embed").css("visibility","hidden");$pp_pic_holder.find(".pp_fade").fadeOut(settings.animation_speed,function(){a(".pp_loaderIcon").show();c()})}function l(c){set_position==c-1?($pp_pic_holder.find("a.pp_next").css("visibility","hidden"),
$pp_pic_holder.find("a.pp_next").addClass("disabled").unbind("click")):($pp_pic_holder.find("a.pp_next").css("visibility","visible"),$pp_pic_holder.find("a.pp_next.disabled").removeClass("disabled").bind("click",function(){a.prettyPhoto.changePage("next");return!1}));0==set_position?$pp_pic_holder.find("a.pp_previous").css("visibility","hidden").addClass("disabled").unbind("click"):$pp_pic_holder.find("a.pp_previous.disabled").css("visibility","visible").removeClass("disabled").bind("click",function(){a.prettyPhoto.changePage("previous");
return false});1<c?a(".pp_nav").show():a(".pp_nav").hide()}function f(a,b){resized=!1;t(a,b);imageWidth=a;imageHeight=b;if((j>d||k>e)&&doresize&&settings.allow_resize&&!n){resized=!0;for(fitting=!1;!fitting;)j>d?(imageWidth=d-200,imageHeight=b/a*imageWidth):k>e?(imageHeight=e-200,imageWidth=a/b*imageHeight):fitting=!0,k=imageHeight,j=imageWidth;t(imageWidth,imageHeight)}return{width:Math.floor(imageWidth),height:Math.floor(imageHeight),containerHeight:Math.floor(k),containerWidth:Math.floor(j)+40,
contentHeight:Math.floor(o),contentWidth:Math.floor(u),resized:resized}}function t(c,b){c=parseFloat(c);b=parseFloat(b);$pp_details=$pp_pic_holder.find(".pp_details");$pp_details.width(c);detailsHeight=parseFloat($pp_details.css("marginTop"))+parseFloat($pp_details.css("marginBottom"));$pp_details=$pp_details.clone().appendTo(a("body")).css({position:"absolute",top:-1E4});detailsHeight+=$pp_details.height();detailsHeight=34>=detailsHeight?36:detailsHeight;a.browser.msie&&7==a.browser.version&&(detailsHeight+=
8);$pp_details.remove();o=b+detailsHeight;u=c;k=o+$ppt.height()+$pp_pic_holder.find(".pp_top").height()+$pp_pic_holder.find(".pp_bottom").height();j=c}function p(a){return a.match(/youtube\.com\/watch/i)?"youtube":a.match(/vimeo\.com/i)?"vimeo":-1!=a.indexOf(".mov")?"quicktime":-1!=a.indexOf(".swf")?"flash":-1!=a.indexOf("iframe")?"iframe":-1!=a.indexOf("custom")?"custom":"#"==a.substr(0,1)?"inline":"image"}function m(){doresize&&"undefined"!=typeof $pp_pic_holder&&(scroll_pos=v(),titleHeight=$ppt.height(),
contentHeight=$pp_pic_holder.height(),contentwidth=$pp_pic_holder.width(),projectedTop=e/2+scroll_pos.scrollTop-contentHeight/2,$pp_pic_holder.css({top:projectedTop,left:d/2+scroll_pos.scrollLeft-contentwidth/2}))}function v(){if(self.pageYOffset)return{scrollTop:self.pageYOffset,scrollLeft:self.pageXOffset};if(document.documentElement&&document.documentElement.scrollTop)return{scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft};if(document.body)return{scrollTop:document.body.scrollTop,
scrollLeft:document.body.scrollLeft}}function w(b){theRel=a(b).attr("rel");galleryRegExp=/\[(?:.*)\]/;pp_images=(isSet=galleryRegExp.exec(theRel)?!0:!1)?jQuery.map(q,function(b){if(-1!=a(b).attr("rel").indexOf(theRel))return a(b).attr("href")}):a.makeArray(a(b).attr("href"));pp_titles=isSet?jQuery.map(q,function(b){if(-1!=a(b).attr("rel").indexOf(theRel))return a(b).find("img").attr("alt")?a(b).find("img").attr("alt"):""}):a.makeArray(a(b).find("img").attr("alt"));pp_descriptions=isSet?jQuery.map(q,
function(b){if(-1!=a(b).attr("rel").indexOf(theRel))return a(b).attr("title")?a(b).attr("title"):""}):a.makeArray(a(b).attr("title"));a("body").append(settings.markup);$pp_pic_holder=a(".pp_pic_holder");$ppt=a(".ppt");$pp_overlay=a("div.pp_overlay");if(isSet&&settings.overlay_gallery){currentGalleryPage=0;toInject="";for(b=0;b<pp_images.length;b++)classname=/(.*?).(jpg|jpeg|png|gif)$/.exec(pp_images[b])?"":"default",toInject+="<li class='"+classname+"'><a href='#'><img src='"+pp_images[b]+"' width='50' alt='' /></a></li>";
toInject=settings.gallery_markup.replace(/{gallery}/g,toInject);$pp_pic_holder.find("#pp_full_res").after(toInject);$pp_pic_holder.find(".pp_gallery .pp_arrow_next").click(function(){a.prettyPhoto.changeGalleryPage("next");a.prettyPhoto.stopSlideshow();return!1});$pp_pic_holder.find(".pp_gallery .pp_arrow_previous").click(function(){a.prettyPhoto.changeGalleryPage("previous");a.prettyPhoto.stopSlideshow();return!1});$pp_pic_holder.find(".pp_content").hover(function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeIn()},
function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeOut()});itemWidth=57;$pp_pic_holder.find(".pp_gallery ul li").each(function(b){a(this).css({position:"absolute",left:b*itemWidth});a(this).find("a").unbind("click").click(function(){a.prettyPhoto.changePage(b);a.prettyPhoto.stopSlideshow();return!1})})}settings.slideshow&&($pp_pic_holder.find(".pp_nav").prepend('<a href="#" class="pp_play">Play</a>'),$pp_pic_holder.find(".pp_nav .pp_play").click(function(){a.prettyPhoto.startSlideshow();
return!1}));$pp_pic_holder.attr("class","pp_pic_holder "+settings.theme);$pp_overlay.css({opacity:0,height:a(document).height(),width:a(document).width()}).bind("click",function(){settings.modal||a.prettyPhoto.close()});a("a.pp_close").bind("click",function(){a.prettyPhoto.close();return false});a("a.pp_expand").bind("click",function(){if(a(this).hasClass("pp_expand")){a(this).removeClass("pp_expand").addClass("pp_contract");doresize=false}else{a(this).removeClass("pp_contract").addClass("pp_expand");
doresize=true}s(function(){a.prettyPhoto.open()});return false});$pp_pic_holder.find(".pp_previous, .pp_nav .pp_arrow_previous").bind("click",function(){a.prettyPhoto.changePage("previous");a.prettyPhoto.stopSlideshow();return false});$pp_pic_holder.find(".pp_next, .pp_nav .pp_arrow_next").bind("click",function(){a.prettyPhoto.changePage("next");a.prettyPhoto.stopSlideshow();return false});m()}var i=jQuery.extend({animation_speed:"fast",slideshow:!1,autoplay_slideshow:!1,opacity:0.8,show_title:!0,
allow_resize:!0,default_width:500,default_height:344,counter_separator_label:"/",theme:"facebook",hideflash:!1,wmode:"opaque",autoplay:!0,modal:!1,overlay_gallery:!0,keyboard_shortcuts:!0,changepicturecallback:function(){},callback:function(){},markup:'<div class="pp_pic_holder">       <div class="ppt">&nbsp;</div>       <div class="pp_top">        <div class="pp_left"></div>        <div class="pp_middle"></div>        <div class="pp_right"></div>       </div>       <div class="pp_content_container">        <div class="pp_left">        <div class="pp_right">         <div class="pp_content">          <div class="pp_loaderIcon"></div>          <div class="pp_fade">           <a href="#" class="pp_expand" title="Expand the image">Expand</a>           <div class="pp_hoverContainer">            <a class="pp_next" href="#">next</a>            <a class="pp_previous" href="#">previous</a>           </div>           <div id="pp_full_res"></div>           <div class="pp_details clearfix">            <p class="pp_description"></p>            <a class="pp_close" href="#">Close</a>            <div class="pp_nav">             <a href="#" class="pp_arrow_previous">Previous</a>             <p class="currentTextHolder">0/0</p>             <a href="#" class="pp_arrow_next">Next</a>            </div>           </div>          </div>         </div>        </div>        </div>       </div>       <div class="pp_bottom">        <div class="pp_left"></div>        <div class="pp_middle"></div>        <div class="pp_right"></div>       </div>      </div>      <div class="pp_overlay"></div>',
gallery_markup:'<div class="pp_gallery">         <a href="#" class="pp_arrow_previous">Previous</a>         <ul>          {gallery}         </ul>         <a href="#" class="pp_arrow_next">Next</a>        </div>',image_markup:'<img id="fullResImage" src="" />',flash_markup:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',
quicktime_markup:'<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>',iframe_markup:'<iframe src ="{path}" width="{width}" height="{height}" frameborder="no"></iframe>',
inline_markup:'<div class="pp_inline clearfix">{content}</div>',custom_markup:""},i),q=this,n=!1,b,r,o,u,k,j,e=a(window).height(),d=a(window).width(),h;doresize=!0;scroll_pos=v();a(window).unbind("resize").resize(function(){m();e=a(window).height();d=a(window).width();"undefined"!=typeof $pp_overlay&&$pp_overlay.height(a(document).height())});i.keyboard_shortcuts&&a(document).unbind("keydown").keydown(function(b){if("undefined"!=typeof $pp_pic_holder&&$pp_pic_holder.is(":visible")){switch(b.keyCode){case 37:a.prettyPhoto.changePage("previous");
break;case 39:a.prettyPhoto.changePage("next");break;case 27:settings.modal||a.prettyPhoto.close()}return!1}});a.prettyPhoto.initialize=function(){settings=i;a.browser.msie&&6==parseInt(a.browser.version)&&(settings.theme="light_square");w(this);settings.allow_resize&&a(window).scroll(function(){m()});m();set_position=jQuery.inArray(a(this).attr("href"),pp_images);a.prettyPhoto.open();return!1};a.prettyPhoto.open=function(c,d,e){"undefined"==typeof settings&&(settings=i,a.browser.msie&&6==a.browser.version&&
(settings.theme="light_square"),w(c.target),pp_images=a.makeArray(c),pp_titles=d?a.makeArray(d):a.makeArray(""),pp_descriptions=e?a.makeArray(e):a.makeArray(""),isSet=1<pp_images.length?!0:!1,set_position=0);a.browser.msie&&6==a.browser.version&&a("select").css("visibility","hidden");settings.hideflash&&a("object,embed").css("visibility","hidden");l(a(pp_images).size());a(".pp_loaderIcon").show();$ppt.is(":hidden")&&$ppt.css("opacity",0).show();$pp_overlay.show().fadeTo(settings.animation_speed,settings.opacity);
$pp_pic_holder.find(".currentTextHolder").text(set_position+1+settings.counter_separator_label+a(pp_images).size());$pp_pic_holder.find(".pp_description").show().html(unescape(pp_descriptions[set_position]));settings.show_title&&""!=pp_titles[set_position]&&"undefined"!=typeof pp_titles[set_position]?$ppt.html(unescape(pp_titles[set_position])):$ppt.html("&nbsp;");movie_width=parseFloat(g("width",pp_images[set_position]))?g("width",pp_images[set_position]):settings.default_width.toString();movie_height=
parseFloat(g("height",pp_images[set_position]))?g("height",pp_images[set_position]):settings.default_height.toString();-1!=movie_width.indexOf("%")||-1!=movie_height.indexOf("%")?(movie_height=parseFloat(a(window).height()*parseFloat(movie_height)/100-150),movie_width=parseFloat(a(window).width()*parseFloat(movie_width)/100-150),n=!0):n=!1;$pp_pic_holder.fadeIn(function(){imgPreloader="";switch(p(pp_images[set_position])){case "image":imgPreloader=new Image;nextImage=new Image;if(isSet&&set_position>
a(pp_images).size())nextImage.src=pp_images[set_position+1];prevImage=new Image;if(isSet&&pp_images[set_position-1])prevImage.src=pp_images[set_position-1];$pp_pic_holder.find("#pp_full_res")[0].innerHTML=settings.image_markup;$pp_pic_holder.find("#fullResImage").attr("src",pp_images[set_position]);imgPreloader.onload=function(){b=f(imgPreloader.width,imgPreloader.height);_showContent()};imgPreloader.onerror=function(){alert("Image cannot be loaded. Make sure the path is correct and image exist.");
a.prettyPhoto.close()};imgPreloader.src=pp_images[set_position];break;case "youtube":b=f(movie_width,movie_height);movie="http://www.youtube.com/v/"+g("v",pp_images[set_position]);settings.autoplay&&(movie=movie+"&autoplay=1");toInject=settings.flash_markup.replace(/{width}/g,b.width).replace(/{height}/g,b.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,movie);break;case "vimeo":b=f(movie_width,movie_height);movie_id=pp_images[set_position];movie="http://player.vimeo.com/video/"+movie_id.match(/http:\/\/(www\.)?vimeo.com\/(\d+)/)[2]+
"?title=0&amp;byline=0&amp;portrait=0";settings.autoplay&&(movie=movie+"&autoplay=1;");vimeo_width=b.width+"/embed/?moog_width="+b.width;toInject=settings.iframe_markup.replace(/{width}/g,vimeo_width).replace(/{height}/g,b.height).replace(/{path}/g,movie);break;case "quicktime":b=f(movie_width,movie_height);b.height=b.height+15;b.contentHeight=b.contentHeight+15;b.containerHeight=b.containerHeight+15;toInject=settings.quicktime_markup.replace(/{width}/g,b.width).replace(/{height}/g,b.height).replace(/{wmode}/g,
settings.wmode).replace(/{path}/g,pp_images[set_position]).replace(/{autoplay}/g,settings.autoplay);break;case "flash":b=f(movie_width,movie_height);flash_vars=pp_images[set_position];flash_vars=flash_vars.substring(pp_images[set_position].indexOf("flashvars")+10,pp_images[set_position].length);filename=pp_images[set_position];filename=filename.substring(0,filename.indexOf("?"));toInject=settings.flash_markup.replace(/{width}/g,b.width).replace(/{height}/g,b.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,
filename+"?"+flash_vars);break;case "iframe":b=f(movie_width,movie_height);frame_url=pp_images[set_position];frame_url=frame_url.substr(0,frame_url.indexOf("iframe")-1);toInject=settings.iframe_markup.replace(/{width}/g,b.width).replace(/{height}/g,b.height).replace(/{path}/g,frame_url);break;case "custom":b=f(movie_width,movie_height);toInject=settings.custom_markup;break;case "inline":myClone=a(pp_images[set_position]).clone().css({width:settings.default_width}).wrapInner('<div id="pp_full_res"><div class="pp_inline clearfix"></div></div>').appendTo(a("body"));
b=f(a(myClone).width(),a(myClone).height());a(myClone).remove();toInject=settings.inline_markup.replace(/{content}/g,a(pp_images[set_position]).html())}if(!imgPreloader){$pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject;_showContent()}});return!1};a.prettyPhoto.changePage=function(b){currentGalleryPage=0;if("previous"==b){if(set_position--,0>set_position){set_position=0;return}}else"next"==b?(set_position++,set_position>a(pp_images).size()-1&&(set_position=0)):set_position=b;doresize||(doresize=
!0);a(".pp_contract").removeClass("pp_contract").addClass("pp_expand");s(function(){a.prettyPhoto.open()})};a.prettyPhoto.changeGalleryPage=function(b){"next"==b?(currentGalleryPage++,currentGalleryPage>totalPage&&(currentGalleryPage=0)):"previous"==b?(currentGalleryPage--,0>currentGalleryPage&&(currentGalleryPage=totalPage)):currentGalleryPage=b;itemsToSlide=currentGalleryPage==totalPage?pp_images.length-totalPage*itemsPerPage:itemsPerPage;$pp_pic_holder.find(".pp_gallery li").each(function(b){a(this).animate({left:b*
itemWidth-itemsToSlide*itemWidth*currentGalleryPage})})};a.prettyPhoto.startSlideshow=function(){"undefined"==typeof h?($pp_pic_holder.find(".pp_play").unbind("click").removeClass("pp_play").addClass("pp_pause").click(function(){a.prettyPhoto.stopSlideshow();return!1}),h=setInterval(a.prettyPhoto.startSlideshow,settings.slideshow)):a.prettyPhoto.changePage("next")};a.prettyPhoto.stopSlideshow=function(){$pp_pic_holder.find(".pp_pause").unbind("click").removeClass("pp_pause").addClass("pp_play").click(function(){a.prettyPhoto.startSlideshow();
return!1});clearInterval(h);h=void 0};a.prettyPhoto.close=function(){clearInterval(h);$pp_pic_holder.stop().find("object,embed").css("visibility","hidden");a("div.pp_pic_holder,div.ppt,.pp_fade").fadeOut(settings.animation_speed,function(){a(this).remove()});$pp_overlay.fadeOut(settings.animation_speed,function(){a.browser.msie&&6==a.browser.version&&a("select").css("visibility","visible");settings.hideflash&&a("object,embed").css("visibility","visible");a(this).remove();a(window).unbind("scroll");
settings.callback();doresize=!0;r=!1;delete settings})};_showContent=function(){a(".pp_loaderIcon").hide();$ppt.fadeTo(settings.animation_speed,1);projectedTop=scroll_pos.scrollTop+(e/2-b.containerHeight/2);0>projectedTop&&(projectedTop=0);$pp_pic_holder.find(".pp_content").animate({height:b.contentHeight},settings.animation_speed);$pp_pic_holder.animate({top:projectedTop,left:d/2-b.containerWidth/2,width:b.containerWidth},settings.animation_speed,function(){$pp_pic_holder.find(".pp_hoverContainer,#fullResImage").height(b.height).width(b.width);
$pp_pic_holder.find(".pp_fade").fadeIn(settings.animation_speed);isSet&&"image"==p(pp_images[set_position])?$pp_pic_holder.find(".pp_hoverContainer").show():$pp_pic_holder.find(".pp_hoverContainer").hide();b.resized&&a("a.pp_expand,a.pp_contract").fadeIn(settings.animation_speed);settings.autoplay_slideshow&&!h&&!r&&a.prettyPhoto.startSlideshow();settings.changepicturecallback();r=!0});isSet&&settings.overlay_gallery&&"image"==p(pp_images[set_position])?(itemWidth=57,navWidth="facebook"==settings.theme?
58:38,itemsPerPage=Math.floor((b.containerWidth-100-navWidth)/itemWidth),itemsPerPage=itemsPerPage<pp_images.length?itemsPerPage:pp_images.length,totalPage=Math.ceil(pp_images.length/itemsPerPage)-1,0==totalPage?(navWidth=0,$pp_pic_holder.find(".pp_gallery .pp_arrow_next,.pp_gallery .pp_arrow_previous").hide()):$pp_pic_holder.find(".pp_gallery .pp_arrow_next,.pp_gallery .pp_arrow_previous").show(),galleryWidth=itemsPerPage*itemWidth+navWidth,$pp_pic_holder.find(".pp_gallery").width(galleryWidth).css("margin-left",
-(galleryWidth/2)),$pp_pic_holder.find(".pp_gallery ul").width(itemsPerPage*itemWidth).find("li.selected").removeClass("selected"),goToPage=Math.floor(set_position/itemsPerPage)<=totalPage?Math.floor(set_position/itemsPerPage):totalPage,itemsPerPage?$pp_pic_holder.find(".pp_gallery").hide().show().removeClass("disabled"):$pp_pic_holder.find(".pp_gallery").hide().addClass("disabled"),a.prettyPhoto.changeGalleryPage(goToPage),$pp_pic_holder.find(".pp_gallery ul li:eq("+set_position+")").addClass("selected")):
($pp_pic_holder.find(".pp_content").unbind("mouseenter mouseleave"),$pp_pic_holder.find(".pp_gallery").hide())};return this.unbind("click").click(a.prettyPhoto.initialize)}})(jQuery);$(document).ready(function(){pe.photos=$(".Gallery a[rel^='prettyPhoto']");pe.photos.prettyPhoto({theme:"dark_rounded",animationSpeed:"fast",overlay_gallery:!1});$(".Steps").click(pe.step_link_clicked);pe.init_page_framework()});
pe.step_link_clicked=function(a){a.stopImmediatePropagation();(a=$(a.target).data("step"))?$(pe.photos[a-1]).click():$(pe.photos[0]).click();return!1};
