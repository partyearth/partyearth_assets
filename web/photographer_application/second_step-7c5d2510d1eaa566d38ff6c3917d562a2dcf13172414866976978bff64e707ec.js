pe.ConfirmationDialog=function(e,t){pe.init_widget(this,null),this.success_callback=t,this.container=$(this.html(e)),this.container.appendTo("body");var i=this.callback(this.confirm_clicked);this.container.dialog({title:"Please confirm",modal:!0,resizable:!1,width:300,buttons:{Yes:i,Cancel:function(){$(this).remove()}}})},pe.ConfirmationDialog.prototype.html=function(e){return"<div>"+e+"</div>"},pe.ConfirmationDialog.prototype.confirm_clicked=function(){this.success_callback(),this.container.remove()};var swfobject=function(){function t(){if(!j){try{var e=x.getElementsByTagName("body")[0].appendChild(m("span"));e.parentNode.removeChild(e)}catch(a){return}j=!0;for(var t=k.length,i=0;i<t;i++)k[i]()}}function e(e){j?e():k[k.length]=e}function i(e){if(typeof A.addEventListener!=I)A.addEventListener("load",e,!1);else if(typeof x.addEventListener!=I)x.addEventListener("load",e,!1);else if(typeof A.attachEvent!=I)u(A,"onload",e);else if("function"==typeof A.onload){var t=A.onload;A.onload=function(){t(),e()}}else A.onload=e}function a(){N?n():s()}function n(){var t=x.getElementsByTagName("body")[0],i=m(T);i.setAttribute("type",q);var a=t.appendChild(i);if(a){var n=0;!function(){if(typeof a.GetVariable!=I){var e=a.GetVariable("$version");e&&(e=e.split(" ")[1].split(","),V.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)])}else if(n<10)return n++,setTimeout(arguments.callee,10);t.removeChild(i),a=null,s()}()}else s()}function s(){var e=B.length;if(0<e)for(var t=0;t<e;t++){var i=B[t].id,a=B[t].callbackFn,n={success:!1,id:i};if(0<V.pv[0]){var s=_(i);if(s)if(!b(B[t].swfVersion)||V.wk&&V.wk<312)if(B[t].expressInstall&&g()){var o={};o.data=B[t].expressInstall,o.width=s.getAttribute("width")||"0",o.height=s.getAttribute("height")||"0",s.getAttribute("class")&&(o.styleclass=s.getAttribute("class")),s.getAttribute("align")&&(o.align=s.getAttribute("align"));for(var l={},r=s.getElementsByTagName("param"),u=r.length,d=0;d<u;d++)"movie"!=r[d].getAttribute("name").toLowerCase()&&(l[r[d].getAttribute("name")]=r[d].getAttribute("value"));y(o,l,i,a)}else h(s),a&&a(n);else S(i,!0),a&&(n.success=!0,n.ref=c(i),a(n))}else if(S(i,!0),a){var p=c(i);p&&typeof p.SetVariable!=I&&(n.success=!0,n.ref=p),a(n)}}}function c(e){var t=null,i=_(e);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=I)t=i;else{var a=i.getElementsByTagName(T)[0];a&&(t=a)}return t}function g(){return!z&&b("6.0.65")&&(V.win||V.mac)&&!(V.wk&&V.wk<312)}function y(e,t,i,a){F=a||null,w={success:!(z=!0),id:i};var n=_(i);if(n){"OBJECT"==n.nodeName?(E=r(n),U=null):(E=n,U=i),e.id=O,(typeof e.width==I||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==I||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),x.title=x.title.slice(0,47)+" - Flash Player Installation";var s=V.ie&&V.win?"ActiveX":"PlugIn",o="MMredirectURL="+A.location.toString().replace(/&/g,"%26")+"&MMplayerType="+s+"&MMdoctitle="+x.title;if(typeof t.flashvars!=I?t.flashvars+="&"+o:t.flashvars=o,V.ie&&V.win&&4!=n.readyState){var l=m("div");i+="SWFObjectNew",l.setAttribute("id",i),n.parentNode.insertBefore(l,n),n.style.display="none",function(){4==n.readyState?n.parentNode.removeChild(n):setTimeout(arguments.callee,10)}()}v(e,t,i)}}function h(e){if(V.ie&&V.win&&4!=e.readyState){var t=m("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(r(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(r(e),e)}function r(e){var t=m("div");if(V.win&&V.ie)t.innerHTML=e.innerHTML;else{var i=e.getElementsByTagName(T)[0];if(i){var a=i.childNodes;if(a)for(var n=a.length,s=0;s<n;s++)1==a[s].nodeType&&"PARAM"==a[s].nodeName||8==a[s].nodeType||t.appendChild(a[s].cloneNode(!0))}}return t}function v(e,t,i){var a,n=_(i);if(V.wk&&V.wk<312)return a;if(n)if(typeof e.id==I&&(e.id=i),V.ie&&V.win){var s="";for(var o in e)e[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?t.movie=e[o]:"styleclass"==o.toLowerCase()?s+=' class="'+e[o]+'"':"classid"!=o.toLowerCase()&&(s+=" "+o+'="'+e[o]+'"'));var l="";for(var r in t)t[r]!=Object.prototype[r]&&(l+='<param name="'+r+'" value="'+t[r]+'" />');n.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+s+">"+l+"</object>",$[$.length]=e.id,a=_(e.id)}else{var u=m(T);for(var d in u.setAttribute("type",q),e)e[d]!=Object.prototype[d]&&("styleclass"==d.toLowerCase()?u.setAttribute("class",e[d]):"classid"!=d.toLowerCase()&&u.setAttribute(d,e[d]));for(var p in t)t[p]!=Object.prototype[p]&&"movie"!=p.toLowerCase()&&f(u,p,t[p]);n.parentNode.replaceChild(u,n),a=u}return a}function f(e,t,i){var a=m("param");a.setAttribute("name",t),a.setAttribute("value",i),e.appendChild(a)}function o(e){var t=_(e);t&&"OBJECT"==t.nodeName&&(V.ie&&V.win?(t.style.display="none",function(){4==t.readyState?l(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function l(e){var t=_(e);if(t){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode.removeChild(t)}}function _(e){var t=null;try{t=x.getElementById(e)}catch(i){}return t}function m(e){return x.createElement(e)}function u(e,t,i){e.attachEvent(t,i),M[M.length]=[e,t,i]}function b(e){var t=V.pv,i=e.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,t[0]>i[0]||t[0]==i[0]&&t[1]>i[1]||t[0]==i[0]&&t[1]==i[1]&&t[2]>=i[2]}function d(e,t,i,a){if(!V.ie||!V.mac){var n=x.getElementsByTagName("head")[0];if(n){var s=i&&"string"==typeof i?i:"screen";if(a&&(D=C=null),!C||D!=s){var o=m("style");o.setAttribute("type","text/css"),o.setAttribute("media",s),C=n.appendChild(o),V.ie&&V.win&&typeof x.styleSheets!=I&&0<x.styleSheets.length&&(C=x.styleSheets[x.styleSheets.length-1]),D=s}V.ie&&V.win?C&&typeof C.addRule==T&&C.addRule(e,t):C&&typeof x.createTextNode!=I&&C.appendChild(x.createTextNode(e+" {"+t+"}"))}}}function S(e,t){if(Q){var i=t?"visible":"hidden";j&&_(e)?_(e).style.visibility=i:d("#"+e,"visibility:"+i)}}function p(e){return null!=/[\\\"<>\.;]/.exec(e)&&typeof encodeURIComponent!=I?encodeURIComponent(e):e}var E,U,F,w,C,D,I="undefined",T="object",L="Shockwave Flash",R="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",O="SWFObjectExprInst",W="onreadystatechange",A=window,x=document,P=navigator,N=!1,k=[a],B=[],$=[],M=[],j=!1,z=!1,Q=!0,V=function(){var e=typeof x.getElementById!=I&&typeof x.getElementsByTagName!=I&&typeof x.createElement!=I,t=P.userAgent.toLowerCase(),i=P.platform.toLowerCase(),a=i?/win/.test(i):/win/.test(t),n=i?/mac/.test(i):/mac/.test(t),s=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),o=!1,l=[0,0,0],r=null;if(typeof P.plugins!=I&&typeof P.plugins[L]==T)!(r=P.plugins[L].description)||typeof P.mimeTypes!=I&&P.mimeTypes[q]&&!P.mimeTypes[q].enabledPlugin||(o=!(N=!0),r=r.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),l[0]=parseInt(r.replace(/^(.*)\..*$/,"$1"),10),l[1]=parseInt(r.replace(/^.*\.(.*)\s.*$/,"$1"),10),l[2]=/[a-zA-Z]/.test(r)?parseInt(r.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof A.ActiveXObject!=I)try{var u=new ActiveXObject(R);u&&(r=u.GetVariable("$version"))&&(o=!0,r=r.split(" ")[1].split(","),l=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)])}catch(d){}return{w3:e,pv:l,wk:s,ie:o,win:a,mac:n}}();V.w3&&((typeof x.readyState!=I&&"complete"==x.readyState||typeof x.readyState==I&&(x.getElementsByTagName("body")[0]||x.body))&&t(),j||(typeof x.addEventListener!=I&&x.addEventListener("DOMContentLoaded",t,!1),V.ie&&V.win&&(x.attachEvent(W,function(){"complete"==x.readyState&&(x.detachEvent(W,arguments.callee),t())}),A==top&&function(){if(!j){try{x.documentElement.doScroll("left")}catch(e){return setTimeout(arguments.callee,0)}t()}}()),V.wk&&function(){j||(/loaded|complete/.test(x.readyState)?t():setTimeout(arguments.callee,0))}(),i(t))),V.ie&&V.win&&window.attachEvent("onunload",function(){for(var e=M.length,t=0;t<e;t++)M[t][0].detachEvent(M[t][1],M[t][2]);for(var i=$.length,a=0;a<i;a++)o($[a]);for(var n in V)V[n]=null;for(var s in V=null,swfobject)swfobject[s]=null;swfobject=null});return{registerObject:function(e,t,i,a){if(V.w3&&e&&t){var n={};n.id=e,n.swfVersion=t,n.expressInstall=i,n.callbackFn=a,B[B.length]=n,S(e,!1)}else a&&a({success:!1,id:e})},getObjectById:function(e){if(V.w3)return c(e)},embedSWF:function(o,l,r,u,d,p,c,h,f,_){var m={success:!1,id:l};V.w3&&!(V.wk&&V.wk<312)&&o&&l&&r&&u&&d?(S(l,!1),e(function(){r+="",u+="";var e={};if(f&&typeof f===T)for(var t in f)e[t]=f[t];e.data=o,e.width=r,e.height=u;var i={};if(h&&typeof h===T)for(var a in h)i[a]=h[a];if(c&&typeof c===T)for(var n in c)typeof i.flashvars!=I?i.flashvars+="&"+n+"="+c[n]:i.flashvars=n+"="+c[n];if(b(d)){var s=v(e,i,l);e.id==l&&S(l,!0),m.success=!0,m.ref=s}else{if(p&&g())return e.data=p,void y(e,i,l,_);S(l,!0)}_&&_(m)})):_&&_(m)},switchOffAutoHideShow:function(){Q=!1},ua:V,getFlashPlayerVersion:function(){return{major:V.pv[0],minor:V.pv[1],release:V.pv[2]}},hasFlashPlayerVersion:b,createSWF:function(e,t,i){return V.w3?v(e,t,i):undefined},showExpressInstall:function(e,t,i,a){V.w3&&g()&&y(e,t,i,a)},removeSWF:function(e){V.w3&&o(e)},createCSS:function(e,t,i,a){V.w3&&d(e,t,i,a)},addDomLoadEvent:e,addLoadEvent:i,getQueryParamValue:function(e){var t=x.location.search||x.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return p(t);for(var i=t.split("&"),a=0;a<i.length;a++)if(i[a].substring(0,i[a].indexOf("="))==e)return p(i[a].substring(i[a].indexOf("=")+1))}return""},expressInstallCallback:function(){if(z){var e=_(O);e&&E&&(e.parentNode.replaceChild(E,e),U&&(S(U,!0),V.ie&&V.win&&(E.style.display="block")),F&&F(w)),z=!1}}}}(),SWFUpload;SWFUpload==undefined&&(SWFUpload=function(e){this.initSWFUpload(e)}),SWFUpload.prototype.initSWFUpload=function(e){try{this.customSettings={},this.settings=e,this.eventQueue=[],this.movieName="SWFUpload_"+SWFUpload.movieCount++,this.movieElement=null,(SWFUpload.instances[this.movieName]=this).initSettings(),this.loadFlash(),this.displayDebugInfo()}catch(t){throw delete SWFUpload.instances[this.movieName],t}},SWFUpload.instances={},SWFUpload.movieCount=0,SWFUpload.version="2.2.0 2009-03-25",SWFUpload.QUEUE_ERROR={QUEUE_LIMIT_EXCEEDED:-100,FILE_EXCEEDS_SIZE_LIMIT:-110,ZERO_BYTE_FILE:-120,INVALID_FILETYPE:-130},SWFUpload.UPLOAD_ERROR={HTTP_ERROR:-200,MISSING_UPLOAD_URL:-210,IO_ERROR:-220,SECURITY_ERROR:-230,UPLOAD_LIMIT_EXCEEDED:-240,UPLOAD_FAILED:-250,SPECIFIED_FILE_ID_NOT_FOUND:-260,FILE_VALIDATION_FAILED:-270,FILE_CANCELLED:-280,UPLOAD_STOPPED:-290},SWFUpload.FILE_STATUS={QUEUED:-1,IN_PROGRESS:-2,ERROR:-3,COMPLETE:-4,CANCELLED:-5},SWFUpload.BUTTON_ACTION={SELECT_FILE:-100,SELECT_FILES:-110,START_UPLOAD:-120},SWFUpload.CURSOR={ARROW:-1,HAND:-2},SWFUpload.WINDOW_MODE={WINDOW:"window",TRANSPARENT:"transparent",OPAQUE:"opaque"},SWFUpload.completeURL=function(e){if(!e)return"";if("string"!=typeof e||e.match(/^https?:\/\//i)||e.match(/^\//))return e;window.location.protocol,window.location.hostname,window.location.port&&window.location.port;var t=window.location.pathname.lastIndexOf("/");return path=t<=0?"/":window.location.pathname.substr(0,t)+"/",path+e},SWFUpload.prototype.initSettings=function(){this.ensureDefault=function(e,t){this.settings[e]=this.settings[e]==undefined?t:this.settings[e]},this.ensureDefault("upload_url",""),this.ensureDefault("preserve_relative_urls",!1),this.ensureDefault("file_post_name","Filedata"),this.ensureDefault("post_params",{}),this.ensureDefault("use_query_string",!1),this.ensureDefault("requeue_on_error",!1),this.ensureDefault("http_success",[]),this.ensureDefault("assume_success_timeout",0),this.ensureDefault("file_types","*.*"),this.ensureDefault("file_types_description","All Files"),this.ensureDefault("file_size_limit",0),this.ensureDefault("file_upload_limit",0),this.ensureDefault("file_queue_limit",0),this.ensureDefault("flash_url","swfupload.swf"),this.ensureDefault("prevent_swf_caching",!0),this.ensureDefault("button_image_url",""),this.ensureDefault("button_width",1),this.ensureDefault("button_height",1),this.ensureDefault("button_text",""),this.ensureDefault("button_text_style","color: #000000; font-size: 16pt;"),this.ensureDefault("button_text_top_padding",0),this.ensureDefault("button_text_left_padding",0),this.ensureDefault("button_action",SWFUpload.BUTTON_ACTION.SELECT_FILES),this.ensureDefault("button_disabled",!1),this.ensureDefault("button_placeholder_id",""),this.ensureDefault("button_placeholder",null),this.ensureDefault("button_cursor",SWFUpload.CURSOR.ARROW),this.ensureDefault("button_window_mode",SWFUpload.WINDOW_MODE.WINDOW),this.ensureDefault("debug",!1),this.settings.debug_enabled=this.settings.debug,this.settings.return_upload_start_handler=this.returnUploadStart,this.ensureDefault("swfupload_loaded_handler",null),this.ensureDefault("file_dialog_start_handler",null),this.ensureDefault("file_queued_handler",null),this.ensureDefault("file_queue_error_handler",null),this.ensureDefault("file_dialog_complete_handler",null),this.ensureDefault("upload_start_handler",null),this.ensureDefault("upload_progress_handler",null),this.ensureDefault("upload_error_handler",null),this.ensureDefault("upload_success_handler",null),this.ensureDefault("upload_complete_handler",null),this.ensureDefault("debug_handler",this.debugMessage),this.ensureDefault("custom_settings",{}),this.customSettings=this.settings.custom_settings,this.settings.prevent_swf_caching&&(this.settings.flash_url=this.settings.flash_url+(this.settings.flash_url.indexOf("?")<0?"?":"&")+"preventswfcaching="+(new Date).getTime()),this.settings.preserve_relative_urls||(this.settings.upload_url=SWFUpload.completeURL(this.settings.upload_url),this.settings.button_image_url=SWFUpload.completeURL(this.settings.button_image_url)),delete this.ensureDefault},SWFUpload.prototype.loadFlash=function(){var e,t;if(null!==document.getElementById(this.movieName))throw"ID "+this.movieName+" is already in use. The Flash Object could not be added";if((e=document.getElementById(this.settings.button_placeholder_id)||this.settings.button_placeholder)==undefined)throw"Could not find the placeholder element: "+this.settings.button_placeholder_id;(t=document.createElement("div")).innerHTML=this.getFlashHTML(),e.parentNode.replaceChild(t.firstChild,e),window[this.movieName]==undefined&&(window[this.movieName]=this.getMovieElement())},SWFUpload.prototype.getFlashHTML=function(){return['<object id="',this.movieName,'" type="application/x-shockwave-flash" data="',this.settings.flash_url,'" width="',this.settings.button_width,'" height="',this.settings.button_height,'" class="swfupload">','<param name="wmode" value="',this.settings.button_window_mode,'" />','<param name="movie" value="',this.settings.flash_url,'" />','<param name="quality" value="high" />','<param name="menu" value="false" />','<param name="allowScriptAccess" value="always" />','<param name="flashvars" value="'+this.getFlashVars()+'" />',"</object>"].join("")},SWFUpload.prototype.getFlashVars=function(){var e=this.buildParamString(),t=this.settings.http_success.join(",");return["movieName=",encodeURIComponent(this.movieName),"&amp;uploadURL=",encodeURIComponent(this.settings.upload_url),"&amp;useQueryString=",encodeURIComponent(this.settings.use_query_string),"&amp;requeueOnError=",encodeURIComponent(this.settings.requeue_on_error),"&amp;httpSuccess=",encodeURIComponent(t),"&amp;assumeSuccessTimeout=",encodeURIComponent(this.settings.assume_success_timeout),"&amp;params=",encodeURIComponent(e),"&amp;filePostName=",encodeURIComponent(this.settings.file_post_name),"&amp;fileTypes=",encodeURIComponent(this.settings.file_types),"&amp;fileTypesDescription=",encodeURIComponent(this.settings.file_types_description),"&amp;fileSizeLimit=",encodeURIComponent(this.settings.file_size_limit),"&amp;fileUploadLimit=",encodeURIComponent(this.settings.file_upload_limit),"&amp;fileQueueLimit=",encodeURIComponent(this.settings.file_queue_limit),"&amp;debugEnabled=",encodeURIComponent(this.settings.debug_enabled),"&amp;buttonImageURL=",encodeURIComponent(this.settings.button_image_url),"&amp;buttonWidth=",encodeURIComponent(this.settings.button_width),"&amp;buttonHeight=",encodeURIComponent(this.settings.button_height),"&amp;buttonText=",encodeURIComponent(this.settings.button_text),"&amp;buttonTextTopPadding=",encodeURIComponent(this.settings.button_text_top_padding),"&amp;buttonTextLeftPadding=",encodeURIComponent(this.settings.button_text_left_padding),"&amp;buttonTextStyle=",encodeURIComponent(this.settings.button_text_style),"&amp;buttonAction=",encodeURIComponent(this.settings.button_action),"&amp;buttonDisabled=",encodeURIComponent(this.settings.button_disabled),"&amp;buttonCursor=",encodeURIComponent(this.settings.button_cursor)].join("")},SWFUpload.prototype.getMovieElement=function(){if(this.movieElement==undefined&&(this.movieElement=document.getElementById(this.movieName)),null===this.movieElement)throw"Could not find Flash element";return this.movieElement},SWFUpload.prototype.buildParamString=function(){var e=this.settings.post_params,t=[];if("object"==typeof e)for(var i in e)e.hasOwnProperty(i)&&t.push(encodeURIComponent(i.toString())+"="+encodeURIComponent(e[i].toString()));return t.join("&amp;")},SWFUpload.prototype.destroy=function(){try{this.cancelUpload(null,!1);var e=null;if((e=this.getMovieElement())&&"unknown"==typeof e.CallFunction){for(var t in e)try{"function"==typeof e[t]&&(e[t]=null)}catch(i){}try{e.parentNode.removeChild(e)}catch(a){}}return window[this.movieName]=null,SWFUpload.instances[this.movieName]=null,delete SWFUpload.instances[this.movieName],this.movieElement=null,this.settings=null,this.customSettings=null,this.eventQueue=null,!(this.movieName=null)}catch(n){return!1}},SWFUpload.prototype.displayDebugInfo=function(){this.debug(["---SWFUpload Instance Info---\n","Version: ",SWFUpload.version,"\n","Movie Name: ",this.movieName,"\n","Settings:\n","\t","upload_url:               ",this.settings.upload_url,"\n","\t","flash_url:                ",this.settings.flash_url,"\n","\t","use_query_string:         ",this.settings.use_query_string.toString(),"\n","\t","requeue_on_error:         ",this.settings.requeue_on_error.toString(),"\n","\t","http_success:             ",this.settings.http_success.join(", "),"\n","\t","assume_success_timeout:   ",this.settings.assume_success_timeout,"\n","\t","file_post_name:           ",this.settings.file_post_name,"\n","\t","post_params:              ",this.settings.post_params.toString(),"\n","\t","file_types:               ",this.settings.file_types,"\n","\t","file_types_description:   ",this.settings.file_types_description,"\n","\t","file_size_limit:          ",this.settings.file_size_limit,"\n","\t","file_upload_limit:        ",this.settings.file_upload_limit,"\n","\t","file_queue_limit:         ",this.settings.file_queue_limit,"\n","\t","debug:                    ",this.settings.debug.toString(),"\n","\t","prevent_swf_caching:      ",this.settings.prevent_swf_caching.toString(),"\n","\t","button_placeholder_id:    ",this.settings.button_placeholder_id.toString(),"\n","\t","button_placeholder:       ",this.settings.button_placeholder?"Set":"Not Set","\n","\t","button_image_url:         ",this.settings.button_image_url.toString(),"\n","\t","button_width:             ",this.settings.button_width.toString(),"\n","\t","button_height:            ",this.settings.button_height.toString(),"\n","\t","button_text:              ",this.settings.button_text.toString(),"\n","\t","button_text_style:        ",this.settings.button_text_style.toString(),"\n","\t","button_text_top_padding:  ",this.settings.button_text_top_padding.toString(),"\n","\t","button_text_left_padding: ",this.settings.button_text_left_padding.toString(),"\n","\t","button_action:            ",this.settings.button_action.toString(),"\n","\t","button_disabled:          ",this.settings.button_disabled.toString(),"\n","\t","custom_settings:          ",this.settings.custom_settings.toString(),"\n","Event Handlers:\n","\t","swfupload_loaded_handler assigned:  ",("function"==typeof this.settings.swfupload_loaded_handler).toString(),"\n","\t","file_dialog_start_handler assigned: ",("function"==typeof this.settings.file_dialog_start_handler).toString(),"\n","\t","file_queued_handler assigned:       ",("function"==typeof this.settings.file_queued_handler).toString(),"\n","\t","file_queue_error_handler assigned:  ",("function"==typeof this.settings.file_queue_error_handler).toString(),"\n","\t","upload_start_handler assigned:      ",("function"==typeof this.settings.upload_start_handler).toString(),"\n","\t","upload_progress_handler assigned:   ",("function"==typeof this.settings.upload_progress_handler).toString(),"\n","\t","upload_error_handler assigned:      ",("function"==typeof this.settings.upload_error_handler).toString(),"\n","\t","upload_success_handler assigned:    ",("function"==typeof this.settings.upload_success_handler).toString(),"\n","\t","upload_complete_handler assigned:   ",("function"==typeof this.settings.upload_complete_handler).toString(),"\n","\t","debug_handler assigned:             ",("function"==typeof this.settings.debug_handler).toString(),"\n"].join(""))},SWFUpload.prototype.addSetting=function(e,t,i){return t==undefined?this.settings[e]=i:this.settings[e]=t},SWFUpload.prototype.getSetting=function(e){return this.settings[e]!=undefined?this.settings[e]:""},SWFUpload.prototype.callFlash=function(functionName,argumentArray){argumentArray=argumentArray||[];var movieElement=this.getMovieElement(),returnValue,returnString;try{returnString=movieElement.CallFunction('<invoke name="'+functionName+'" returntype="javascript">'+__flash__argumentsToXML(argumentArray,0)+"</invoke>"),returnValue=eval(returnString)}catch(ex){throw"Call to "+functionName+" failed"}return returnValue!=undefined&&"object"==typeof returnValue.post&&(returnValue=this.unescapeFilePostParams(returnValue)),returnValue},SWFUpload.prototype.selectFile=function(){this.callFlash("SelectFile")},SWFUpload.prototype.selectFiles=function(){this.callFlash("SelectFiles")},SWFUpload.prototype.startUpload=function(e){this.callFlash("StartUpload",[e])},SWFUpload.prototype.cancelUpload=function(e,t){!1!==t&&(t=!0),this.callFlash("CancelUpload",[e,t])},SWFUpload.prototype.stopUpload=function(){this.callFlash("StopUpload")},SWFUpload.prototype.getStats=function(){return this.callFlash("GetStats")},SWFUpload.prototype.setStats=function(e){this.callFlash("SetStats",[e])},SWFUpload.prototype.getFile=function(e){return"number"==typeof e?this.callFlash("GetFileByIndex",[e]):this.callFlash("GetFile",[e])},SWFUpload.prototype.addFileParam=function(e,t,i){return this.callFlash("AddFileParam",[e,t,i])},SWFUpload.prototype.removeFileParam=function(e,t){this.callFlash("RemoveFileParam",[e,t])},SWFUpload.prototype.setUploadURL=function(e){this.settings.upload_url=e.toString(),this.callFlash("SetUploadURL",[e])},SWFUpload.prototype.setPostParams=function(e){this.settings.post_params=e,this.callFlash("SetPostParams",[e])},SWFUpload.prototype.addPostParam=function(e,t){this.settings.post_params[e]=t,this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.removePostParam=function(e){delete this.settings.post_params[e],this.callFlash("SetPostParams",[this.settings.post_params])},SWFUpload.prototype.setFileTypes=function(e,t){this.settings.file_types=e,this.settings.file_types_description=t,this.callFlash("SetFileTypes",[e,t])},SWFUpload.prototype.setFileSizeLimit=function(e){this.settings.file_size_limit=e,this.callFlash("SetFileSizeLimit",[e])},SWFUpload.prototype.setFileUploadLimit=function(e){this.settings.file_upload_limit=e,this.callFlash("SetFileUploadLimit",[e])},SWFUpload.prototype.setFileQueueLimit=function(e){this.settings.file_queue_limit=e,this.callFlash("SetFileQueueLimit",[e])},SWFUpload.prototype.setFilePostName=function(e){this.settings.file_post_name=e,this.callFlash("SetFilePostName",[e])},SWFUpload.prototype.setUseQueryString=function(e){this.settings.use_query_string=e,this.callFlash("SetUseQueryString",[e])},SWFUpload.prototype.setRequeueOnError=function(e){this.settings.requeue_on_error=e,this.callFlash("SetRequeueOnError",[e])},SWFUpload.prototype.setHTTPSuccess=function(e){"string"==typeof e&&(e=e.replace(" ","").split(",")),this.settings.http_success=e,this.callFlash("SetHTTPSuccess",[e])},SWFUpload.prototype.setAssumeSuccessTimeout=function(e){this.settings.assume_success_timeout=e,this.callFlash("SetAssumeSuccessTimeout",[e])},SWFUpload.prototype.setDebugEnabled=function(e){this.settings.debug_enabled=e,this.callFlash("SetDebugEnabled",[e])},SWFUpload.prototype.setButtonImageURL=function(e){e==undefined&&(e=""),this.settings.button_image_url=e,this.callFlash("SetButtonImageURL",[e])},SWFUpload.prototype.setButtonDimensions=function(e,t){this.settings.button_width=e,this.settings.button_height=t;var i=this.getMovieElement();i!=undefined&&(i.style.width=e+"px",i.style.height=t+"px"),this.callFlash("SetButtonDimensions",[e,t])},SWFUpload.prototype.setButtonText=function(e){this.settings.button_text=e,this.callFlash("SetButtonText",[e])},SWFUpload.prototype.setButtonTextPadding=function(e,t){this.settings.button_text_top_padding=t,this.settings.button_text_left_padding=e,this.callFlash("SetButtonTextPadding",[e,t])},SWFUpload.prototype.setButtonTextStyle=function(e){this.settings.button_text_style=e,this.callFlash("SetButtonTextStyle",[e])},SWFUpload.prototype.setButtonDisabled=function(e){this.settings.button_disabled=e,this.callFlash("SetButtonDisabled",[e])},SWFUpload.prototype.setButtonAction=function(e){this.settings.button_action=e,this.callFlash("SetButtonAction",[e])},SWFUpload.prototype.setButtonCursor=function(e){this.settings.button_cursor=e,this.callFlash("SetButtonCursor",[e])},SWFUpload.prototype.queueEvent=function(e,t){t==undefined?t=[]:t instanceof Array||(t=[t]);var i=this;if("function"==typeof this.settings[e])this.eventQueue.push(function(){this.settings[e].apply(this,t)}),setTimeout(function(){i.executeNextEvent()},0);else if(null!==this.settings[e])throw"Event handler "+e+" is unknown or is not a function"},SWFUpload.prototype.executeNextEvent=function(){var e=this.eventQueue?this.eventQueue.shift():null;"function"==typeof e&&e.apply(this)},SWFUpload.prototype.unescapeFilePostParams=function(e){var t,i=/[$]([0-9a-f]{4})/i,a={};if(e!=undefined){for(var n in e.post)if(e.post.hasOwnProperty(n)){var s;for(t=n;null!==(s=i.exec(t));)t=t.replace(s[0],String.fromCharCode(parseInt("0x"+s[1],16)));a[t]=e.post[n]}e.post=a}return e},SWFUpload.prototype.testExternalInterface=function(){try{return this.callFlash("TestExternalInterface")}catch(e){return!1}},SWFUpload.prototype.flashReady=function(){var e=this.getMovieElement();e?(this.cleanUp(e),this.queueEvent("swfupload_loaded_handler")):this.debug("Flash called back ready but the flash movie can't be found.")},SWFUpload.prototype.cleanUp=function(e){try{if(this.movieElement&&"unknown"==typeof e.CallFunction)for(var t in this.debug("Removing Flash functions hooks (this should only run in IE and should prevent memory leaks)"),e)try{"function"==typeof e[t]&&(e[t]=null)}catch(i){}}catch(a){}window.__flash__removeCallback=function(e,t){try{e&&(e[t]=null)}catch(i){}}},SWFUpload.prototype.fileDialogStart=function(){this.queueEvent("file_dialog_start_handler")},SWFUpload.prototype.fileQueued=function(e){e=this.unescapeFilePostParams(e),this.queueEvent("file_queued_handler",e)},SWFUpload.prototype.fileQueueError=function(e,t,i){e=this.unescapeFilePostParams(e),this.queueEvent("file_queue_error_handler",[e,t,i])},SWFUpload.prototype.fileDialogComplete=function(e,t,i){this.queueEvent("file_dialog_complete_handler",[e,t,i])},SWFUpload.prototype.uploadStart=function(e){e=this.unescapeFilePostParams(e),this.queueEvent("return_upload_start_handler",e)},SWFUpload.prototype.returnUploadStart=function(e){var t;if("function"==typeof this.settings.upload_start_handler)e=this.unescapeFilePostParams(e),t=this.settings.upload_start_handler.call(this,e);else if(this.settings.upload_start_handler!=undefined)throw"upload_start_handler must be a function";t===undefined&&(t=!0),t=!!t,this.callFlash("ReturnUploadStart",[t])},SWFUpload.prototype.uploadProgress=function(e,t,i){e=this.unescapeFilePostParams(e),this.queueEvent("upload_progress_handler",[e,t,i])},SWFUpload.prototype.uploadError=function(e,t,i){e=this.unescapeFilePostParams(e),this.queueEvent("upload_error_handler",[e,t,i])},SWFUpload.prototype.uploadSuccess=function(e,t,i){e=this.unescapeFilePostParams(e),this.queueEvent("upload_success_handler",[e,t,i])},SWFUpload.prototype.uploadComplete=function(e){e=this.unescapeFilePostParams(e),this.queueEvent("upload_complete_handler",e)},SWFUpload.prototype.debug=function(e){this.queueEvent("debug_handler",e)},SWFUpload.prototype.debugMessage=function(e){if(this.settings.debug){var t,i=[];if("object"==typeof e&&"string"==typeof e.name&&"string"==typeof e.message){for(var a in e)e.hasOwnProperty(a)&&i.push(a+": "+e[a]);t="EXCEPTION: "+(i=(t=i.join("\n")||"").split("\n")).join("\nEXCEPTION: "),SWFUpload.Console.writeLine(t)}else SWFUpload.Console.writeLine(e)}},SWFUpload.Console={},SWFUpload.Console.writeLine=function(e){var t,i;try{(t=document.getElementById("SWFUpload_Console"))||(i=document.createElement("form"),document.getElementsByTagName("body")[0].appendChild(i),(t=document.createElement("textarea")).id="SWFUpload_Console",t.style.fontFamily="monospace",t.setAttribute("wrap","off"),t.wrap="off",t.style.overflow="auto",t.style.width="700px",t.style.height="350px",t.style.margin="5px",i.appendChild(t)),t.value+=e+"\n",t.scrollTop=t.scrollHeight-t.clientHeight}catch(a){alert("Exception: "+a.name+" Message: "+a.message)}},function(c){var t={init:function(r,u){return this.each(function(){var e=c(this),t=e.clone(),i=c.extend({id:e.attr("id"),swf:"uploadify.swf",uploader:"uploadify.php",auto:!0,buttonClass:"",buttonCursor:"hand",buttonImage:null,buttonText:"SELECT FILES",checkExisting:!1,debug:!1,fileObjName:"Filedata",fileSizeLimit:0,fileTypeDesc:"All Files",fileTypeExts:"*.*",height:30,method:"post",multi:!0,formData:{},preventCaching:!0,progressData:"percentage",queueID:!1,queueSizeLimit:999,removeCompleted:!0,removeTimeout:3,requeueErrors:!1,successTimeout:30,uploadLimit:0,width:120,overrideEvents:[]},r),a={assume_success_timeout:i.successTimeout,button_placeholder_id:i.id,button_width:i.width,button_height:i.height,button_text:null,button_text_style:null,button_text_top_padding:0,button_text_left_padding:0,button_action:i.multi?SWFUpload.BUTTON_ACTION.SELECT_FILES:SWFUpload.BUTTON_ACTION.SELECT_FILE,button_disabled:!1,button_cursor:"arrow"==i.buttonCursor?SWFUpload.CURSOR.ARROW:SWFUpload.CURSOR.HAND,button_window_mode:SWFUpload.WINDOW_MODE.TRANSPARENT,debug:i.debug,requeue_on_error:i.requeueErrors,file_post_name:i.fileObjName,file_size_limit:i.fileSizeLimit,file_types:i.fileTypeExts,file_types_description:i.fileTypeDesc,file_queue_limit:i.queueSizeLimit,file_upload_limit:i.uploadLimit,flash_url:i.swf,prevent_swf_caching:i.preventCaching,post_params:i.formData,upload_url:i.uploader,use_query_string:"get"==i.method,file_dialog_complete_handler:d.onDialogClose,file_dialog_start_handler:d.onDialogOpen,file_queued_handler:d.onSelect,file_queue_error_handler:d.onSelectError,swfupload_loaded_handler:i.onSWFReady,upload_complete_handler:d.onUploadComplete,upload_error_handler:d.onUploadError,upload_progress_handler:d.onUploadProgress,upload_start_handler:d.onUploadStart,upload_success_handler:d.onUploadSuccess};if(u&&(a=c.extend(a,u)),a=c.extend(a,i),9<=swfobject.getFlashPlayerVersion().major){window["uploadify_"+i.id]=new SWFUpload(a);var n=window["uploadify_"+i.id];e.data("uploadify",n);var s=c("<div />",{id:i.id,"class":"uploadify",css:{height:i.height+"px",width:i.width+"px"}});c("#"+n.movieName).wrap(s),(s=c("#"+i.id)).data("uploadify",n);var o=c("<div />",{id:i.id+"-button","class":"uploadify-button "+i.buttonClass});if(i.buttonImage&&o.css({"background-image":"url('"+i.buttonImage+"')","text-indent":"-9999px"}),o.html('<span class="uploadify-button-text">'+i.buttonText+"</span>").css({height:i.height+"px","line-height":i.height+"px",width:i.width+"px"}),s.append(o),c("#"+n.movieName).css({position:"absolute","z-index":1}),!i.queueID){var l=c("<div />",{id:i.id+"-queue","class":"uploadify-queue"});s.after(l),n.settings.queueID=i.id+"-queue",n.settings.defaultQueue=!0}n.queueData={files:{},filesSelected:0,filesQueued:0,filesReplaced:0,filesCancelled:0,filesErrored:0,uploadsSuccessful:0,uploadsErrored:0,averageSpeed:0,queueLength:0,queueSize:0,uploadSize:0,queueBytesUploaded:0,uploadQueue:[],errorMsg:"Some files were not added to the queue:"},n.original=t,n.wrapper=s,n.button=o,n.queue=l,i.onInit&&i.onInit.call(e,n)
}else i.onFallback&&i.onFallback.call(e)})},cancel:function(){var l=arguments;this.each(function(){var e=c(this),t=e.data("uploadify"),i=t.settings,a=-1;if(l[0])if("*"==l[0]){var n=t.queueData.queueLength;c("#"+i.queueID).find(".uploadify-queue-item").each(function(){a++,!0===l[1]?t.cancelUpload(c(this).attr("id"),!1):t.cancelUpload(c(this).attr("id")),c(this).find(".data").removeClass("data").html(" - Cancelled"),c(this).find(".uploadify-progress-bar").remove(),c(this).delay(1e3+100*a).fadeOut(500,function(){c(this).remove()})}),t.queueData.queueSize=0,t.queueData.queueLength=0,i.onClearQueue&&i.onClearQueue.call(e,n)}else for(var s=0;s<l.length;s++)t.cancelUpload(l[s]),c("#"+l[s]).find(".data").removeClass("data").html(" - Cancelled"),c("#"+l[s]).find(".uploadify-progress-bar").remove(),c("#"+l[s]).delay(1e3+100*s).fadeOut(500,function(){c(this).remove()});else{var o=c("#"+i.queueID).find(".uploadify-queue-item").get(0);$item=c(o),t.cancelUpload($item.attr("id")),$item.find(".data").removeClass("data").html(" - Cancelled"),$item.find(".uploadify-progress-bar").remove(),$item.delay(1e3).fadeOut(500,function(){c(this).remove()})}})},destroy:function(){this.each(function(){var e=c(this).data("uploadify"),t=e.settings;e.destroy(),t.defaultQueue&&c("#"+t.queueID).remove(),c("#"+t.id).replaceWith(e.original),t.onDestroy&&t.onDestroy.call(this),delete e})},disable:function(i){this.each(function(){var e=c(this).data("uploadify"),t=e.settings;i?(e.button.addClass("disabled"),t.onDisable&&t.onDisable.call(this)):(e.button.removeClass("disabled"),t.onEnable&&t.onEnable.call(this)),e.setButtonDisabled(i)})},settings:function(a,n,s){var o=arguments,l=n;if(this.each(function(){var e=c(this).data("uploadify"),t=e.settings;if("object"==typeof o[0])for(var i in n)setData(i,n[i]);if(1===o.length)l=t[a];else{switch(a){case"uploader":e.setUploadURL(n);break;case"formData":s||(n=c.extend(t.formData,n)),e.setPostParams(t.formData);break;case"method":"get"==n?e.setUseQueryString(!0):e.setUseQueryString(!1);break;case"fileObjName":e.setFilePostName(n);break;case"fileTypeExts":e.setFileTypes(n,t.fileTypeDesc);break;case"fileTypeDesc":e.setFileTypes(t.fileTypeExts,n);break;case"fileSizeLimit":e.setFileSizeLimit(n);break;case"uploadLimit":e.setFileUploadLimit(n);break;case"queueSizeLimit":e.setFileQueueLimit(n);break;case"buttonImage":e.button.css("background-image",settingValue);break;case"buttonCursor":"arrow"==n?e.setButtonCursor(SWFUpload.CURSOR.ARROW):e.setButtonCursor(SWFUpload.CURSOR.HAND);break;case"buttonText":c("#"+t.id+"-button").find(".uploadify-button-text").html(n);break;case"width":e.setButtonDimensions(n,t.height);break;case"height":e.setButtonDimensions(t.width,n);break;case"multi":n?e.setButtonAction(SWFUpload.BUTTON_ACTION.SELECT_FILES):e.setButtonAction(SWFUpload.BUTTON_ACTION.SELECT_FILE)}t[a]=n}}),1===o.length)return l},stop:function(){this.each(function(){var e=c(this).data("uploadify");e.queueData.averageSpeed=0,e.queueData.uploadSize=0,e.queueData.bytesUploaded=0,e.queueData.uploadQueue=[],e.stopUpload()})},upload:function(){var i=arguments;this.each(function(){var e=c(this).data("uploadify");if(e.queueData.averageSpeed=0,e.queueData.uploadSize=0,e.queueData.bytesUploaded=0,e.queueData.uploadQueue=[],i[0])if("*"==i[0])e.queueData.uploadSize=e.queueData.queueSize,e.queueData.uploadQueue.push("*"),e.startUpload();else{for(var t=0;t<i.length;t++)e.queueData.uploadSize+=e.queueData.files[i[t]].size,e.queueData.uploadQueue.push(i[t]);e.startUpload(e.queueData.uploadQueue.shift())}else e.startUpload()})}},d={onDialogOpen:function(){var e=this.settings;this.queueData.errorMsg="Some files were not added to the queue:",this.queueData.filesReplaced=0,this.queueData.filesCancelled=0,e.onDialogOpen&&e.onDialogOpen.call(this)},onDialogClose:function(e,t,i){var a=this.settings;this.queueData.filesErrored=e-t,this.queueData.filesSelected=e,this.queueData.filesQueued=t-this.queueData.filesCancelled,this.queueData.queueLength=i,c.inArray("onDialogClose",a.overrideEvents)<0&&0<this.queueData.filesErrored&&alert(this.queueData.errorMsg),a.onDialogClose&&a.onDialogClose.call(this,this.queueData),a.auto&&c("#"+a.id).uploadify("upload","*")},onSelect:function(e){var t=this.settings,i={};for(var a in this.queueData.files)if(1!=(i=this.queueData.files[a]).uploaded&&i.name==e.name){if(!confirm('The file named "'+e.name+'" is already in the queue.\nDo you want to replace the existing item in the queue?'))return this.cancelUpload(e.id),this.queueData.filesCancelled++,!1;c("#"+i.id).remove(),this.cancelUpload(i.id),this.queueData.filesReplaced++}var n=Math.round(e.size/1024),s="KB";1e3<n&&(n=Math.round(n/1e3),s="MB");var o=n.toString().split(".");n=o[0],1<o.length&&(n+="."+o[1].substr(0,2)),n+=s;var l=e.name;25<l.length&&(l=l.substr(0,25)+"..."),c.inArray("onSelect",t.overrideEvents)<0&&c("#"+t.queueID).append('<div id="'+e.id+'" class="uploadify-queue-item">\t\t\t\t\t<div class="cancel">\t\t\t\t\t\t<a href="javascript:$(\'#'+t.id+"').uploadify('cancel', '"+e.id+'\')">X</a>\t\t\t\t\t</div>\t\t\t\t\t<span class="fileName">'+l+" ("+n+')</span><span class="data"></span>\t\t\t\t\t<div class="uploadify-progress">\t\t\t\t\t\t<div class="uploadify-progress-bar"><!--Progress Bar--></div>\t\t\t\t\t</div>\t\t\t\t</div>'),this.queueData.queueSize+=e.size,this.queueData.files[e.id]=e,t.onSelect&&t.onSelect.apply(this,arguments)},onSelectError:function(e,t,i){var a=this.settings;if(c.inArray("onSelectError",a.overrideEvents)<0)switch(t){case SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED:a.queueSizeLimit>i?this.queueData.errorMsg+="\nThe number of files selected exceeds the remaining upload limit ("+i+").":this.queueData.errorMsg+="\nThe number of files selected exceeds the queue size limit ("+a.queueSizeLimit+").";break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:this.queueData.errorMsg+='\nThe file "'+e.name+'" exceeds the size limit ('+a.fileSizeLimit+").";break;case SWFUpload.QUEUE_ERROR.ZERO_BYTE_FILE:this.queueData.errorMsg+='\nThe file "'+e.name+'" is empty.';break;case SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT:this.queueData.errorMsg+='\nThe file "'+e.name+'" is not an accepted file type ('+a.fileTypeDesc+")."}t!=SWFUpload.QUEUE_ERROR.QUEUE_LIMIT_EXCEEDED&&delete this.queueData.files[e.id],a.onSelectError&&a.onSelectError.apply(this,arguments)},onQueueComplete:function(){this.settings.onQueueComplete&&this.settings.onQueueComplete.call(this,this.settings.queueData)},onUploadComplete:function(e){var t=this.settings,i=this,a=this.getStats();if(this.queueData.queueLength=a.files_queued,"*"==this.queueData.uploadQueue[0]?0<this.queueData.queueLength?this.startUpload():(this.queueData.uploadQueue=[],t.onQueueComplete&&t.onQueueComplete.call(this,this.queueData)):0<this.queueData.uploadQueue.length?this.startUpload(this.queueData.uploadQueue.shift()):(this.queueData.uploadQueue=[],t.onQueueComplete&&t.onQueueComplete.call(this,this.queueData)),c.inArray("onUploadComplete",t.overrideEvents)<0)if(t.removeCompleted)switch(e.filestatus){case SWFUpload.FILE_STATUS.COMPLETE:setTimeout(function(){c("#"+e.id)&&(i.queueData.queueSize-=e.size,i.queueData.queueLength-=1,delete i.queueData.files[e.id],c("#"+e.id).fadeOut(500,function(){c(this).remove()}))},1e3*t.removeTimeout);break;case SWFUpload.FILE_STATUS.ERROR:t.requeueErrors||setTimeout(function(){c("#"+e.id)&&(i.queueData.queueSize-=e.size,i.queueData.queueLength-=1,delete i.queueData.files[e.id],c("#"+e.id).fadeOut(500,function(){c(this).remove()}))},1e3*t.removeTimeout)}else e.uploaded=!0;t.onUploadComplete&&t.onUploadComplete.call(this,e)},onUploadError:function(e,t,i){var a=this.settings,n="Error";switch(t){case SWFUpload.UPLOAD_ERROR.HTTP_ERROR:n="HTTP Error ("+i+")";break;case SWFUpload.UPLOAD_ERROR.MISSING_UPLOAD_URL:n="Missing Upload URL";break;case SWFUpload.UPLOAD_ERROR.IO_ERROR:n="IO Error";break;case SWFUpload.UPLOAD_ERROR.SECURITY_ERROR:n="Security Error";break;case SWFUpload.UPLOAD_ERROR.UPLOAD_LIMIT_EXCEEDED:alert("The upload limit has been reached ("+i+")."),n="Exceeds Upload Limit";break;case SWFUpload.UPLOAD_ERROR.UPLOAD_FAILED:n="Failed";break;case SWFUpload.UPLOAD_ERROR.SPECIFIED_FILE_ID_NOT_FOUND:break;case SWFUpload.UPLOAD_ERROR.FILE_VALIDATION_FAILED:n="Validation Error";break;case SWFUpload.UPLOAD_ERROR.FILE_CANCELLED:n="Cancelled",this.queueData.queueSize-=e.size,this.queueData.queueLength-=1,(e.status==SWFUpload.FILE_STATUS.IN_PROGRESS||0<=c.inArray(e.id,this.queueData.uploadQueue))&&(this.queueData.uploadSize-=e.size),a.onCancel&&a.onCancel.call(this,e),delete this.queueData.files[e.id];break;case SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED:n="Stopped"}c.inArray("onUploadError",a.overrideEvents)<0&&(t!=SWFUpload.UPLOAD_ERROR.FILE_CANCELLED&&t!=SWFUpload.UPLOAD_ERROR.UPLOAD_STOPPED&&c("#"+e.id).addClass("uploadify-error"),c("#"+e.id).find(".uploadify-progress-bar").css("width","1px"),t!=SWFUpload.UPLOAD_ERROR.SPECIFIED_FILE_ID_NOT_FOUND&&e.status!=SWFUpload.FILE_STATUS.COMPLETE&&c("#"+e.id).find(".data").html(" - "+n));var s=this.getStats();this.queueData.uploadsErrored=s.upload_errors,a.onUploadError&&a.onUploadError.call(this,e,t,i,n)},onUploadProgress:function(e,t,i){var a=this.settings,n=(new Date).getTime(),s=n-this.timer;500<s&&(this.timer=n);var o=t-this.bytesLoaded;this.bytesLoaded=t;var l=this.queueData.queueBytesUploaded+t,r=Math.round(t/i*100),u="KB/s",d=0,p=o/1024/(s/1e3);p=Math.floor(10*p)/10,0<this.queueData.averageSpeed?this.queueData.averageSpeed=Math.floor((this.queueData.averageSpeed+p)/2):this.queueData.averageSpeed=Math.floor(p),1e3<p&&(d=.001*p,this.queueData.averageSpeed=Math.floor(d),u="MB/s"),c.inArray("onUploadProgress",a.overrideEvents)<0&&("percentage"==a.progressData?c("#"+e.id).find(".data").html(" - "+r+"%"):"speed"==a.progressData&&500<s&&c("#"+e.id).find(".data").html(" - "+this.queueData.averageSpeed+u),c("#"+e.id).find(".uploadify-progress-bar").css("width",r+"%")),a.onUploadProgress&&a.onUploadProgress.call(this,e,t,i,l,this.queueData.uploadSize)},onUploadStart:function(t){var e=this.settings,i=new Date;this.timer=i.getTime(),(this.bytesLoaded=0)==this.queueData.uploadQueue.length&&(this.queueData.uploadSize=t.size),e.checkExisting&&c.ajax({type:"POST",async:!1,url:e.checkExisting,data:{filename:t.name},success:function(e){1==e&&(confirm('A file with the name "'+t.name+'" already exists on the server.\nWould you like to replace the existing file?')||(this.cancelUpload(t.id),c("#"+t.id).remove(),0<this.queueData.uploadQueue.length&&0<this.queueData.queueLength&&("*"==this.queueData.uploadQueue[0]?this.startUpload():this.startUpload(this.queueData.uploadQueue.shift()))))}}),e.onUploadStart&&e.onUploadStart.call(this,t)},onUploadSuccess:function(e,t,i){var a=this.settings,n=this.getStats();this.queueData.uploadsSuccessful=n.successful_uploads,this.queueData.queueBytesUploaded+=e.size,c.inArray("onUploadSuccess",a.overrideEvents)<0&&c("#"+e.id).find(".data").html(" - Complete"),a.onUploadSuccess&&a.onUploadSuccess.call(this,e,t,i)}};c.fn.uploadify=function(e){return t[e]?t[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void c.error("The method "+e+" does not exist in $.uploadify"):t.init.apply(this,arguments)}}($);var swfobject=function(){function t(){if(!j){try{var e=x.getElementsByTagName("body")[0].appendChild(m("span"));e.parentNode.removeChild(e)}catch(a){return}j=!0;for(var t=k.length,i=0;i<t;i++)k[i]()}}function e(e){j?e():k[k.length]=e}function i(e){if(typeof A.addEventListener!=I)A.addEventListener("load",e,!1);else if(typeof x.addEventListener!=I)x.addEventListener("load",e,!1);else if(typeof A.attachEvent!=I)u(A,"onload",e);else if("function"==typeof A.onload){var t=A.onload;A.onload=function(){t(),e()}}else A.onload=e}function a(){N?n():s()}function n(){var t=x.getElementsByTagName("body")[0],i=m(T);i.setAttribute("type",q);var a=t.appendChild(i);if(a){var n=0;!function(){if(typeof a.GetVariable!=I){var e=a.GetVariable("$version");e&&(e=e.split(" ")[1].split(","),V.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)])}else if(n<10)return n++,setTimeout(arguments.callee,10);t.removeChild(i),a=null,s()}()}else s()}function s(){var e=B.length;if(0<e)for(var t=0;t<e;t++){var i=B[t].id,a=B[t].callbackFn,n={success:!1,id:i};if(0<V.pv[0]){var s=_(i);if(s)if(!b(B[t].swfVersion)||V.wk&&V.wk<312)if(B[t].expressInstall&&g()){var o={};o.data=B[t].expressInstall,o.width=s.getAttribute("width")||"0",o.height=s.getAttribute("height")||"0",s.getAttribute("class")&&(o.styleclass=s.getAttribute("class")),s.getAttribute("align")&&(o.align=s.getAttribute("align"));for(var l={},r=s.getElementsByTagName("param"),u=r.length,d=0;d<u;d++)"movie"!=r[d].getAttribute("name").toLowerCase()&&(l[r[d].getAttribute("name")]=r[d].getAttribute("value"));y(o,l,i,a)}else h(s),a&&a(n);else S(i,!0),a&&(n.success=!0,n.ref=c(i),a(n))}else if(S(i,!0),a){var p=c(i);p&&typeof p.SetVariable!=I&&(n.success=!0,n.ref=p),a(n)}}}function c(e){var t=null,i=_(e);if(i&&"OBJECT"==i.nodeName)if(typeof i.SetVariable!=I)t=i;else{var a=i.getElementsByTagName(T)[0];a&&(t=a)}return t}function g(){return!z&&b("6.0.65")&&(V.win||V.mac)&&!(V.wk&&V.wk<312)}function y(e,t,i,a){F=a||null,w={success:!(z=!0),id:i};var n=_(i);if(n){"OBJECT"==n.nodeName?(E=r(n),U=null):(E=n,U=i),e.id=O,(typeof e.width==I||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==I||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),x.title=x.title.slice(0,47)+" - Flash Player Installation";var s=V.ie&&V.win?"ActiveX":"PlugIn",o="MMredirectURL="+A.location.toString().replace(/&/g,"%26")+"&MMplayerType="+s+"&MMdoctitle="+x.title;if(typeof t.flashvars!=I?t.flashvars+="&"+o:t.flashvars=o,V.ie&&V.win&&4!=n.readyState){var l=m("div");i+="SWFObjectNew",l.setAttribute("id",i),n.parentNode.insertBefore(l,n),n.style.display="none",function(){4==n.readyState?n.parentNode.removeChild(n):setTimeout(arguments.callee,10)}()}v(e,t,i)}}function h(e){if(V.ie&&V.win&&4!=e.readyState){var t=m("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(r(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(r(e),e)}function r(e){var t=m("div");if(V.win&&V.ie)t.innerHTML=e.innerHTML;else{var i=e.getElementsByTagName(T)[0];if(i){var a=i.childNodes;if(a)for(var n=a.length,s=0;s<n;s++)1==a[s].nodeType&&"PARAM"==a[s].nodeName||8==a[s].nodeType||t.appendChild(a[s].cloneNode(!0))}}return t}function v(e,t,i){var a,n=_(i);if(V.wk&&V.wk<312)return a;if(n)if(typeof e.id==I&&(e.id=i),V.ie&&V.win){var s="";for(var o in e)e[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?t.movie=e[o]:"styleclass"==o.toLowerCase()?s+=' class="'+e[o]+'"':"classid"!=o.toLowerCase()&&(s+=" "+o+'="'+e[o]+'"'));var l="";for(var r in t)t[r]!=Object.prototype[r]&&(l+='<param name="'+r+'" value="'+t[r]+'" />');n.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+s+">"+l+"</object>",$[$.length]=e.id,a=_(e.id)}else{var u=m(T);for(var d in u.setAttribute("type",q),e)e[d]!=Object.prototype[d]&&("styleclass"==d.toLowerCase()?u.setAttribute("class",e[d]):"classid"!=d.toLowerCase()&&u.setAttribute(d,e[d]));for(var p in t)t[p]!=Object.prototype[p]&&"movie"!=p.toLowerCase()&&f(u,p,t[p]);n.parentNode.replaceChild(u,n),a=u}return a}function f(e,t,i){var a=m("param");a.setAttribute("name",t),a.setAttribute("value",i),e.appendChild(a)}function o(e){var t=_(e);t&&"OBJECT"==t.nodeName&&(V.ie&&V.win?(t.style.display="none",function(){4==t.readyState?l(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function l(e){var t=_(e);if(t){for(var i in t)"function"==typeof t[i]&&(t[i]=null);t.parentNode.removeChild(t)}}function _(e){var t=null;try{t=x.getElementById(e)}catch(i){}return t}function m(e){return x.createElement(e)}function u(e,t,i){e.attachEvent(t,i),M[M.length]=[e,t,i]}function b(e){var t=V.pv,i=e.split(".");return i[0]=parseInt(i[0],10),i[1]=parseInt(i[1],10)||0,i[2]=parseInt(i[2],10)||0,t[0]>i[0]||t[0]==i[0]&&t[1]>i[1]||t[0]==i[0]&&t[1]==i[1]&&t[2]>=i[2]}function d(e,t,i,a){if(!V.ie||!V.mac){var n=x.getElementsByTagName("head")[0];if(n){var s=i&&"string"==typeof i?i:"screen";if(a&&(D=C=null),!C||D!=s){var o=m("style");o.setAttribute("type","text/css"),o.setAttribute("media",s),C=n.appendChild(o),V.ie&&V.win&&typeof x.styleSheets!=I&&0<x.styleSheets.length&&(C=x.styleSheets[x.styleSheets.length-1]),D=s}V.ie&&V.win?C&&typeof C.addRule==T&&C.addRule(e,t):C&&typeof x.createTextNode!=I&&C.appendChild(x.createTextNode(e+" {"+t+"}"))}}}function S(e,t){if(Q){var i=t?"visible":"hidden";j&&_(e)?_(e).style.visibility=i:d("#"+e,"visibility:"+i)}}function p(e){return null!=/[\\\"<>\.;]/.exec(e)&&typeof encodeURIComponent!=I?encodeURIComponent(e):e}var E,U,F,w,C,D,I="undefined",T="object",L="Shockwave Flash",R="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",O="SWFObjectExprInst",W="onreadystatechange",A=window,x=document,P=navigator,N=!1,k=[a],B=[],$=[],M=[],j=!1,z=!1,Q=!0,V=function(){var e=typeof x.getElementById!=I&&typeof x.getElementsByTagName!=I&&typeof x.createElement!=I,t=P.userAgent.toLowerCase(),i=P.platform.toLowerCase(),a=i?/win/.test(i):/win/.test(t),n=i?/mac/.test(i):/mac/.test(t),s=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),o=!1,l=[0,0,0],r=null;if(typeof P.plugins!=I&&typeof P.plugins[L]==T)!(r=P.plugins[L].description)||typeof P.mimeTypes!=I&&P.mimeTypes[q]&&!P.mimeTypes[q].enabledPlugin||(o=!(N=!0),r=r.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),l[0]=parseInt(r.replace(/^(.*)\..*$/,"$1"),10),l[1]=parseInt(r.replace(/^.*\.(.*)\s.*$/,"$1"),10),l[2]=/[a-zA-Z]/.test(r)?parseInt(r.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof A.ActiveXObject!=I)try{var u=new ActiveXObject(R);u&&(r=u.GetVariable("$version"))&&(o=!0,r=r.split(" ")[1].split(","),l=[parseInt(r[0],10),parseInt(r[1],10),parseInt(r[2],10)])}catch(d){}return{w3:e,pv:l,wk:s,ie:o,win:a,mac:n}}();V.w3&&((typeof x.readyState!=I&&"complete"==x.readyState||typeof x.readyState==I&&(x.getElementsByTagName("body")[0]||x.body))&&t(),j||(typeof x.addEventListener!=I&&x.addEventListener("DOMContentLoaded",t,!1),V.ie&&V.win&&(x.attachEvent(W,function(){"complete"==x.readyState&&(x.detachEvent(W,arguments.callee),t())}),A==top&&function(){if(!j){try{x.documentElement.doScroll("left")}catch(e){return setTimeout(arguments.callee,0)}t()}}()),V.wk&&function(){j||(/loaded|complete/.test(x.readyState)?t():setTimeout(arguments.callee,0))}(),i(t))),V.ie&&V.win&&window.attachEvent("onunload",function(){for(var e=M.length,t=0;t<e;t++)M[t][0].detachEvent(M[t][1],M[t][2]);for(var i=$.length,a=0;a<i;a++)o($[a]);for(var n in V)V[n]=null;for(var s in V=null,swfobject)swfobject[s]=null;swfobject=null});return{registerObject:function(e,t,i,a){if(V.w3&&e&&t){var n={};n.id=e,n.swfVersion=t,n.expressInstall=i,n.callbackFn=a,B[B.length]=n,S(e,!1)}else a&&a({success:!1,id:e})},getObjectById:function(e){if(V.w3)return c(e)},embedSWF:function(o,l,r,u,d,p,c,h,f,_){var m={success:!1,id:l};V.w3&&!(V.wk&&V.wk<312)&&o&&l&&r&&u&&d?(S(l,!1),e(function(){r+="",u+="";var e={};if(f&&typeof f===T)for(var t in f)e[t]=f[t];e.data=o,e.width=r,e.height=u;var i={};if(h&&typeof h===T)for(var a in h)i[a]=h[a];if(c&&typeof c===T)for(var n in c)typeof i.flashvars!=I?i.flashvars+="&"+n+"="+c[n]:i.flashvars=n+"="+c[n];if(b(d)){var s=v(e,i,l);e.id==l&&S(l,!0),m.success=!0,m.ref=s}else{if(p&&g())return e.data=p,void y(e,i,l,_);S(l,!0)}_&&_(m)})):_&&_(m)},switchOffAutoHideShow:function(){Q=!1},ua:V,getFlashPlayerVersion:function(){return{major:V.pv[0],minor:V.pv[1],release:V.pv[2]}},hasFlashPlayerVersion:b,createSWF:function(e,t,i){return V.w3?v(e,t,i):undefined},showExpressInstall:function(e,t,i,a){V.w3&&g()&&y(e,t,i,a)},removeSWF:function(e){V.w3&&o(e)},createCSS:function(e,t,i,a){V.w3&&d(e,t,i,a)},addDomLoadEvent:e,addLoadEvent:i,getQueryParamValue:function(e){var t=x.location.search||x.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return p(t);for(var i=t.split("&"),a=0;a<i.length;a++)if(i[a].substring(0,i[a].indexOf("="))==e)return p(i[a].substring(i[a].indexOf("=")+1))}return""},expressInstallCallback:function(){if(z){var e=_(O);e&&E&&(e.parentNode.replaceChild(E,e),U&&(S(U,!0),V.ie&&V.win&&(E.style.display="block")),F&&F(w)),z=!1}}}}();pe.forms=pe.forms||{},pe.forms.Uploadify=function(e,t,i){pe.init_widget(this,e),this.callbacks=i,this.url=t,this.files=[],this.fileinput=this.container.find(".Finput"),this.fileinput.change(this.callback(function(e){this.prepare_files_for_download(e.currentTarget.files)})),this.file_dialog_trigger=this.container.find(".FileTrigger"),this.fileinput.hide(),this.file_dialog_trigger.click(this.callback(function(){this.file_dialog_trigger.hasClass("disabled")||(this.fileinput.val(""),this.fileinput.trigger("click"))})),0===this.container.find(".Empty").length&&this.file_dialog_trigger.addClass("disabled").attr("disabled","disabled"),this.upload_button=this.container.find(".UploaderButton"),this.upload_button.click(this.callback(function(){this.upload_button.hasClass("disabled")||this.on_upload()})),this.container.find(".DeleteButton").live("click",this.callback(function(e){this.delete_button_clicked(e.currentTarget)}))},pe.forms.Uploadify.prototype.delete_button_clicked=function(t){new pe.ConfirmationDialog("Are you sure you want to delete this photo from your application?",this.callback(function(){$(t).parent(".ThumbCell").addClass("Deleting deleting");var e=$(t).data("delete-url");e?$.ajax({url:e,type:"post",dataType:"script",data:{_method:"delete"},complete:this.callback(function(){this.delete_photo_success(t)})}):this.delete_photo_success(t)}))},pe.forms.Uploadify.prototype.delete_photo_success=function(e){var t=$(e).parent(".ThumbCell"),i=t.parents("ul:first"),a=t.data("findex");null!==a&&a!==undefined&&(this.files[a]=null,t.data("findex",null)),t.find(".Img").css("background-image","").hide(),t.find(".FileName").html(""),t.find(".FileSize").html(""),t.removeClass("deleting Deleting Uploading uploading Completed completed").addClass("empty Empty"),$(e).data("delete-url",null),_.each(i.find(".ThumbCell.Empty"),function(e){i.append($(e))},this);var n=1;_.each(this.container.find(".ThumbCell"),function(e){$(e).find(".ThumbNumber").html(n),n+=1},this),this.on_change(),11<i.find(".ThumbCell.Empty").length&&this.on_empty(),this.file_dialog_trigger.removeClass("disabled").removeAttr("disabled"),_.isEmpty(_.compact(this.files))&&this.upload_button.addClass("disabled Disabled").attr("disabled","disabled")},pe.forms.Uploadify.prototype.on_change=function(){this.callbacks.change&&this.callbacks.change()},pe.forms.Uploadify.prototype.on_empty=function(){this.callbacks.empty&&this.callbacks.empty()},pe.forms.Uploadify.prototype.on_fill=function(){this.callbacks.fill&&this.callbacks.fill()},pe.forms.Uploadify.prototype.on_upload=function(){this.upload_button.addClass("disabled").attr("disabled","disabled"),this.container.find(".Current").removeClass("Current current"),this.container.find(".Uploading:first").addClass("Current current");var e=_.compact(this.files)[0];e?(this.file_dialog_trigger.addClass("disabled").attr("disabled","disabled"),this.upload_file(e)):(this.callbacks.done&&this.callbacks.done(),0===this.container.find(".Empty").length?this.file_dialog_trigger.addClass("disabled").attr("disabled","disabled"):this.file_dialog_trigger.removeClass("disabled").removeAttr("disabled"),this.container.find(".progress_bar").css("width","0"))},pe.forms.Uploadify.prototype.prepare_file_for_download=function(n){if(0===this.container.find(".Empty").length)return!0;if(!n.type.match(/image.*/))return alert('The file "'+n.name+'" is not an image.'),!0;if(5e6<n.size)return alert('The file "'+n.name+'" exceed 5Mb limit.'),!0;var e=new FileReader;return e.onload=this.callback(function(e){var t=this.container.find(".ThumbCell.Empty:first");if(0<t.length){var i=t.find(".Img");i.css("background-image","url('"+e.target.result+"')"),i.show(),t.removeClass("Empty empty").addClass("Uploading uploading"),t.find(".DeleteButton").show();var a=n.name;17<a.length&&(a=a.substring(0,14)+"..."),t.find(".FileName").html(a),t.find(".FileSize").html(parseInt(n.size/1e3,0)+"KB"),t.data("findex",this.files.length),this.files.push(n),this.upload_button.removeClass("disabled").removeAttr("disabled")}0===this.container.find(".Empty").length&&this.file_dialog_trigger.addClass("disabled").attr("disabled","disabled")}),e.readAsDataURL(n),!1},pe.forms.Uploadify.prototype.prepare_files_for_download=function(e){_.each(e,this.callback(function(e){this.prepare_file_for_download(e)}))},pe.forms.Uploadify.prototype.upload_file=function(i){var e=new FileReader,a=this;e.onload=this.callback(function(){var e=new XMLHttpRequest;e.upload.addEventListener("progress",function(e){if(e.lengthComputable){var t=parseInt(100*e.loaded/e.total,0);a.container.find(".Uploading:first .progress_bar").animate({width:t})}},!1),e.onreadystatechange=function(){if(4==this.readyState){var e=a.container.find(".Uploading:first");if(0<e.length){e.find(".progress_bar").css("width",0);var t=e.data("findex");e.addClass("Completed completed").removeClass("Uploading uploading"),a.files[t]=null,a.on_fill(),a.on_change(),a.on_upload(),200==this.status?e.find(".DeleteButton").data("delete-url",this.responseText):console.log("error")}}},e.open("POST",this.url);var t=new FormData;t.append("Filedata",i),e.send(t)}),e.readAsBinaryString(i)},pe.modern_user=function(){return window.FormData&&window.FileReader&&!jQuery.browser.msie},$(document).ready(function(){pe.modern_user()&&($(".TrueWay").removeClass("hidden"),$(".WrongWay").remove(),pe.uploader=new pe.forms.Uploadify($(".TrueWay"),"/photographer_application/second_step/create_photo_new",{fill:pe.enable_next_step_button,empty:pe.disable_next_step_button,change:pe.enable_save_step_button}),pe.next_step_button=$(".SubmitButton"),pe.next_step_button.removeAttr("disabled"),pe.next_step_button.click(pe.next_step_button_clicked),pe.save_step_button=$(".SaveButton"),pe.init_page_framework())}),pe.enable_next_step_button=function(){pe.next_step_button.removeClass("disabled").removeAttr("disabled"),$(".UploadError").hide().addClass("hidden")},pe.disable_next_step_button=function(){pe.next_step_button.addClass("disabled")},pe.enable_save_step_button=function(){pe.save_step_button.removeClass("disabled").removeAttr("disabled")},pe.next_step_button_clicked=function(e){if(pe.next_step_button.hasClass("disabled")&&($(".UploadError").show().removeClass("hidden"),e))return e.stopImmediatePropagation(),e.stopPropagation(),e.preventDefault(),!1},$(document).ready(function(){if(!pe.modern_user()){$(".WrongWay").removeClass("hidden"),$(".TrueWay").remove(),jQuery.browser.msie||alert("We don't support the current version of your browser and you may not be able to upload photos in Step 2 of the application. If you experience any issues we recommend upgrading your browser to the latest version or using a different browser to complete the application."),pe.browse_button_height=30,pe.next_step_button=$(".SubmitButton"),pe.save_step_button=$(".SaveButton");var e=window.uploadify_options;e.onClearQueue=pe.update_upload_button,e.onDialogOpen=pe.uploadify_opened,e.onFallback=function(){alert("Flash was not detected.")},e.onQueueComplete=pe.all_uploads_completed,e.onSelectError=pe.error_happened,e.onSelect=pe.file_selected,e.onUploadProgress=pe.show_upload_progress,e.onUploadSuccess=pe.upload_success,pe.file_input=$("#FileInput"),pe.file_input.uploadify(e),pe.update_next_step_button(),pe.upload_button=$(".UploadButton"),pe.update_upload_button(),$(".Delete").live("click",function(){pe.delete_photo_button_clicked(this)}),pe.init_page_framework(),pe.next_step_button.click(pe.next_step_validation)}}),$(window).load(function(){0===$(".PhotoCell.Empty").length&&($("#FileInput object").load(function(){$(this).uploadify("settings","height",0)}),$("#FileInputUploader").addClass("disabled"))}),pe.next_step_validation=function(e){if(!$(".Photo").length&&($(".PhotoCell span").addClass("cell_error"),$("#photo_app_upload p.upload_error").length||$("#photo_app_upload p").append('<p class="upload_error">Please upload at least one photo.</p>'),e))return e.stopImmediatePropagation(),!1},pe.all_uploads_completed=function(){pe.file_input.uploadify("settings","queueSizeLimit",window.queueSizeLimit-$(".Photo").length),pe.update_next_step_button(),pe.update_upload_button()},pe.cell_html=function(){return'<div class="PhotoCell Empty photo_item"><span class="CellNumber photo_number"></span></div>'},pe.delete_photo_button_clicked=function(e){new pe.ConfirmationDialog("Are you sure you want to delete this photo from your application?",function(){$(e).hasClass("Deleting")||($(e).addClass("Deleting"),$.ajax({url:$(e).attr("data-delete-url"),type:"post",dataType:"script",data:{_method:"delete"},complete:function(){pe.delete_photo_success(e)}}))})},pe.delete_photo_success=function(e){$(".Photo:last").after(pe.cell_html()),$(e).closest(".Photo").remove(),pe.enumerate_cells(),pe.file_input.uploadify("settings","queueSizeLimit",window.queueSizeLimit-$(".Photo").length),pe.update_browse_button(),pe.update_next_step_button(),pe.update_upload_button(),pe.save_step_button.removeClass("disabled").removeAttr("disabled","disabled")},pe.enumerate_cells=function(){var e=$(".PhotoCell .CellNumber"),t=12-e.length;e.each(function(e){$(this).html(t+e+1)})},pe.error_happened=function(e,t){if(t===SWFUpload.QUEUE_ERROR.FILE_EXCEEDS_SIZE_LIMIT)return pe.upload_cancelled(e.id),!1},pe.file_selected=function(e){var t=$(".PhotoCell.Empty:first"),i=pe.format_file_size(e.size),a=pe.photo_html(e.name,i);t.removeClass("Empty").addClass(e.id+" Processing"),t.append(a),t.find(".CancelUpload").click(pe.bind(pe.upload_cancelled,e.id)),pe.update_browse_button(),pe.update_upload_button()},pe.format_file_size=function(e){return 1048576<e?(e/1048576).toFixed(2)+" MB":(e/1024).toFixed(2)+" KB"},pe.photo_html=function(e,t){return'<span class="file_name">'+e+'</span><span class="file_size">('+t+')</span><div class="progress"><div class="Completed progress_bar"></div></div><div class="CancelUpload delete_icon"></div><div class="ui-overlay" style="display: none;"><div class="loading_notice">Please wait.</div><div class="ui-widget-overlay"></div></div><div class="RollingImage loading_image" style="display: none;"></div>'},pe.show_upload_progress=function(e,t,i){var a=$("."+e.id),n=Math.round(t/i*100);a.find(".ui-overlay:hidden").show(),a.find(".RollingImage:visible").hide(),a.find(".Completed").css("width",n+"%")},pe.update_browse_button=function(){0===$(".PhotoCell.Empty").length?(pe.file_input.uploadify("settings","height",0),$("#FileInputUploader").addClass("disabled")):(pe.file_input.uploadify("settings","height",pe.browse_button_height),$("#FileInputUploader").removeClass("disabled"))},pe.update_next_step_button=function(){0===$(".Photo").length?pe.next_step_button.addClass("disabled"):pe.next_step_button.removeClass("disabled").removeAttr("disabled","disabled")},pe.update_upload_button=function(){pe.upload_button.unbind("click"),0===$(".Processing").length?pe.upload_button.addClass("disabled"):(pe.upload_button.click(function(){pe.file_input.uploadify("upload","*")}),pe.upload_button.removeClass("disabled"))},pe.upload_cancelled=function(e){$("."+e);pe.file_input.uploadify("cancel",e),pe.enumerate_cells(),pe.update_browse_button(),pe.update_upload_button()},pe.upload_success=function(e,t){var i=$("."+e.id);i.after(t),i.next().addClass(e.id),i.remove(),pe.update_upload_button(),pe.save_step_button.removeClass("disabled").removeAttr("disabled","disabled"),$(".upload_error").remove(),$(".cell_error").removeClass("cell_error")},pe.upload_queue_size_exceeded=function(e,t){return alert("You can upload only "+t+" images"),!1},pe.uploadify_opened=function(){$(".RollingImage").show()};