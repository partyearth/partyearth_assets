!function(y){function T(){if(y.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}y.fn.ajaxSubmit=function(s){function e(){function e(){var e=x.attr("target"),t=x.attr("action");a.setAttribute("target",i),"POST"!=a.getAttribute("method")&&a.setAttribute("method","POST"),a.getAttribute("action")!=c.url&&a.setAttribute("action",c.url),c.skipEncodingOverride||x.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),c.timeout&&setTimeout(function(){p=!0,u()},c.timeout);var r=[];try{if(c.extraData)for(var n in c.extraData)r.push(y('<input type="hidden" name="'+n+'" value="'+c.extraData[n]+'" />').appendTo(a)[0]);l.appendTo("body"),f.attachEvent?f.attachEvent("onload",u):f.addEventListener("load",u,!1),a.submit()}finally{a.setAttribute("action",t),e?a.setAttribute("target",e):x.removeAttr("target"),y(r).remove()}}function u(){if(!d.aborted){var e=f.contentWindow?f.contentWindow.document:f.contentDocument?f.contentDocument:f.document;if(e&&e.location.href!=c.iframeSrc){f.detachEvent?f.detachEvent("onload",u):f.removeEventListener("load",u,!1);var t=!0;try{if(p)throw"timeout";var r="xml"==c.dataType||e.XMLDocument||y.isXMLDoc(e);if(T("isXml="+r),!r&&window.opera&&(null==e.body||""==e.body.innerHTML)&&--v)return T("requeing onLoad callback, DOM not available"),void setTimeout(u,250);d.responseText=e.body?e.body.innerHTML:e.documentElement?e.documentElement.innerHTML:null,d.responseXML=e.XMLDocument?e.XMLDocument:e,d.getResponseHeader=function(e){return{"content-type":c.dataType}[e]};var n=/(json|script)/.test(c.dataType);if(n||c.textarea){var a=e.getElementsByTagName("textarea")[0];if(a)d.responseText=a.value;else if(n){var i=e.getElementsByTagName("pre")[0],o=e.getElementsByTagName("body")[0];i?d.responseText=i.textContent:o&&(d.responseText=o.innerHTML)}}else"xml"!=c.dataType||d.responseXML||null==d.responseText||(d.responseXML=b(d.responseText));h=g(d,c.dataType,c)}catch(s){T("error caught:",s),t=!1,d.error=s,c.error&&c.error.call(c.context,d,"error",s),m&&y.event.trigger("ajaxError",[d,c,s])}d.aborted&&(T("upload aborted"),t=!1),t&&(c.success&&c.success.call(c.context,h,"success",d),m&&y.event.trigger("ajaxSuccess",[d,c])),m&&y.event.trigger("ajaxComplete",[d,c]),m&&!--y.active&&y.event.trigger("ajaxStop"),c.complete&&c.complete.call(c.context,d,t?"success":"error"),setTimeout(function(){l.removeData("form-plugin-onload"),l.remove(),d.responseXML=null},100)}}}var a=x[0];if(y(":input[name=submit],:input[id=submit]",a).length)alert('Error: Form elements must not have name or id of "submit".');else{var c=y.extend(!0,{},y.ajaxSettings,s);c.context=c.context||c;var i="jqFormIO"+(new Date).getTime(),l=y('<iframe id="'+i+'" name="'+i+'" src="'+c.iframeSrc+'" />'),f=l[0];l.css({position:"absolute",top:"-1000px",left:"-1000px"});var d={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){T("aborting upload...");var e="aborted";this.aborted=1,l.attr("src",c.iframeSrc),d.error=e,c.error&&c.error.call(c.context,d,"error",e),m&&y.event.trigger("ajaxError",[d,c,e]),c.complete&&c.complete.call(c.context,d,"error")}},m=c.global;if(m&&!y.active++&&y.event.trigger("ajaxStart"),m&&y.event.trigger("ajaxSend",[d,c]),c.beforeSend&&!1===c.beforeSend.call(c.context,d,c))c.global&&y.active--;else if(!d.aborted){var p=0,t=a.clk;if(t){var r=t.name;r&&!t.disabled&&(c.extraData=c.extraData||{},c.extraData[r]=t.value,"image"==t.type&&(c.extraData[r+".x"]=a.clk_x,c.extraData[r+".y"]=a.clk_y))}c.forceSync?e():setTimeout(e,10);var h,v=50,b=y.parseXML||function(e,t){return window.ActiveXObject?((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},o=y.parseJSON||function(e){return window.eval("("+e+")")},g=function(e,t,r){var n=e.getResponseHeader("content-type")||"",a="xml"===t||!t&&0<=n.indexOf("xml"),i=a?e.responseXML:e.responseText;return a&&"parsererror"===i.documentElement.nodeName&&y.error&&y.error("parsererror"),r&&r.dataFilter&&(i=r.dataFilter(i,t)),"string"==typeof i&&("json"===t||!t&&0<=n.indexOf("json")?i=o(i):("script"===t||!t&&0<=n.indexOf("javascript"))&&y.globalEval(i)),i}}}}if(!this.length)return T("ajaxSubmit: skipping submit process - no element selected"),this;"function"==typeof s&&(s={success:s});var t=this.attr("action"),r="string"==typeof t?y.trim(t):"";r&&(r=(r.match(/^([^#]+)/)||[])[1]),r=r||window.location.href||"",s=y.extend(!0,{url:r,type:this[0].getAttribute("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},s);var n={};if(this.trigger("form-pre-serialize",[this,s,n]),n.veto)return T("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(s.beforeSerialize&&!1===s.beforeSerialize(this,s))return T("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var a,i,o=this.formToArray(s.semantic);if(s.data)for(a in s.extraData=s.data,s.data)if(s.data[a]instanceof Array)for(var u in s.data[a])o.push({name:a,value:s.data[a][u]});else i=s.data[a],i=y.isFunction(i)?i():i,o.push({name:a,value:i});if(s.beforeSubmit&&!1===s.beforeSubmit(o,this,s))return T("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[o,this,s,n]),n.veto)return T("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var c=y.param(o);"GET"==s.type.toUpperCase()?(s.url+=(0<=s.url.indexOf("?")?"&":"?")+c,s.data=null):s.data=c;var x=this,l=[];if(s.resetForm&&l.push(function(){x.resetForm()}),s.clearForm&&l.push(function(){x.clearForm()}),!s.dataType&&s.target){var f=s.success||function(){};l.push(function(e){var t=s.replaceTarget?"replaceWith":"html";y(s.target)[t](e).each(f,arguments)})}else s.success&&l.push(s.success);s.success=function(e,t,r){for(var n=s.context||s,a=0,i=l.length;a<i;a++)l[a].apply(n,[e,t,r||x,x])};var d=0<y("input:file",this).length,m="multipart/form-data",p=x.attr("enctype")==m||x.attr("encoding")==m;return!1!==s.iframe&&(d||s.iframe||p)?s.closeKeepAlive?y.get(s.closeKeepAlive,e):e():y.ajax(s),this.trigger("form-submit-notify",[this,s]),this},y.fn.ajaxForm=function(t){if(0===this.length){var e={s:this.selector,c:this.context};return!y.isReady&&e.s?(T("DOM not ready, queuing ajaxForm"),y(function(){y(e.s,e.c).ajaxForm(t)})):T("terminating; zero elements found by selector"+(y.isReady?"":" (DOM not ready)")),this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(e){e.isDefaultPrevented()||(e.preventDefault(),y(this).ajaxSubmit(t))}).bind("click.form-plugin",function(e){var t=e.target,r=y(t);if(!r.is(":submit,input:image")){var n=r.closest(":submit");if(0==n.length)return;t=n[0]}var a=this;if("image"==(a.clk=t).type)if(e.offsetX!=undefined)a.clk_x=e.offsetX,a.clk_y=e.offsetY;else if("function"==typeof y.fn.offset){var i=r.offset();a.clk_x=e.pageX-i.left,a.clk_y=e.pageY-i.top}else a.clk_x=e.pageX-t.offsetLeft,a.clk_y=e.pageY-t.offsetTop;setTimeout(function(){a.clk=a.clk_x=a.clk_y=null},100)})},y.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},y.fn.formToArray=function(e){var t=[];if(0===this.length)return t;var r,n,a,i,o,s,u,c=this[0],l=e?c.getElementsByTagName("*"):c.elements;if(!l)return t;for(r=0,s=l.length;r<s;r++)if(a=(o=l[r]).name)if(e&&c.clk&&"image"==o.type)o.disabled||c.clk!=o||(t.push({name:a,value:y(o).val()}),t.push({name:a+".x",value:c.clk_x},{name:a+".y",value:c.clk_y}));else if((i=y.fieldValue(o,!0))&&i.constructor==Array)for(n=0,u=i.length;n<u;n++)t.push({name:a,value:i[n]});else null!=i&&t.push({name:a,value:i});if(!e&&c.clk){var f=y(c.clk),d=f[0];(a=d.name)&&!d.disabled&&"image"==d.type&&(t.push({name:a,value:f.val()}),t.push({name:a+".x",value:c.clk_x},{name:a+".y",value:c.clk_y}))}return t},y.fn.formSerialize=function(e){return y.param(this.formToArray(e))},y.fn.fieldSerialize=function(a){var i=[];return this.each(function(){var e=this.name;if(e){var t=y.fieldValue(this,a);if(t&&t.constructor==Array)for(var r=0,n=t.length;r<n;r++)i.push({name:e,value:t[r]});else null!=t&&i.push({name:this.name,value:t})}}),y.param(i)},y.fn.fieldValue=function(e){for(var t=[],r=0,n=this.length;r<n;r++){var a=this[r],i=y.fieldValue(a,e);null==i||i.constructor==Array&&!i.length||(i.constructor==Array?y.merge(t,i):t.push(i))}return t},y.fieldValue=function(e,t){var r=e.name,n=e.type,a=e.tagName.toLowerCase();if(t===undefined&&(t=!0),t&&(!r||e.disabled||"reset"==n||"button"==n||("checkbox"==n||"radio"==n)&&!e.checked||("submit"==n||"image"==n)&&e.form&&e.form.clk!=e||"select"==a&&-1==e.selectedIndex))return null;if("select"==a){var i=e.selectedIndex;if(i<0)return null;for(var o=[],s=e.options,u="select-one"==n,c=u?i+1:s.length,l=u?i:0;l<c;l++){var f=s[l];if(f.selected){var d=f.value;if(d||(d=f.attributes&&f.attributes.value&&!f.attributes.value.specified?f.text:f.value),u)return d;o.push(d)}}return o}return y(e).val()},y.fn.clearForm=function(){return this.each(function(){y("input,select,textarea",this).clearFields()})},y.fn.clearFields=y.fn.clearInputs=function(){return this.each(function(){var e=this.type,t=this.tagName.toLowerCase();"text"==e||"password"==e||"textarea"==t?this.value="":"checkbox"==e||"radio"==e?this.checked=!1:"select"==t&&(this.selectedIndex=-1)})},y.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},y.fn.enable=function(e){return e===undefined&&(e=!0),this.each(function(){this.disabled=!e})},y.fn.selected=function(r){return r===undefined&&(r=!0),this.each(function(){var e=this.type;if("checkbox"==e||"radio"==e)this.checked=r;else if("option"==this.tagName.toLowerCase()){var t=y(this).parent("select");r&&t[0]&&"select-one"==t[0].type&&t.find("option").selected(!1),this.selected=r}})}}(jQuery),function(){var e,r,t=function(e,t){function r(){this.constructor=e}for(var n in t)a.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},a={}.hasOwnProperty;e=function(){function e(e){var t,r;this.container=e,this.enabled_field=this.container.find(".EnabledField"),this.on_save=function(){},this.editor=this.container.find(".Editor"),this.submit_button=this.container.find(".SubmitButton"),this.container.click((t=this,function(e){if(t.container.hasClass("Disabled"))return t.container.removeClass("Disabled"),t.enabled_field.val(!0),e.stopPropagation(),t.on_save()})),this.disable_button=this.container.find(".DisableButton"),this.disable_button.click((r=this,function(e){if(!r.container.hasClass("Disabled"))return r.container.addClass("Disabled"),r.enabled_field.val(!1),e.stopPropagation(),r.on_save()}))}return e.prototype.save=function(e){return this.on_save=e},e}(),r=function(){function r(e){var t;this.container=e,r.__super__.constructor.call(this,this.container),this.text_field=this.container.find(".Text"),this.input=this.container.find(".Input"),this.input.keyup((t=this,function(){return t.text_field.html(t.input.val())}))}return t(r,e),r}(),$(document).ready(function(){var e,t;return $(".Editor").hide(),t=new r($(".SubjectLine")),e=$(".Form"),$(".DisableButton").click(function(){return $(".Editor").hide()}),$(".EditButton").click(function(e){return $(".Editor").hide(),$(e.currentTarget).parent().find(".Editor").show()}),$(".CloseEditorButton").click(function(e){return $(e.currentTarget).parents(".Editor").hide()}),t.save(function(){return e.ajaxSubmit()})})}.call(this);