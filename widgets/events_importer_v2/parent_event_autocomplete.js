pe.EventHelperTools={};pe.EventHelperTools.autocomplete_closed=function(){pe.EventHelperTools.autocomplete_open=!1};pe.EventHelperTools.autocomplete_opened=function(){pe.EventHelperTools.autocomplete_open=!0};pe.EventHelperTools.remove_comma_at_the_end=function(a){return!a?"":a.replace(/,$/,"")};
pe.EventHelperTools.show_message=function(a,b){a.removeClass("wrong correct new").parent().find(".errors").remove().find(".message").remove();b?a.addClass("wrong").after('<span class="errors">'+b+"</span>"):a.addClass("correct")};pe.EventHelperTools.validate_url=function(a){return!a?!0:/^(http|https):\/\/[a-z0-9]+([\-\.]{1}[a-z0-9]+)*\.[a-z]{2,5}(:[0-9]{1,5})?(\/.*)?$/i.test(a)};
pe.ParentEventAutocomplete=function(a,b){pe.init_widget(this,a);this.parent_input_field=this.container.find(".ParentEventAutocompleteInput");this.parent_input_field.blur(this.callback(this.parent_input_field_blurred));this.autosuggest_module=new pe.AutoSuggestModule(this.container,b,{startText:"",emptyText:"No parent event found",queryParam:"term",selectedItemProp:"label",selectedValuesProp:"value",searchObjProps:"label",neverSubmit:!0,selectionLimit:1,preFill:this.parent_input_field.data("event-data"),
selectionAdded:this.callback(this.search_result_selection_added)});this.last_valid_input=this.val()};pe.ParentEventAutocomplete.events={CHANGED:"ParentEventAutocomplete_CHANGED"};pe.ParentEventAutocomplete.prototype.as_enum=function(){return{parent_id:this.val()}};pe.ParentEventAutocomplete.prototype.add_parent_event=function(a){this.autosuggest_module.add_entry(a)};pe.ParentEventAutocomplete.prototype.display_message=function(a){pe.EventHelperTools.show_message(this.parent_input_field,a)};
pe.ParentEventAutocomplete.prototype.parent_input_field_blurred=function(){this.value_changed()&&(this.last_valid_input=this.val(),this.fire_event(pe.ParentEventAutocomplete.events.CHANGED,this.as_enum()));this.display_message("")};pe.ParentEventAutocomplete.prototype.search_result_selection_added=function(){this.autosuggest_module&&this.parent_input_field.val()===this.autosuggest_module.last_value()&&(this.autosuggest_module.remove_last_entry(),this.display_message("Cannot create parent event. Please select from list"))};
pe.ParentEventAutocomplete.prototype.val=function(){return this.autosuggest_module.val()};pe.ParentEventAutocomplete.prototype.value_changed=function(){return this.last_valid_input!==this.val()};
