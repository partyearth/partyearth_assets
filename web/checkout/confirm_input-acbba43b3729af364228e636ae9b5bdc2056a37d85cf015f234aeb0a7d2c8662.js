pe.ReviewOrderRecap=function(t,i){pe.init_widget(this,t),this.order_id=i,this.sales_tax_div=this.container.find(".SalesTax"),this.shipping_handling_div=this.container.find(".ShippingHandling"),this.order_total_div=this.container.find(".OrderTotal"),this.subtotal_div=this.container.find(".Subtotal"),this.cart_total_div=this.container.find(".CartTotal"),this.quantity_input=this.container.find(".QuantityInput"),this.quantity_update_button=this.container.find(".UpdateQuantity"),this.quantity_update_button.click(this.callback(this.update_button_clicked))},pe.ReviewOrderRecap.prototype.update_button_clicked=function(){$.ajax({url:"/api/orders/update_and_calculate_order_total.json",data:{order:this.order_id,quantity:this.quantity_input.val()},type:"POST",success:this.callback(function(t){return t.error?(alert(t.error),!1):(this.subtotal_div.html(t.sub_total),this.cart_total_div.html(t.cart_total),this.sales_tax_div.html(t.sales_tax),this.shipping_handling_div.html(t.shipping_cost),this.order_total_div.html(t.total_cost),!0)})})},$(document).ready(function(){new pe.ReviewOrderRecap($(".OrderRecap"),window.order);var t=$(".QuantityInput");t.blur(pe.validate_quantity),t.keydown(pe.validate_quantity),pe.init_page_framework()}),pe.validate_quantity=function(t){if("blur"===t.type||13==t.keyCode){var i=$(t.target),a=i.val();return!!(a&&0<=a)||(i.val("1"),t.stopPropagation(),!1)}};