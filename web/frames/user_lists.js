(function(){var b=function(a,b){return function(){return a.apply(b,arguments)}};pe.gigya=pe.gigya||{};var n=pe,c=function(a,c){this.container=a;this.url=c;this.iframe_loaded=b(this.iframe_loaded,this);this.init=b(this.init,this);this.show=b(this.show,this);this.iframe=null};c.prototype.show=function(){this.container.show();return this.init()};c.prototype.init=function(){this.container.addClass("spinnable");this.iframe=$("<iframe></iframe>");this.iframe.attr("scrolling","no");this.iframe.attr("scroll",
"no");this.iframe.attr("src",this.url);this.iframe.attr("frameborder","0");this.collapse_iframe();this.iframe.load(this.iframe_loaded);return this.container.html(this.iframe)};c.prototype.iframe_loaded=function(){return this.container.removeClass("spinnable")};c.prototype.collapse_iframe=function(){this.iframe.css("width","0px");return this.iframe.css("height","0px")};n.Iframe=c}).call(this);
(function(b,n,c){b.fn.jScrollPane=function(a){function f(a,f){function n(p){var h,f,u,oa,pa,U=!1,j=!1;d=p;if(e===c)oa=a.scrollTop(),pa=a.scrollLeft(),a.css({overflow:"hidden",padding:0}),l=a.innerWidth()+Q,k=a.innerHeight(),a.width(l),e=b('<div class="jspPane" />').css("padding",ua).append(a.children()),g=b('<div class="jspContainer" />').css({width:l+"px",height:k+"px"}).append(e).appendTo(a);else{a.css("width","");if(U=d.stickToBottom)U=s-k,U=20<U&&10>U-F();if(j=d.stickToRight)j=t-l,j=20<j&&10>
j-G();if(u=a.innerWidth()+Q!=l||a.outerHeight()!=k)l=a.innerWidth()+Q,k=a.innerHeight(),g.css({width:l+"px",height:k+"px"});if(!u&&va==t&&e.outerHeight()==s){a.width(l);return}va=t;e.css("width","");a.width(l);g.find(">.jspVerticalBar,>.jspHorizontalBar").remove().end()}e.css("overflow","auto");t=p.contentWidth?p.contentWidth:e[0].scrollWidth;s=e[0].scrollHeight;e.css("overflow","");qa=t/l;ha=s/k;z=1<ha;y=1<qa;if(!y&&!z)a.removeClass("jspScrollable"),e.css({top:0,width:g.width()-Q}),g.unbind(ra),
e.find(":input,a").unbind("focus.jsp"),a.attr("tabindex","-1").removeAttr("tabindex").unbind("keydown.jsp keypress.jsp"),wa(),xa();else{a.addClass("jspScrollable");if(p=d.maintainPosition&&(q||r))h=G(),f=F();z&&(g.append(b('<div class="jspVerticalBar" />').append(b('<div class="jspCap jspCapTop" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragTop" />'),b('<div class="jspDragBottom" />'))),b('<div class="jspCap jspCapBottom" />'))),ia=g.find(">.jspVerticalBar"),
C=ia.find(">.jspTrack"),v=C.find(">.jspDrag"),d.showArrows&&(ba=b('<a class="jspArrow jspArrowUp" />').bind("mousedown.jsp",H(0,-1)).bind("click.jsp",V),ca=b('<a class="jspArrow jspArrowDown" />').bind("mousedown.jsp",H(0,1)).bind("click.jsp",V),d.arrowScrollOnHover&&(ba.bind("mouseover.jsp",H(0,-1,ba)),ca.bind("mouseover.jsp",H(0,1,ca))),ya(C,d.verticalArrowPositions,ba,ca)),I=k,g.find(">.jspVerticalBar>.jspCap:visible,>.jspVerticalBar>.jspArrow").each(function(){I-=b(this).outerHeight()}),v.hover(function(){v.addClass("jspHover")},
function(){v.removeClass("jspHover")}).bind("mousedown.jsp",function(a){b("html").bind("dragstart.jsp selectstart.jsp",V);v.addClass("jspActive");var p=a.pageY-v.position().top;b("html").bind("mousemove.jsp",function(a){R(a.pageY-p,!1)}).bind("mouseup.jsp mouseleave.jsp",za);return!1}),S());y&&(g.append(b('<div class="jspHorizontalBar" />').append(b('<div class="jspCap jspCapLeft" />'),b('<div class="jspTrack" />').append(b('<div class="jspDrag" />').append(b('<div class="jspDragLeft" />'),b('<div class="jspDragRight" />'))),
b('<div class="jspCap jspCapRight" />'))),ja=g.find(">.jspHorizontalBar"),D=ja.find(">.jspTrack"),w=D.find(">.jspDrag"),d.showArrows&&(da=b('<a class="jspArrow jspArrowLeft" />').bind("mousedown.jsp",H(-1,0)).bind("click.jsp",V),ea=b('<a class="jspArrow jspArrowRight" />').bind("mousedown.jsp",H(1,0)).bind("click.jsp",V),d.arrowScrollOnHover&&(da.bind("mouseover.jsp",H(-1,0,da)),ea.bind("mouseover.jsp",H(1,0,ea))),ya(D,d.horizontalArrowPositions,da,ea)),w.hover(function(){w.addClass("jspHover")},
function(){w.removeClass("jspHover")}).bind("mousedown.jsp",function(a){b("html").bind("dragstart.jsp selectstart.jsp",V);w.addClass("jspActive");var p=a.pageX-w.position().left;b("html").bind("mousemove.jsp",function(a){W(a.pageX-p,!1)}).bind("mouseup.jsp mouseleave.jsp",za);return!1}),A=g.innerWidth(),Aa());if(y&&z){u=D.outerHeight();var Ba=C.outerWidth();I-=u;b(ja).find(">.jspCap:visible,>.jspArrow").each(function(){A+=b(this).outerWidth()});A-=Ba;k-=Ba;l-=u;D.parent().append(b('<div class="jspCorner" />').css("width",
u+"px"));S();Aa()}y&&e.width(g.outerWidth()-Q+"px");s=e.outerHeight();ha=s/k;y&&(J=Math.ceil(1/qa*A),J>d.horizontalDragMaxWidth?J=d.horizontalDragMaxWidth:J<d.horizontalDragMinWidth&&(J=d.horizontalDragMinWidth),w.width(J+"px"),K=A-J,sa(r));z&&(L=Math.ceil(1/ha*I),L>d.verticalDragMaxHeight?L=d.verticalDragMaxHeight:L<d.verticalDragMinHeight&&(L=d.verticalDragMinHeight),v.height(L+"px"),E=I-L,ta(q));p&&(X(j?t-l:h,!1),M(U?s-k:f,!1));e.find(":input,a").unbind("focus.jsp").bind("focus.jsp",function(a){fa(a.target,
!1)});g.unbind(ra).bind(ra,function(a,p,b,h){a=r;p=q;m.scrollBy(b*d.mouseWheelSpeed,-h*d.mouseWheelSpeed,!1);return a==r&&p==q});var Ca,T,N,O,ga,P=!1;g.unbind("touchstart.jsp touchmove.jsp touchend.jsp click.jsp-touchclick").bind("touchstart.jsp",function(a){a=a.originalEvent.touches[0];Ca=G();T=F();N=a.pageX;O=a.pageY;ga=!1;P=!0}).bind("touchmove.jsp",function(a){if(P){a=a.originalEvent.touches[0];var p=r,b=q;m.scrollTo(Ca+N-a.pageX,T+O-a.pageY);ga=ga||5<Math.abs(N-a.pageX)||5<Math.abs(O-a.pageY);
return p==r&&b==q}}).bind("touchend.jsp",function(){P=!1}).bind("click.jsp-touchclick",function(){if(ga)return ga=!1});if(d.enableKeyboardNavigation){var Z=function(){var a=r,p=q;switch(Y){case 40:m.scrollByY(d.keyboardSpeed,!1);break;case 38:m.scrollByY(-d.keyboardSpeed,!1);break;case 34:case 32:m.scrollByY(k*d.scrollPagePercent,!1);break;case 33:m.scrollByY(-k*d.scrollPagePercent,!1);break;case 39:m.scrollByX(d.keyboardSpeed,!1);break;case 37:m.scrollByX(-d.keyboardSpeed,!1)}return ka=a!=r||p!=
q},Y,ka,la=[];y&&la.push(ja[0]);z&&la.push(ia[0]);e.focus(function(){a.focus()});a.attr("tabindex",0).unbind("keydown.jsp keypress.jsp").bind("keydown.jsp",function(a){if(!(a.target!==this&&(!la.length||!b(a.target).closest(la).length))){var p=r,h=q;switch(a.keyCode){case 40:case 38:case 34:case 32:case 33:case 39:case 37:Y=a.keyCode;Z();break;case 35:M(s-k);Y=null;break;case 36:M(0),Y=null}ka=a.keyCode==Y&&p!=r||h!=q;return!ka}}).bind("keypress.jsp",function(a){a.keyCode==Y&&Z();return!ka});d.hideFocus?
(a.css("outline","none"),"hideFocus"in g[0]&&a.attr("hideFocus",!0)):(a.css("outline",""),"hideFocus"in g[0]&&a.attr("hideFocus",!1))}d.clickOnTrack&&(wa(),z&&C.bind("mousedown.jsp",function(a){if(a.originalTarget===c||a.originalTarget==a.currentTarget){var p=b(this),h=p.offset(),f=a.pageY-h.top-q,B,u=!0,e=function(){var b=p.offset(),b=a.pageY-b.top-L/2,h=k*d.scrollPagePercent,c=E*h/(s-k);if(0>f)q-c>b?m.scrollByY(-h):R(b);else if(0<f)q+c<b?m.scrollByY(h):R(b);else{g();return}B=setTimeout(e,u?d.initialDelay:
d.trackClickRepeatFreq);u=!1},g=function(){B&&clearTimeout(B);B=null;b(document).unbind("mouseup.jsp",g)};e();b(document).bind("mouseup.jsp",g);return!1}}),y&&D.bind("mousedown.jsp",function(a){if(a.originalTarget===c||a.originalTarget==a.currentTarget){var p=b(this),h=p.offset(),f=a.pageX-h.left-r,B,u=!0,g=function(){var b=p.offset(),b=a.pageX-b.left-J/2,h=l*d.scrollPagePercent,c=K*h/(t-l);if(0>f)r-c>b?m.scrollByX(-h):W(b);else if(0<f)r+c<b?m.scrollByX(h):W(b);else{e();return}B=setTimeout(g,u?d.initialDelay:
d.trackClickRepeatFreq);u=!1},e=function(){B&&clearTimeout(B);B=null;b(document).unbind("mouseup.jsp",e)};g();b(document).bind("mouseup.jsp",e);return!1}}));a:if(location.hash&&1<location.hash.length){var aa,Da,ma=escape(location.hash);try{aa=b(ma)}catch(Fa){break a}aa.length&&e.find(ma)&&(0===g.scrollTop()?Da=setInterval(function(){0<g.scrollTop()&&(fa(ma,!0),b(document).scrollTop(g.position().top),clearInterval(Da))},50):(fa(ma,!0),b(document).scrollTop(g.position().top)))}d.hijackInternalLinks&&
Ea()}d.autoReinitialise&&!na?na=setInterval(function(){n(d)},d.autoReinitialiseDelay):!d.autoReinitialise&&na&&clearInterval(na);oa&&a.scrollTop(0)&&M(oa,!1);pa&&a.scrollLeft(0)&&X(pa,!1);a.trigger("jsp-initialised",[y||z])}function S(){C.height(I+"px");q=0;Z=d.verticalGutter+C.outerWidth();e.width(l-Z-Q);try{0===ia.position().left&&e.css("margin-left",Z+"px")}catch(a){}}function Aa(){g.find(">.jspHorizontalBar>.jspCap:visible,>.jspHorizontalBar>.jspArrow").each(function(){A-=b(this).outerWidth()});
D.width(A+"px");r=0}function ya(a,b,c,d){var f="before",e="after";"os"==b&&(b=/Mac/.test(navigator.platform)?"after":"split");b==f?e=b:b==e&&(f=b,b=c,c=d,d=b);a[f](c)[e](d)}function H(a,h,c){return function(){var f=this,e=c,f=b(f).addClass("jspActive"),g,x,k=!0,l=function(){0!==a&&m.scrollByX(a*d.arrowButtonSpeed);0!==h&&m.scrollByY(h*d.arrowButtonSpeed);x=setTimeout(l,k?d.initialDelay:d.arrowRepeatFreq);k=!1};l();g=e?"mouseout.jsp":"mouseup.jsp";e=e||b("html");e.bind(g,function(){f.removeClass("jspActive");
x&&clearTimeout(x);x=null;e.unbind(g)});this.blur();return!1}}function wa(){D&&D.unbind("mousedown.jsp");C&&C.unbind("mousedown.jsp")}function za(){b("html").unbind("dragstart.jsp selectstart.jsp mousemove.jsp mouseup.jsp mouseleave.jsp");v&&v.removeClass("jspActive");w&&w.removeClass("jspActive")}function R(a,b){z&&(0>a?a=0:a>E&&(a=E),b===c&&(b=d.animateScroll),b?m.animate(v,"top",a,ta):(v.css("top",a),ta(a)))}function ta(b){b===c&&(b=v.position().top);g.scrollTop(0);q=b;var h=0===q,f=q==E;b=-(b/
E)*(s-k);if(T!=h||N!=f)T=h,N=f,a.trigger("jsp-arrow-change",[T,N,O,P]);d.showArrows&&(ba[h?"addClass":"removeClass"]("jspDisabled"),ca[f?"addClass":"removeClass"]("jspDisabled"));e.css("top",b);a.trigger("jsp-scroll-y",[-b,h,f]).trigger("scroll")}function W(a,b){y&&(0>a?a=0:a>K&&(a=K),b===c&&(b=d.animateScroll),b?m.animate(w,"left",a,sa):(w.css("left",a),sa(a)))}function sa(b){b===c&&(b=w.position().left);g.scrollTop(0);r=b;var h=0===r,f=r==K;b=-(b/K)*(t-l);if(O!=h||P!=f)O=h,P=f,a.trigger("jsp-arrow-change",
[T,N,O,P]);d.showArrows&&(da[h?"addClass":"removeClass"]("jspDisabled"),ea[f?"addClass":"removeClass"]("jspDisabled"));e.css("left",b);a.trigger("jsp-scroll-x",[-b,h,f]).trigger("scroll")}function M(a,b){R(a/(s-k)*E,b)}function X(a,b){W(a/(t-l)*K,b)}function fa(a,c,f){var e,x,j=0,m=0,n,q,r;try{e=b(a)}catch(s){return}x=e.outerHeight();a=e.outerWidth();g.scrollTop(0);for(g.scrollLeft(0);!e.is(".jspPane");)if(j+=e.position().top,m+=e.position().left,e=e.offsetParent(),/^body|html$/i.test(e[0].nodeName))return;
e=F();n=e+k;j<e||c?q=j-d.verticalGutter:j+x>n&&(q=j-k+x+d.verticalGutter);q&&M(q,f);j=G();q=j+l;m<j||c?r=m-d.horizontalGutter:m+a>q&&(r=m-l+a+d.horizontalGutter);r&&X(r,f)}function G(){return-e.position().left}function F(){return-e.position().top}function V(){return!1}function xa(){b("a.jspHijack").unbind("click.jsp-hijack").removeClass("jspHijack")}function Ea(){xa();b("a[href^=#]").addClass("jspHijack").bind("click.jsp-hijack",function(){var a=this.href.split("#");if(1<a.length&&(a=a[1],0<a.length&&
0<e.find("#"+a).length))return fa("#"+a,!0),!1})}var d,m=this,e,l,k,g,t,s,qa,ha,z,y,v,E,q,w,K,r,ia,C,Z,I,L,ba,ca,ja,D,A,J,da,ea,na,ua,Q,va,T=!0,O=!0,N=!1,P=!1,aa=a.clone(!1,!1).empty(),ra=b.fn.mwheelIntent?"mwheelIntent.jsp":"mousewheel.jsp";ua=a.css("paddingTop")+" "+a.css("paddingRight")+" "+a.css("paddingBottom")+" "+a.css("paddingLeft");Q=(parseInt(a.css("paddingLeft"),10)||0)+(parseInt(a.css("paddingRight"),10)||0);b.extend(m,{reinitialise:function(a){a=b.extend({},d,a);n(a)},scrollToElement:function(a,
b,c){fa(a,b,c)},scrollTo:function(a,b,c){X(a,c);M(b,c)},scrollToX:function(a,b){X(a,b)},scrollToY:function(a,b){M(a,b)},scrollToPercentX:function(a,b){X(a*(t-l),b)},scrollToPercentY:function(a,b){M(a*(s-k),b)},scrollBy:function(a,b,c){m.scrollByX(a,c);m.scrollByY(b,c)},scrollByX:function(a,b){var c=(G()+Math[0>a?"floor":"ceil"](a))/(t-l);W(c*K,b)},scrollByY:function(a,b){var c=(F()+Math[0>a?"floor":"ceil"](a))/(s-k);R(c*E,b)},positionDragX:function(a,b){W(a,b)},positionDragY:function(a,b){R(a,b)},
animate:function(a,b,c,f){var e={};e[b]=c;a.animate(e,{duration:d.animateDuration,easing:d.animateEase,queue:!1,step:f})},getContentPositionX:function(){return G()},getContentPositionY:function(){return F()},getContentWidth:function(){return t},getContentHeight:function(){return s},getPercentScrolledX:function(){return G()/(t-l)},getPercentScrolledY:function(){return F()/(s-k)},getIsScrollableH:function(){return y},getIsScrollableV:function(){return z},getContentPane:function(){return e},scrollToBottom:function(a){R(E,
a)},hijackInternalLinks:function(){Ea()},destroy:function(){var b=F(),c=G();a.removeClass("jspScrollable").unbind(".jsp");a.replaceWith(aa.append(e.children()));aa.scrollTop(b);aa.scrollLeft(c)}});n(f)}a=b.extend({},b.fn.jScrollPane.defaults,a);b.each(["mouseWheelSpeed","arrowButtonSpeed","trackClickSpeed","keyboardSpeed"],function(){a[this]=a[this]||a.speed});return this.each(function(){var c=b(this),j=c.data("jsp");j?j.reinitialise(a):(j=new f(c,a),c.data("jsp",j))})};b.fn.jScrollPane.defaults=
{showArrows:!1,maintainPosition:!0,stickToBottom:!1,stickToRight:!1,clickOnTrack:!0,autoReinitialise:!1,autoReinitialiseDelay:500,verticalDragMinHeight:0,verticalDragMaxHeight:99999,horizontalDragMinWidth:0,horizontalDragMaxWidth:99999,contentWidth:c,animateScroll:!1,animateDuration:300,animateEase:"linear",hijackInternalLinks:!1,verticalGutter:4,horizontalGutter:4,mouseWheelSpeed:0,arrowButtonSpeed:0,arrowRepeatFreq:50,arrowScrollOnHover:!1,trackClickSpeed:0,trackClickRepeatFreq:70,verticalArrowPositions:"split",
horizontalArrowPositions:"split",enableKeyboardNavigation:!0,hideFocus:!1,keyboardSpeed:0,initialDelay:300,speed:30,scrollPagePercent:0.8}})(jQuery,this);
(function(b){function n(a){var c=a||window.event,x=[].slice.call(arguments,1),j=0,n=0,S=0;a=b.event.fix(c);a.type="mousewheel";a.wheelDelta&&(j=a.wheelDelta/120);a.detail&&(j=-a.detail/3);S=j;void 0!==c.axis&&c.axis===c.HORIZONTAL_AXIS&&(S=0,n=-1*j);void 0!==c.wheelDeltaY&&(S=c.wheelDeltaY/120);void 0!==c.wheelDeltaX&&(n=-1*c.wheelDeltaX/120);x.unshift(a,j,n,S);return b.event.handle.apply(this,x)}var c=["DOMMouseScroll","mousewheel"];b.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=
c.length;a;)this.addEventListener(c[--a],n,!1);else this.onmousewheel=n},teardown:function(){if(this.removeEventListener)for(var a=c.length;a;)this.removeEventListener(c[--a],n,!1);else this.onmousewheel=null}};b.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})})(jQuery);
(function(){var b=function(a,b){return function(){return a.apply(b,arguments)}};pe.gigya=pe.gigya||{};var n=pe.gigya,c=function(a){this.container=a;this.on_logged_in=b(this.on_logged_in,this);this.on_registered=b(this.on_registered,this);this.show_login_screen=b(this.show_login_screen,this);this.list_clicked=b(this.list_clicked,this);this.add_to_list_button_clicked=b(this.add_to_list_button_clicked,this);this.add_item=b(this.add_item,this);this.login_required=this.container.data("login-required");
this.form_container=this.container.find(".Form");this.login_container=this.container.find(".Login");this.login_iframe=new pe.Iframe(this.login_container,"/frames/login");this.errors_container=this.container.find(".Errors");this.errors=[];this.list_container=this.container.find(".List");this.scroll_pane=this.list_container.jScrollPane({maintainPosition:!1}).data("jsp");this.checked_list_ids=this.list_container.data("checked");_.each(this.get_checked_lis(),function(a){return $(a).addClass("checked")});
this.submit_button=this.container.find(".SubmitButton");this.submit_button.click(this.add_to_list_button_clicked);this.show_login_screen_button=this.container.find(".LoginTrigger");this.show_login_screen_button.click(this.show_login_screen);this.get_lis().live("click",this.list_clicked);pe.bind_global_event(pe.events.LOGGED_IN,this.on_logged_in);pe.bind_global_event(pe.events.REGISTRATION_COMPLETE,this.on_registered)};c.errors={NOTHING_SELECTED:"NOTHING_SELECTED",NOTHING_CHANGED:"NOTHING_CHANGED",
messages:{NOTHING_SELECTED:"Please select a list",NOTHING_CHANGED:"Item already on selected list"}};c.prototype.add_item=function(a){var b,c,j=this;b=$("<li data-id='"+a.id+"' data-name='"+a.name+"'>"+a.name+"</li>");b.data("id",a.id);c=this.get_lis().toArray();c.push(b);c=_.sortBy(c,function(a){return String($(a).data("name")).toLowerCase()});this.scroll_pane.getContentPane().empty();_.each(c,function(a){return j.scroll_pane.getContentPane().append(a)});this.scroll_pane.reinitialise();this.select_by_id(a.id);
return this.submit_button.focus()};c.prototype.add_to_list_button_clicked=function(){return this.validate()?this.on_validation_passed():this.on_validation_failed()};c.prototype.list_clicked=function(a){return this.select($(a.currentTarget))};c.prototype.select=function(a){if(0<a.length)return this.get_lis().removeClass("selected"),a.addClass("selected"),this.scroll_pane.scrollToElement(a,!0,!0)};c.prototype.get_lis=function(){return this.list_container.find("li")};c.prototype.get_selected_li=function(){return this.get_lis().filter(".selected:first")};
c.prototype.get_checked_lis=function(){var a=this;return _.filter(this.get_lis(),function(b){return _.find(a.checked_list_ids,function(a){return a===$(b).data("id")})})};c.prototype.select_by_id=function(a){var b;b=_.find(this.get_lis(),function(b){return $(b).data("id")===a});return this.select($(b))};c.prototype.get_validation_message=function(){return _.map(this.errors,function(a){return pe.gigya.FavoritesList.errors.messages[a]}).join(", ")};c.prototype.on_validation_failed=function(){if(_.isEmpty(this.errors)){if(this.login_required)return this.show_login_screen()}else return this.errors_container.html(this.get_validation_message()),
pe.on_frame_element_resized()};c.prototype.show_login_screen=function(){this.form_container.hide();this.login_container.show();return this.login_iframe.show()};c.prototype.on_registered=function(){this.form_container.show();this.login_container.hide();this.login_required=!1;return this.validate()?this.on_validation_passed():this.show_login_screen_button.hide()};c.prototype.on_logged_in=function(){this.form_container.show();this.login_container.hide();this.login_required=!1;return this.validate()?
this.on_validation_passed():window.location.reload()};c.prototype.on_validation_passed=function(){var a;a=this.get_selected_li().data("name");this.container.append("<input type='hidden' name='user_list[name]' value='"+a+"'/>");$("body").css("opacity",0.3);return this.container.submit()};c.prototype.validation_failed=function(a){return this.on_validation_failed=a};c.prototype.validation_passed=function(a){return this.on_validation_passed=a};c.prototype.validate=function(){var a,b;this.errors=[];b=
this.get_selected_li();if(0===b.length)return this.errors.push(pe.gigya.FavoritesList.errors.NOTHING_SELECTED),!1;a=b.data("id");_.detect(this.checked_list_ids,function(b){return b===a})&&this.errors.push(pe.gigya.FavoritesList.errors.NOTHING_CHANGED);return _.isEmpty(this.errors)&&!this.login_required};n.FavoritesList=c}).call(this);
(function(){var b=function(a,b){return function(){return a.apply(b,arguments)}};pe.gigya=pe.gigya||{};var n=pe.gigya,c=function(a){var c=this;this.container=a;this.input_field_focused=b(this.input_field_focused,this);this.input_field_focusouted=b(this.input_field_focusouted,this);this.error_message_container_clicked=b(this.error_message_container_clicked,this);this.on_list_created=b(this.on_list_created,this);this.submit_button_clicked=b(this.submit_button_clicked,this);this.error_message_container=
this.container.find(".Error");this.input_field=this.container.find(".Input");this.submit_button=this.container.find(".CreateButton");this.cancel_button=this.container.find(".CancelButton");this.input_field.attr("placeholder",pe.gigya.ListCreator.default_label);this.input_field.focus(this.input_field_focused);this.input_field.focusout(this.input_field_focusouted);this.input_field.keypress(function(a){c.hide_error_message();if(13===a.which)return a.preventDefault(),c.hide_error_message(),a=c.input_field.val(),
_.isEmpty(a.replace(/\s/g,""))||c.create_list(a),!1});this.error_message_container.click(this.error_message_container_clicked);this.submit_button.click(this.submit_button_clicked);this.cancel_button.click(function(){return c.put_name(pe.gigya.ListCreator.default_label)});this.hide_error_message();this.put_name(pe.gigya.ListCreator.default_label)};c.default_label="Please enter a title for your new list";c.prototype.create_list=function(a){this.on_before_create();return $.post("/api/user_lists",{user_list:{name:a}},
this.on_list_created,"json")};c.prototype.put_name=function(a){return this.input_field.val(a)};c.prototype.validate=function(){return!this.is_empty()};c.prototype.show_error_message=function(){this.container.addClass("failed");this.input_field.val(pe.gigya.ListCreator.default_label);return this.input_field.css("color","red")};c.prototype.hide_error_message=function(){this.input_field.css("color","");this.input_field.val()===pe.gigya.ListCreator.default_label&&this.input_field.val("");return this.container.removeClass("failed")};
c.prototype.is_empty=function(){var a;a=this.input_field.val();return _.isEmpty(a)||a===pe.gigya.ListCreator.default_label};c.prototype.submit_button_clicked=function(){return this.validate()?(this.hide_error_message(),this.create_list(this.input_field.val()),this.put_name("")):this.show_error_message()};c.prototype.on_list_created=function(a){return 0===a.status?(this.put_name(""),this.on_after_create(a.instance)):alert("Something went wrong: ListCreator#on_list_created")};c.prototype.on_after_create=
function(){return!0};c.prototype.on_before_create=function(){return!0};c.prototype.after_create=function(a){return this.on_after_create=a};c.prototype.before_create=function(a){return this.on_before_create=a};c.prototype.error_message_container_clicked=function(){this.hide_error_message();this.put_name("");return this.input_field.focus()};c.prototype.input_field_focusouted=function(){if(_.isEmpty(this.input_field.val()))return this.put_name(pe.gigya.ListCreator.default_label)};c.prototype.input_field_focused=
function(){this.hide_error_message();if(this.is_empty())return this.put_name("")};n.ListCreator=c}).call(this);
(function(){var b=pe.gigya,n=function(b){this.container=b;var a=this.close_button_clicked,f=this;this.close_button_clicked=function(){return a.apply(f,arguments)};this.favorites_list=new pe.gigya.FavoritesList(this.container);this.creator=new pe.gigya.ListCreator(this.container.find(".Creator"));this.creator.after_create(this.favorites_list.add_item);this.container.find(".CloseButton").click(this.close_button_clicked)};n.prototype.close_button_clicked=function(){return pe.fire_global_event(pe.events.IFRAME_CLOSE_BUTTON_CLICKED)};
b.UserListsForm=n;$(document).ready(function(){return pe.favorites_form=new pe.gigya.UserListsForm($(".UserLists"))})}).call(this);
