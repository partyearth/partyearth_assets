pe.EventDatesTextModule=function(a){pe.init_widget(this,a);this.dates_input_field=this.container.find(".EventDatesTextInput");this.dates_input_field.blur(this.callback(this.dates_input_field_blurred));this.last_valid_input=this.val()};pe.EventDatesTextModule.events={CHANGED:"EventDatesTextModule_CHANGED"};pe.EventDatesTextModule.prototype.as_enum=function(){return{event_dates_text:this.val()}};
pe.EventDatesTextModule.prototype.dates_input_field_blurred=function(){this.is_valid(this.callback(function(a,b){a?(this.value_changed()&&(this.last_valid_input=this.val(),this.fire_event(pe.EventDatesTextModule.events.CHANGED,this.as_enum())),this.display_message("")):this.display_message(b)}))};pe.EventDatesTextModule.prototype.display_message=function(a){pe.EventHelperTools.show_message(this.dates_input_field,a)};
pe.EventDatesTextModule.prototype.is_valid=function(a){this.value_changed()||a(!0,"");$.ajax({url:"/api/events/check_dates",data:{dates:this.val()},error:pe.ajax_error,success:function(b){"error"==b.message&&a(!0,"Please enter valid event dates")}})};pe.EventDatesTextModule.prototype.val=function(){return this.dates_input_field.val().toString()};pe.EventDatesTextModule.prototype.value_changed=function(){return this.last_valid_input!==this.val()};
