!function(y){function _(){if(y.fn.ajaxSubmit.debug){var e="[jquery.form] "+Array.prototype.join.call(arguments,"");window.console&&window.console.log?window.console.log(e):window.opera&&window.opera.postError&&window.opera.postError(e)}}y.fn.ajaxSubmit=function(s){function e(){function e(){var e=x.attr("target"),t=x.attr("action");n.setAttribute("target",i),"POST"!=n.getAttribute("method")&&n.setAttribute("method","POST"),n.getAttribute("action")!=l.url&&n.setAttribute("action",l.url),l.skipEncodingOverride||x.attr({encoding:"multipart/form-data",enctype:"multipart/form-data"}),l.timeout&&setTimeout(function(){p=!0,c()},l.timeout);var r=[];try{if(l.extraData)for(var a in l.extraData)r.push(y('<input type="hidden" name="'+a+'" value="'+l.extraData[a]+'" />').appendTo(n)[0]);u.appendTo("body"),f.attachEvent?f.attachEvent("onload",c):f.addEventListener("load",c,!1),n.submit()}finally{n.setAttribute("action",t),e?n.setAttribute("target",e):x.removeAttr("target"),y(r).remove()}}function c(){if(!m.aborted){var e=f.contentWindow?f.contentWindow.document:f.contentDocument?f.contentDocument:f.document;if(e&&e.location.href!=l.iframeSrc){f.detachEvent?f.detachEvent("onload",c):f.removeEventListener("load",c,!1);var t=!0;try{if(p)throw"timeout";var r="xml"==l.dataType||e.XMLDocument||y.isXMLDoc(e);if(_("isXml="+r),!r&&window.opera&&(null==e.body||""==e.body.innerHTML)&&--v)return _("requeing onLoad callback, DOM not available"),void setTimeout(c,250);m.responseText=e.body?e.body.innerHTML:e.documentElement?e.documentElement.innerHTML:null,m.responseXML=e.XMLDocument?e.XMLDocument:e,m.getResponseHeader=function(e){return{"content-type":l.dataType}[e]};var a=/(json|script)/.test(l.dataType);if(a||l.textarea){var n=e.getElementsByTagName("textarea")[0];if(n)m.responseText=n.value;else if(a){var i=e.getElementsByTagName("pre")[0],o=e.getElementsByTagName("body")[0];i?m.responseText=i.textContent:o&&(m.responseText=o.innerHTML)}}else"xml"!=l.dataType||m.responseXML||null==m.responseText||(m.responseXML=g(m.responseText));h=b(m,l.dataType,l)}catch(s){_("error caught:",s),t=!1,m.error=s,l.error&&l.error.call(l.context,m,"error",s),d&&y.event.trigger("ajaxError",[m,l,s])}m.aborted&&(_("upload aborted"),t=!1),t&&(l.success&&l.success.call(l.context,h,"success",m),d&&y.event.trigger("ajaxSuccess",[m,l])),d&&y.event.trigger("ajaxComplete",[m,l]),d&&!--y.active&&y.event.trigger("ajaxStop"),l.complete&&l.complete.call(l.context,m,t?"success":"error"),setTimeout(function(){u.removeData("form-plugin-onload"),u.remove(),m.responseXML=null},100)}}}var n=x[0];if(y(":input[name=submit],:input[id=submit]",n).length)alert('Error: Form elements must not have name or id of "submit".');else{var l=y.extend(!0,{},y.ajaxSettings,s);l.context=l.context||l;var i="jqFormIO"+(new Date).getTime(),u=y('<iframe id="'+i+'" name="'+i+'" src="'+l.iframeSrc+'" />'),f=u[0];u.css({position:"absolute",top:"-1000px",left:"-1000px"});var m={aborted:0,responseText:null,responseXML:null,status:0,statusText:"n/a",getAllResponseHeaders:function(){},getResponseHeader:function(){},setRequestHeader:function(){},abort:function(){_("aborting upload...");var e="aborted";this.aborted=1,u.attr("src",l.iframeSrc),m.error=e,l.error&&l.error.call(l.context,m,"error",e),d&&y.event.trigger("ajaxError",[m,l,e]),l.complete&&l.complete.call(l.context,m,"error")}},d=l.global;if(d&&!y.active++&&y.event.trigger("ajaxStart"),d&&y.event.trigger("ajaxSend",[m,l]),l.beforeSend&&!1===l.beforeSend.call(l.context,m,l))l.global&&y.active--;else if(!m.aborted){var p=0,t=n.clk;if(t){var r=t.name;r&&!t.disabled&&(l.extraData=l.extraData||{},l.extraData[r]=t.value,"image"==t.type&&(l.extraData[r+".x"]=n.clk_x,l.extraData[r+".y"]=n.clk_y))}l.forceSync?e():setTimeout(e,10);var h,v=50,g=y.parseXML||function(e,t){return window.ActiveXObject?((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)):t=(new DOMParser).parseFromString(e,"text/xml"),t&&t.documentElement&&"parsererror"!=t.documentElement.nodeName?t:null},o=y.parseJSON||function(e){return window.eval("("+e+")")},b=function(e,t,r){var a=e.getResponseHeader("content-type")||"",n="xml"===t||!t&&0<=a.indexOf("xml"),i=n?e.responseXML:e.responseText;return n&&"parsererror"===i.documentElement.nodeName&&y.error&&y.error("parsererror"),r&&r.dataFilter&&(i=r.dataFilter(i,t)),"string"==typeof i&&("json"===t||!t&&0<=a.indexOf("json")?i=o(i):("script"===t||!t&&0<=a.indexOf("javascript"))&&y.globalEval(i)),i}}}}if(!this.length)return _("ajaxSubmit: skipping submit process - no element selected"),this;"function"==typeof s&&(s={success:s});var t=this.attr("action"),r="string"==typeof t?y.trim(t):"";r&&(r=(r.match(/^([^#]+)/)||[])[1]),r=r||window.location.href||"",s=y.extend(!0,{url:r,type:this[0].getAttribute("method")||"GET",iframeSrc:/^https/i.test(window.location.href||"")?"javascript:false":"about:blank"},s);var a={};if(this.trigger("form-pre-serialize",[this,s,a]),a.veto)return _("ajaxSubmit: submit vetoed via form-pre-serialize trigger"),this;if(s.beforeSerialize&&!1===s.beforeSerialize(this,s))return _("ajaxSubmit: submit aborted via beforeSerialize callback"),this;var n,i,o=this.formToArray(s.semantic);if(s.data)for(n in s.extraData=s.data,s.data)if(s.data[n]instanceof Array)for(var c in s.data[n])o.push({name:n,value:s.data[n][c]});else i=s.data[n],i=y.isFunction(i)?i():i,o.push({name:n,value:i});if(s.beforeSubmit&&!1===s.beforeSubmit(o,this,s))return _("ajaxSubmit: submit aborted via beforeSubmit callback"),this;if(this.trigger("form-submit-validate",[o,this,s,a]),a.veto)return _("ajaxSubmit: submit vetoed via form-submit-validate trigger"),this;var l=y.param(o);"GET"==s.type.toUpperCase()?(s.url+=(0<=s.url.indexOf("?")?"&":"?")+l,s.data=null):s.data=l;var x=this,u=[];if(s.resetForm&&u.push(function(){x.resetForm()}),s.clearForm&&u.push(function(){x.clearForm()}),!s.dataType&&s.target){var f=s.success||function(){};u.push(function(e){var t=s.replaceTarget?"replaceWith":"html";y(s.target)[t](e).each(f,arguments)})}else s.success&&u.push(s.success);s.success=function(e,t,r){for(var a=s.context||s,n=0,i=u.length;n<i;n++)u[n].apply(a,[e,t,r||x,x])};var m=0<y("input:file",this).length,d="multipart/form-data",p=x.attr("enctype")==d||x.attr("encoding")==d;return!1!==s.iframe&&(m||s.iframe||p)?s.closeKeepAlive?y.get(s.closeKeepAlive,e):e():y.ajax(s),this.trigger("form-submit-notify",[this,s]),this},y.fn.ajaxForm=function(t){if(0===this.length){var e={s:this.selector,c:this.context};return!y.isReady&&e.s?(_("DOM not ready, queuing ajaxForm"),y(function(){y(e.s,e.c).ajaxForm(t)})):_("terminating; zero elements found by selector"+(y.isReady?"":" (DOM not ready)")),this}return this.ajaxFormUnbind().bind("submit.form-plugin",function(e){e.isDefaultPrevented()||(e.preventDefault(),y(this).ajaxSubmit(t))}).bind("click.form-plugin",function(e){var t=e.target,r=y(t);if(!r.is(":submit,input:image")){var a=r.closest(":submit");if(0==a.length)return;t=a[0]}var n=this;if("image"==(n.clk=t).type)if(e.offsetX!=undefined)n.clk_x=e.offsetX,n.clk_y=e.offsetY;else if("function"==typeof y.fn.offset){var i=r.offset();n.clk_x=e.pageX-i.left,n.clk_y=e.pageY-i.top}else n.clk_x=e.pageX-t.offsetLeft,n.clk_y=e.pageY-t.offsetTop;setTimeout(function(){n.clk=n.clk_x=n.clk_y=null},100)})},y.fn.ajaxFormUnbind=function(){return this.unbind("submit.form-plugin click.form-plugin")},y.fn.formToArray=function(e){var t=[];if(0===this.length)return t;var r,a,n,i,o,s,c,l=this[0],u=e?l.getElementsByTagName("*"):l.elements;if(!u)return t;for(r=0,s=u.length;r<s;r++)if(n=(o=u[r]).name)if(e&&l.clk&&"image"==o.type)o.disabled||l.clk!=o||(t.push({name:n,value:y(o).val()}),t.push({name:n+".x",value:l.clk_x},{name:n+".y",value:l.clk_y}));else if((i=y.fieldValue(o,!0))&&i.constructor==Array)for(a=0,c=i.length;a<c;a++)t.push({name:n,value:i[a]});else null!=i&&t.push({name:n,value:i});if(!e&&l.clk){var f=y(l.clk),m=f[0];(n=m.name)&&!m.disabled&&"image"==m.type&&(t.push({name:n,value:f.val()}),t.push({name:n+".x",value:l.clk_x},{name:n+".y",value:l.clk_y}))}return t},y.fn.formSerialize=function(e){return y.param(this.formToArray(e))},y.fn.fieldSerialize=function(n){var i=[];return this.each(function(){var e=this.name;if(e){var t=y.fieldValue(this,n);if(t&&t.constructor==Array)for(var r=0,a=t.length;r<a;r++)i.push({name:e,value:t[r]});else null!=t&&i.push({name:this.name,value:t})}}),y.param(i)},y.fn.fieldValue=function(e){for(var t=[],r=0,a=this.length;r<a;r++){var n=this[r],i=y.fieldValue(n,e);null==i||i.constructor==Array&&!i.length||(i.constructor==Array?y.merge(t,i):t.push(i))}return t},y.fieldValue=function(e,t){var r=e.name,a=e.type,n=e.tagName.toLowerCase();if(t===undefined&&(t=!0),t&&(!r||e.disabled||"reset"==a||"button"==a||("checkbox"==a||"radio"==a)&&!e.checked||("submit"==a||"image"==a)&&e.form&&e.form.clk!=e||"select"==n&&-1==e.selectedIndex))return null;if("select"==n){var i=e.selectedIndex;if(i<0)return null;for(var o=[],s=e.options,c="select-one"==a,l=c?i+1:s.length,u=c?i:0;u<l;u++){var f=s[u];if(f.selected){var m=f.value;if(m||(m=f.attributes&&f.attributes.value&&!f.attributes.value.specified?f.text:f.value),c)return m;o.push(m)}}return o}return y(e).val()},y.fn.clearForm=function(){return this.each(function(){y("input,select,textarea",this).clearFields()})},y.fn.clearFields=y.fn.clearInputs=function(){return this.each(function(){var e=this.type,t=this.tagName.toLowerCase();"text"==e||"password"==e||"textarea"==t?this.value="":"checkbox"==e||"radio"==e?this.checked=!1:"select"==t&&(this.selectedIndex=-1)})},y.fn.resetForm=function(){return this.each(function(){("function"==typeof this.reset||"object"==typeof this.reset&&!this.reset.nodeType)&&this.reset()})},y.fn.enable=function(e){return e===undefined&&(e=!0),this.each(function(){this.disabled=!e})},y.fn.selected=function(r){return r===undefined&&(r=!0),this.each(function(){var e=this.type;if("checkbox"==e||"radio"==e)this.checked=r;else if("option"==this.tagName.toLowerCase()){var t=y(this).parent("select");r&&t[0]&&"select-one"==t[0].type&&t.find("option").selected(!1),this.selected=r}})}}(jQuery),function(){var t=function(e,t){return function(){return e.apply(t,arguments)}};pe.users||(pe.users={}),pe.users.CollectionSearchForm=function(){function e(e){this.container=e,this.on_ajax=t(this.on_ajax,this),this.on_page_clicked=t(this.on_page_clicked,this),this.on_form_changed=t(this.on_form_changed,this),this.lists_container=this.container.find(".Lists"),this.container.find("select").change(this.on_form_changed),this.on_form_changed()}return e.prototype.on_form_changed=function(){return this.container.ajaxSubmit(this.on_ajax)},e.prototype.on_page_clicked=function(e){var t;return pe.animated_scrolling(this.container),(t=$(e.currentTarget).attr("href"))&&$.get(t,this.on_ajax),!1},e.prototype.on_ajax=function(e){if(this.lists_container.html(e),this.container.find(".Paginator a").click(this.on_page_clicked),this.on_after_changed)return this.on_after_changed()},e.prototype.change=function(e){return this.on_after_changed=e},e}()}.call(this);