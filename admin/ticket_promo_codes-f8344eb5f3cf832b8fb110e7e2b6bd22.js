(function(){$(function(){$(".StatusChanger").click(function(){var d,f,b,e,c;b=$(this);f=b.data("status");d=b.data("transitions");if(c=_.find(d,function(a){return a!==f})){b.data("status",c);d={_method:"put",id:b.data("id"),status:c};if("deleted"===c){if(!confirm("Do you really want to DELETE this promo code?"))return;e=_.select($("[data-id="+b.data("id")+"]"),function(a){a=$(a);return!_.include(a.data("transitions"),c)});_.each(e,function(a){return $(a).remove()})}return pe.routes.Request.from_current_location("update_status_admin_event_ticket_promo_codes",
d).post(function(){e=_.select($("[data-id="+b.data("id")+"]"),function(a){a=$(a);return _.include(a.data("transitions"),c)});return _.each(e,function(a){return $(a).html(c)})})}});return pe.init_page_framework()})}).call(this);
