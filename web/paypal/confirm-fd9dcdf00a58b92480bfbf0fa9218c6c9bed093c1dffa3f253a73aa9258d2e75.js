!function(m){function t(){function i(t){var e=t<1e12?s?performance.now()+performance.timing.navigationStart:n():t||n();1e3<=e-a&&(S._updateTargets(),a=e),o(i)}this.regional=[],this.regional[""]={labels:["Years","Months","Weeks","Days","Hours","Minutes","Seconds"],labels1:["Year","Month","Week","Day","Hour","Minute","Second"],compactLabels:["y","m","w","d"],whichLabels:null,digits:["0","1","2","3","4","5","6","7","8","9"],timeSeparator:":",isRTL:!1},this._defaults={until:null,since:null,timezone:null,serverSync:null,format:"dHMS",layout:"",compact:!1,significant:0,description:"",expiryUrl:"",expiryText:"",alwaysExpire:!1,onExpiry:null,onTick:null,tickInterval:1},m.extend(this._defaults,this.regional[""]),this._serverSyncs=[];var n="function"==typeof Date.now?Date.now:function(){return(new Date).getTime()},s=window.performance&&"function"==typeof window.performance.now,o=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||null,a=0;!o||m.noRequestAnimationFrame?(m.noRequestAnimationFrame=null,setInterval(function(){S._updateTargets()},980)):(a=window.animationStartTime||window.webkitAnimationStartTime||window.mozAnimationStartTime||window.oAnimationStartTime||window.msAnimationStartTime||n(),o(i))}function i(t,e){return"option"==t&&(0==e.length||1==e.length&&"string"==typeof e[0])||-1<m.inArray(t,n)}var y=0,T=1,D=2,v=3,b=4,C=5,M=6;m.extend(t.prototype,{markerClassName:"hasCountdown",propertyName:"countdown",_rtlClass:"countdown_rtl",_sectionClass:"countdown_section",_amountClass:"countdown_amount",_rowClass:"countdown_row",_holdingClass:"countdown_holding",_showClass:"countdown_show",_descrClass:"countdown_descr",_timerTargets:[],setDefaults:function(t){this._resetExtraLabels(this._defaults,t),m.extend(this._defaults,t||{})},UTCDate:function(t,e,i,n,s,o,a,r){"object"==typeof e&&e.constructor==Date&&(r=e.getMilliseconds(),a=e.getSeconds(),o=e.getMinutes(),s=e.getHours(),n=e.getDate(),i=e.getMonth(),e=e.getFullYear());var l=new Date;return l.setUTCFullYear(e),l.setUTCDate(1),l.setUTCMonth(i||0),l.setUTCDate(n||1),l.setUTCHours(s||0),l.setUTCMinutes((o||0)-(Math.abs(t)<30?60*t:t)),l.setUTCSeconds(a||0),l.setUTCMilliseconds(r||0),l},periodsToSeconds:function(t){return 31557600*t[0]+2629800*t[1]+604800*t[2]+86400*t[3]+3600*t[4]+60*t[5]+t[6]},_attachPlugin:function(t,e){if(!(t=m(t)).hasClass(this.markerClassName)){var i={options:m.extend({},this._defaults),_periods:[0,0,0,0,0,0,0]};t.addClass(this.markerClassName).data(this.propertyName,i),this._optionPlugin(t,e)}},_addTarget:function(t){this._hasTarget(t)||this._timerTargets.push(t)},_hasTarget:function(t){return-1<m.inArray(t,this._timerTargets)},_removeTarget:function(e){this._timerTargets=m.map(this._timerTargets,function(t){return t==e?null:t})},_updateTargets:function(){for(var t=this._timerTargets.length-1;0<=t;t--)this._updateCountdown(this._timerTargets[t])},_optionPlugin:function(t,e,i){var n=(t=m(t)).data(this.propertyName);if(!e||"string"==typeof e&&null==i){var s=e;return(e=(n||{}).options)&&s?e[s]:e}if(t.hasClass(this.markerClassName)){if("string"==typeof(e=e||{})){s=e;(e={})[s]=i}e.layout&&(e.layout=e.layout.replace(/&lt;/g,"<").replace(/&gt;/g,">")),this._resetExtraLabels(n.options,e);var o=n.options.timezone!=e.timezone;m.extend(n.options,e),this._adjustSettings(t,n,null!=e.until||null!=e.since||o);var a=new Date;(n._since&&n._since<a||n._until&&n._until>a)&&this._addTarget(t[0]),this._updateCountdown(t,n)}},_updateCountdown:function(t,e){var i=m(t);if(e=e||i.data(this.propertyName)){if(i.html(this._generateHTML(e)).toggleClass(this._rtlClass,e.options.isRTL),m.isFunction(e.options.onTick)){var n="lap"!=e._hold?e._periods:this._calculatePeriods(e,e._show,e.options.significant,new Date);1!=e.options.tickInterval&&this.periodsToSeconds(n)%e.options.tickInterval!=0||e.options.onTick.apply(t,[n])}if("pause"!=e._hold&&(e._since?e._now.getTime()<e._since.getTime():e._now.getTime()>=e._until.getTime())&&!e._expiring){if(e._expiring=!0,this._hasTarget(t)||e.options.alwaysExpire){if(this._removeTarget(t),m.isFunction(e.options.onExpiry)&&e.options.onExpiry.apply(t,[]),e.options.expiryText){var s=e.options.layout;e.options.layout=e.options.expiryText,this._updateCountdown(t,e),e.options.layout=s}e.options.expiryUrl&&(window.location=e.options.expiryUrl)}e._expiring=!1}else"pause"==e._hold&&this._removeTarget(t);i.data(this.propertyName,e)}},_resetExtraLabels:function(t,e){var i=!1;for(var n in e)if("whichLabels"!=n&&n.match(/[Ll]abels/)){i=!0;break}if(i)for(var n in t)n.match(/[Ll]abels[02-9]|compactLabels1/)&&(t[n]=null)},_adjustSettings:function(t,e,i){for(var n,s=0,o=null,a=0;a<this._serverSyncs.length;a++)if(this._serverSyncs[a][0]==e.options.serverSync){o=this._serverSyncs[a][1];break}if(null!=o)s=e.options.serverSync?o:0,n=new Date;else{var r=m.isFunction(e.options.serverSync)?e.options.serverSync.apply(t,[]):null;n=new Date,s=r?n.getTime()-r.getTime():0,this._serverSyncs.push([e.options.serverSync,s])}var l=e.options.timezone;l=null==l?-n.getTimezoneOffset():l,(i||!i&&null==e._until&&null==e._since)&&(e._since=e.options.since,null!=e._since&&(e._since=this.UTCDate(l,this._determineTime(e._since,null)),e._since&&s&&e._since.setMilliseconds(e._since.getMilliseconds()+s)),e._until=this.UTCDate(l,this._determineTime(e.options.until,n)),s&&e._until.setMilliseconds(e._until.getMilliseconds()+s)),e._show=this._determineShow(e)},_destroyPlugin:function(t){(t=m(t)).hasClass(this.markerClassName)&&(this._removeTarget(t[0]),t.removeClass(this.markerClassName).empty().removeData(this.propertyName))},_pausePlugin:function(t){this._hold(t,"pause")},_lapPlugin:function(t){this._hold(t,"lap")},_resumePlugin:function(t){this._hold(t,null)},_hold:function(t,e){var i=m.data(t,this.propertyName);if(i){if("pause"==i._hold&&!e){i._periods=i._savePeriods;var n=i._since?"-":"+";i[i._since?"_since":"_until"]=this._determineTime(n+i._periods[0]+"y"+n+i._periods[1]+"o"+n+i._periods[2]+"w"+n+i._periods[3]+"d"+n+i._periods[4]+"h"+n+i._periods[5]+"m"+n+i._periods[6]+"s"),this._addTarget(t)}i._hold=e,i._savePeriods="pause"==e?i._periods:null,m.data(t,this.propertyName,i),this._updateCountdown(t,i)}},_getTimesPlugin:function(t){var e=m.data(t,this.propertyName);return e?"pause"==e._hold?e._savePeriods:e._hold?this._calculatePeriods(e,e._show,e.options.significant,new Date):e._periods:null},_determineTime:function(t,e){var i=function(t){var e=new Date;return e.setTime(e.getTime()+1e3*t),e},n=null==t?e:"string"==typeof t?function(t){t=t.toLowerCase();for(var e=new Date,i=e.getFullYear(),n=e.getMonth(),s=e.getDate(),o=e.getHours(),a=e.getMinutes(),r=e.getSeconds(),l=/([+-]?[0-9]+)\s*(s|m|h|d|w|o|y)?/g,p=l.exec(t);p;){switch(p[2]||"s"){case"s":r+=parseInt(p[1],10);break;case"m":a+=parseInt(p[1],10);break;case"h":o+=parseInt(p[1],10);break;case"d":s+=parseInt(p[1],10);break;case"w":s+=7*parseInt(p[1],10);break;case"o":n+=parseInt(p[1],10),s=Math.min(s,S._getDaysInMonth(i,n));break;case"y":i+=parseInt(p[1],10),s=Math.min(s,S._getDaysInMonth(i,n))}p=l.exec(t)}return new Date(i,n,s,o,a,r,0)}(t):"number"==typeof t?i(t):t;return n&&n.setMilliseconds(0),n},_getDaysInMonth:function(t,e){return 32-new Date(t,e,32).getDate()},_normalLabels:function(t){return t},_generateHTML:function(i){var n=this;i._periods=i._hold?i._periods:this._calculatePeriods(i,i._show,i.options.significant,new Date);for(var t=!1,e=0,s=i.options.significant,o=m.extend({},i._show),a=y;a<=M;a++)t|="?"==i._show[a]&&0<i._periods[a],o[a]="?"!=i._show[a]||t?i._show[a]:null,e+=o[a]?1:0,s-=0<i._periods[a]?1:0;var r=[!1,!1,!1,!1,!1,!1,!1];for(a=M;y<=a;a--)i._show[a]&&(i._periods[a]?r[a]=!0:(r[a]=0<s,s--));var l=i.options.compact?i.options.compactLabels:i.options.labels,p=i.options.whichLabels||this._normalLabels,_=function(t){var e=i.options["compactLabels"+p(i._periods[t])];return o[t]?n._translateDigits(i,i._periods[t])+(e?e[t]:l[t])+" ":""},u=function(t){var e=i.options["labels"+p(i._periods[t])];return!i.options.significant&&o[t]||i.options.significant&&r[t]?'<span class="'+S._sectionClass+'"><span class="'+S._amountClass+'">'+n._translateDigits(i,i._periods[t])+"</span><br/>"+(e?e[t]:l[t])+"</span>":""};return i.options.layout?this._buildLayout(i,o,i.options.layout,i.options.compact,i.options.significant,r):(i.options.compact?'<span class="'+this._rowClass+" "+this._amountClass+(i._hold?" "+this._holdingClass:"")+'">'+_(y)+_(T)+_(D)+_(v)+(o[b]?this._minDigits(i,i._periods[b],2):"")+(o[C]?(o[b]?i.options.timeSeparator:"")+this._minDigits(i,i._periods[C],2):"")+(o[M]?(o[b]||o[C]?i.options.timeSeparator:"")+this._minDigits(i,i._periods[M],2):""):'<span class="'+this._rowClass+" "+this._showClass+(i.options.significant||e)+(i._hold?" "+this._holdingClass:"")+'">'+u(y)+u(T)+u(D)+u(v)+u(b)+u(C)+u(M))+"</span>"+(i.options.description?'<span class="'+this._rowClass+" "+this._descrClass+'">'+i.options.description+"</span>":"")},_buildLayout:function(i,t,e,n,s,o){for(var a=i.options[n?"compactLabels":"labels"],r=i.options.whichLabels||this._normalLabels,l=function(t){return(i.options[(n?"compactLabels":"labels")+r(i._periods[t])]||a)[t]},p=function(t,e){return i.options.digits[Math.floor(t/e)%10]},_={desc:i.options.description,sep:i.options.timeSeparator,yl:l(y),yn:this._minDigits(i,i._periods[y],1),ynn:this._minDigits(i,i._periods[y],2),ynnn:this._minDigits(i,i._periods[y],3),y1:p(i._periods[y],1),y10:p(i._periods[y],10),y100:p(i._periods[y],100),y1000:p(i._periods[y],1e3),ol:l(T),on:this._minDigits(i,i._periods[T],1),onn:this._minDigits(i,i._periods[T],2),onnn:this._minDigits(i,i._periods[T],3),o1:p(i._periods[T],1),o10:p(i._periods[T],10),o100:p(i._periods[T],100),o1000:p(i._periods[T],1e3),wl:l(D),wn:this._minDigits(i,i._periods[D],1),wnn:this._minDigits(i,i._periods[D],2),wnnn:this._minDigits(i,i._periods[D],3),w1:p(i._periods[D],1),w10:p(i._periods[D],10),w100:p(i._periods[D],100),w1000:p(i._periods[D],1e3),dl:l(v),dn:this._minDigits(i,i._periods[v],1),dnn:this._minDigits(i,i._periods[v],2),dnnn:this._minDigits(i,i._periods[v],3),d1:p(i._periods[v],1),d10:p(i._periods[v],10),d100:p(i._periods[v],100),d1000:p(i._periods[v],1e3),hl:l(b),hn:this._minDigits(i,i._periods[b],1),hnn:this._minDigits(i,i._periods[b],2),hnnn:this._minDigits(i,i._periods[b],3),h1:p(i._periods[b],1),h10:p(i._periods[b],10),h100:p(i._periods[b],100),h1000:p(i._periods[b],1e3),ml:l(C),mn:this._minDigits(i,i._periods[C],1),mnn:this._minDigits(i,i._periods[C],2),mnnn:this._minDigits(i,i._periods[C],3),m1:p(i._periods[C],1),m10:p(i._periods[C],10),m100:p(i._periods[C],100),m1000:p(i._periods[C],1e3),sl:l(M),sn:this._minDigits(i,i._periods[M],1),snn:this._minDigits(i,i._periods[M],2),snnn:this._minDigits(i,i._periods[M],3),s1:p(i._periods[M],1),s10:p(i._periods[M],10),s100:p(i._periods[M],100),s1000:p(i._periods[M],1e3)},u=e,c=y;c<=M;c++){var d="yowdhms".charAt(c),h=new RegExp("\\{"+d+"<\\}([\\s\\S]*)\\{"+d+">\\}","g");u=u.replace(h,!s&&t[c]||s&&o[c]?"$1":"")}return m.each(_,function(t,e){var i=new RegExp("\\{"+t+"\\}","g");u=u.replace(i,e)}),u},_minDigits:function(t,e,i){return(e=""+e).length>=i?this._translateDigits(t,e):(e="0000000000"+e,this._translateDigits(t,e.substr(e.length-i)))},_translateDigits:function(e,t){return(""+t).replace(/[0-9]/g,function(t){return e.options.digits[t]})},_determineShow:function(t){var e=t.options.format,i=[];return i[y]=e.match("y")?"?":e.match("Y")?"!":null,i[T]=e.match("o")?"?":e.match("O")?"!":null,i[D]=e.match("w")?"?":e.match("W")?"!":null,i[v]=e.match("d")?"?":e.match("D")?"!":null,i[b]=e.match("h")?"?":e.match("H")?"!":null,i[C]=e.match("m")?"?":e.match("M")?"!":null,i[M]=e.match("s")?"?":e.match("S")?"!":null,i},_calculatePeriods:function(t,i,e,n){t._now=n,t._now.setMilliseconds(0);var s=new Date(t._now.getTime());t._since?n.getTime()<t._since.getTime()?t._now=n=s:n=t._since:(s.setTime(t._until.getTime()),n.getTime()>t._until.getTime()&&(t._now=n=s));var o=[0,0,0,0,0,0,0];if(i[y]||i[T]){var a=S._getDaysInMonth(n.getFullYear(),n.getMonth()),r=S._getDaysInMonth(s.getFullYear(),s.getMonth()),l=s.getDate()==n.getDate()||s.getDate()>=Math.min(a,r)&&n.getDate()>=Math.min(a,r),p=function(t){return 60*(60*t.getHours()+t.getMinutes())+t.getSeconds()},_=Math.max(0,12*(s.getFullYear()-n.getFullYear())+s.getMonth()-n.getMonth()+(s.getDate()<n.getDate()&&!l||l&&p(s)<p(n)?-1:0));o[y]=i[y]?Math.floor(_/12):0,o[T]=i[T]?_-12*o[y]:0;var u=(n=new Date(n.getTime())).getDate()==a,c=S._getDaysInMonth(n.getFullYear()+o[y],n.getMonth()+o[T]);n.getDate()>c&&n.setDate(c),n.setFullYear(n.getFullYear()+o[y]),n.setMonth(n.getMonth()+o[T]),u&&n.setDate(c)}var d=Math.floor((s.getTime()-n.getTime())/1e3),h=function(t,e){o[t]=i[t]?Math.floor(d/e):0,d-=o[t]*e};if(h(D,604800),h(v,86400),h(b,3600),h(C,60),h(M,1),0<d&&!t._since)for(var m=[1,12,4.3482,7,24,60,60],g=M,f=1,w=M;y<=w;w--)i[w]&&(o[g]>=f&&(o[g]=0,d=1),0<d&&(o[w]++,d=0,g=w,f=1)),f*=m[w];if(e)for(w=y;w<=M;w++)e&&o[w]?e--:e||(o[w]=0);return o}});var n=["getTimes"];m.fn.countdown=function(t){var e=Array.prototype.slice.call(arguments,1);return i(t,e)?S["_"+t+"Plugin"].apply(S,[this[0]].concat(e)):this.each(function(){if("string"==typeof t){if(!S["_"+t+"Plugin"])throw"Unknown command: "+t;S["_"+t+"Plugin"].apply(S,[this].concat(e))}else S._attachPlugin(this,t||{})})};var S=m.countdown=new t}(jQuery),function(){pe.on_expire=function(){return window.onbeforeunload=null,$(".Timer").html("0:00"),alert("The time limit has been exceeded and your tickets have been released. \n\nThe purpose of the time limit is to give all fans a fair shot at tickets and ensure tickets are available to as many people as possible. We are sorry for the inconvenience."),$("body").css("cursor","wait"),pe.routes.Request.factory("api_ticket_orders_disable_pending").post(function(){return window.location=pe.event_tickets_path})},pe.on_tick=function(){return $(".Timer").html($(".Timer").html().replace(/0(\d+):/,"$1:"))},$(function(){return pe.init_page_framework(function(){return pe.routes.Request.factory("api_ticket_orders_countdown_seconds").get(function(t){var e;return e=new Date,e=new Date(e.getTime()+1e3*t.data.seconds),$(".Timer").countdown({until:e,compact:!0,format:"MS",description:"",onExpiry:pe.on_expire,onTick:pe.on_tick})})})})}.call(this);