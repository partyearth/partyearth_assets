pe.CityVenueList=function(a,b,c){pe.init_widget(this,a);this.container.html(this.add_template());this.venues=b;this.mode=c||pe.CityVenueList.modes.NORMAL;this.venue_details_div=this.container.find(".VenueDetails");this.venue_links=this.container.find(".VenueLinks");this.venue_links.click(this.callback(this.change_venue_details))};pe.CityVenueList.modes={NORMAL:"NORMAL",TOP_FIVE:"TOP_FIVE"};
pe.CityVenueList.prototype.add_template=function(){var a="";jQuery.each(this.venues,function(b,c){var d="";""!==c.comment&&(d=" ("+c.comment+")");a=a+'<p> <span class="VenueLinks fake_link"    data_venue_index="'+b+'">'+c.name+"</span>"+d+"</p>"});return'<div class="VenueLinksDiv">'+a+'</div><div class="VenueDetails">'+this.venue_details_template(0)+"</div>"};
pe.CityVenueList.prototype.change_venue_details=function(a){this.venue_details_div.html(this.venue_details_template(parseInt($(a.target).attr("data_venue_index"),10)));return!1};
pe.CityVenueList.prototype.venue_details_template=function(a){var a=this.venues[a],b="";this.mode===pe.CityVenueList.modes.TOP_FIVE&&(b="<p>",a.is_hotspot&&(b+="[Hotspot] "),a.is_day_spot&&(b+=" [Day Spot] "),a.is_night_spot&&(b+=" [Night Spot]"),b+="<p>");return pe.templatize('<p><a href="/venues/{{venue_url}}">{{name}}</a></p>{{venue_hotspot_info}}<p><a href="/neighborhoods/{{neighborhood_url}}">{{neighborhood}}</a></p><p>{{type}}</p><p>{{scene}}<a href="/venues/{{venue_url}}">read more</a></p>',{venue_url:a.venue_url_param,
name:a.name,neighborhood_url:a.neighborhood_url_param,neighborhood:a.neighborhood,type:a.type,scene:a.scene,venue_hotspot_info:b})};
