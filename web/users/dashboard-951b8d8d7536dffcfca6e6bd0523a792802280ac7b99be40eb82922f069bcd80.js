!function(o){o.fn.zclip=function(s){if("object"==typeof s&&!s.length){var n=o.extend({path:"ZeroClipboard.swf",copy:null,beforeCopy:null,afterCopy:null,clickAfter:!0,setHandCursor:!0,setCSSEffects:!0},s);return this.each(function(){var i=o(this);if(i.is(":visible")&&("string"==typeof n.copy||o.isFunction(n.copy))){ZeroClipboard.setMoviePath(n.path);var t=new ZeroClipboard.Client;o.isFunction(n.copy)&&i.bind("zClip_copy",n.copy),o.isFunction(n.beforeCopy)&&i.bind("zClip_beforeCopy",n.beforeCopy),o.isFunction(n.afterCopy)&&i.bind("zClip_afterCopy",n.afterCopy),t.setHandCursor(n.setHandCursor),t.setCSSEffects(n.setCSSEffects),t.addEventListener("mouseOver",function(){i.trigger("mouseenter")}),t.addEventListener("mouseOut",function(){i.trigger("mouseleave")}),t.addEventListener("mouseDown",function(){i.trigger("mousedown"),o.isFunction(n.copy)?t.setText(i.triggerHandler("zClip_copy")):t.setText(n.copy),o.isFunction(n.beforeCopy)&&i.trigger("zClip_beforeCopy")}),t.addEventListener("complete",function(t,e){o.isFunction(n.afterCopy)?i.trigger("zClip_afterCopy"):(500<e.length&&(e=e.substr(0,500)+"...\n\n("+(e.length-500)+" characters not shown)"),i.removeClass("hover"),alert("Copied text to clipboard:\n\n "+e)),n.clickAfter&&i.trigger("click")}),t.glue(i[0],i.parent()[0]),o(window).bind("load resize",function(){t.reposition()})}})}if("string"==typeof s)return this.each(function(){var t=o(this);s=s.toLowerCase();var e=t.data("zclipId"),i=o("#"+e+".zclip");"remove"==s?(i.remove(),t.removeClass("active hover")):"hide"==s?(i.hide(),t.removeClass("active hover")):"show"==s&&i.show()})}}(jQuery);var ZeroClipboard={version:"1.0.7",clients:{},moviePath:"ZeroClipboard.swf",nextId:1,$:function(t){return"string"==typeof t&&(t=document.getElementById(t)),t.addClass||(t.hide=function(){this.style.display="none"},t.show=function(){this.style.display=""},t.addClass=function(t){this.removeClass(t),this.className+=" "+t},t.removeClass=function(t){for(var e=this.className.split(/\s+/),i=-1,s=0;s<e.length;s++)e[s]==t&&(i=s,s=e.length);return-1<i&&(e.splice(i,1),this.className=e.join(" ")),this},t.hasClass=function(t){return!!this.className.match(new RegExp("\\s*"+t+"\\s*"))}),t},setMoviePath:function(t){this.moviePath=t},dispatch:function(t,e,i){var s=this.clients[t];s&&s.receiveEvent(e,i)},register:function(t,e){this.clients[t]=e},getDOMObjectPosition:function(t,e){var i={left:0,top:0,width:t.width?t.width:t.offsetWidth,height:t.height?t.height:t.offsetHeight};return t&&t!=e&&(i.left+=t.offsetLeft,i.top+=t.offsetTop),i},Client:function(t){this.handlers={},this.id=ZeroClipboard.nextId++,this.movieId="ZeroClipboardMovie_"+this.id,ZeroClipboard.register(this.id,this),t&&this.glue(t)}};ZeroClipboard.Client.prototype={id:0,ready:!1,movie:null,clipText:"",handCursorEnabled:!0,cssEffects:!0,handlers:null,glue:function(t,e,i){this.domElement=ZeroClipboard.$(t);var s=99;this.domElement.style.zIndex&&(s=parseInt(this.domElement.style.zIndex,10)+1),"string"==typeof e?e=ZeroClipboard.$(e):void 0===e&&(e=document.getElementsByTagName("body")[0]);var n=ZeroClipboard.getDOMObjectPosition(this.domElement,e);this.div=document.createElement("div"),this.div.className="zclip",this.div.id="zclip-"+this.movieId,$(this.domElement).data("zclipId","zclip-"+this.movieId);var o=this.div.style;if(o.position="absolute",o.left=n.left+"px",o.top=n.top+"px",o.width=n.width+"px",o.height=n.height+"px",o.zIndex=s,"object"==typeof i)for(addedStyle in i)o[addedStyle]=i[addedStyle];e.appendChild(this.div),this.div.innerHTML=this.getHTML(n.width,n.height)},getHTML:function(t,e){var i="",s="id="+this.id+"&width="+t+"&height="+e;navigator.userAgent.match(/MSIE/)?i+='<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+(location.href.match(/^https/i)?"https://":"http://")+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+t+'" height="'+e+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+ZeroClipboard.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+s+'"/><param name="wmode" value="transparent"/></object>':i+='<embed id="'+this.movieId+'" src="'+ZeroClipboard.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+t+'" height="'+e+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+s+'" wmode="transparent" />';return i},hide:function(){this.div&&(this.div.style.left="-2000px")},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide(),this.div.innerHTML="";var t=document.getElementsByTagName("body")[0];try{t.removeChild(this.div)}catch(e){}this.domElement=null,this.div=null}},reposition:function(t){if(t&&(this.domElement=ZeroClipboard.$(t),this.domElement||this.hide()),this.domElement&&this.div){var e=ZeroClipboard.getDOMObjectPosition(this.domElement),i=this.div.style;i.left=e.left+"px",i.top=e.top+"px"}},setText:function(t){this.clipText=t,this.ready&&this.movie.setText(t)},addEventListener:function(t,e){t=t.toString().toLowerCase().replace(/^on/,""),this.handlers[t]||(this.handlers[t]=[]),this.handlers[t].push(e)},setHandCursor:function(t){this.handCursorEnabled=t,this.ready&&this.movie.setHandCursor(t)},setCSSEffects:function(t){this.cssEffects=!!t},receiveEvent:function(t,e){switch(t=t.toString().toLowerCase().replace(/^on/,"")){case"load":if(this.movie=document.getElementById(this.movieId),!this.movie){var i=this;return void setTimeout(function(){i.receiveEvent("load",null)},1)}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){i=this;return setTimeout(function(){i.receiveEvent("load",null)},100),void(this.ready=!0)}this.ready=!0;try{this.movie.setText(this.clipText)}catch(r){}try{this.movie.setHandCursor(this.handCursorEnabled)}catch(r){}break;case"mouseover":this.domElement&&this.cssEffects&&(this.domElement.addClass("hover"),this.recoverActive&&this.domElement.addClass("active"));break;case"mouseout":this.domElement&&this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0),this.domElement.removeClass("hover"));break;case"mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case"mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[t])for(var s=0,n=this.handlers[t].length;s<n;s++){var o=this.handlers[t][s];"function"==typeof o?o(this,e):"object"==typeof o&&2==o.length?o[0][o[1]](this,e):"string"==typeof o&&window[o](this,e)}}},function(){pe.helpers.init_copy_links=function(t){var e;return(e=t?t.find(".CopyLinkButton"):$(".CopyLinkButton")).each(function(){return $(this).zclip({path:$(this).data("path"),copy:function(){var t;return t=$($(this).data("target")),_.include(["select","input","textarea"],t.attr("tagName").toLowerCase())?t.val():t.html()}})}),0<e.length}}.call(this),function(){var s=function(t,e){return function(){return t.apply(e,arguments)}};pe.TicketButtonGenerator=function(){function t(t){var e,i;this.container=t,this.update_image_style=s(this.update_image_style,this),this.update_text=s(this.update_text,this),this.update_color=s(this.update_color,this),this.update_size=s(this.update_size,this),this.reset=s(this.reset,this),this.generate=s(this.generate,this),this.disabled=!1,this.image_selector=this.container.find(".ImageSelector"),this.button_text_toggler=this.container.find(".ButtonTextToggler"),this.button_text_input=this.container.find(".ButtonTextInput"),this.size_input=this.container.find(".SizeInput"),this.generate_button=this.container.find(".GenerateButton"),this.debug_container=this.container.find(".DebugContainer"),this.code_container=this.container.find(".CodeContainer"),this.preview=this.container.find(".Preview"),this.reset_button=this.container.find(".ResetButton"),this.color_container=this.container.find(".ColorInput"),this.button_text_toggler.change(this.update_text),this.button_text_input.keydown(this.update_text),this.button_text_input.keyup(this.update_text),this.size_input.change(this.update_size),this.image_selector.change(this.update_image_style),this.color_container.change(this.update_color),this.generate_button.click(this.generate),this.reset_button.click(this.reset),this.button_text_toggler.change((e=this,function(){if(!e.default_text_selected())return e.button_text_input.focus()})),this.container.find("input").change((i=this,function(){return i.code_container.css("opacity",.5)})),this.update_size(),this.update_text(),this.update_image_style(),this.code_container.css("opacity",.5),this.default_state=this.serialize()}return t.prototype.generate=function(){var e;if(!this.disabled)return this.generate_button.html("Please wait..."),this.generate_button.css("opacity",.5),this.generate_button.css("cursor","wait"),pe.routes.Request.from_current_location("generate_button_user_dashboard_event",this.serialize()).get((e=this,function(t){return e.generate_button.html("Generate"),e.generate_button.css("cursor","pointer"),e.generate_button.css("opacity",1),e.disabled=!1,e.debug_container.html(t),e.code_container.val(t),e.code_container.css("opacity",1)})),this.disabled=!0},t.prototype.serialize=function(){return{height:this.height()||this.actual_height(),width:this.width()||this.actual_width(),outer_width:this.actual_width(),outer_height:this.actual_height(),text:this.text(),style:this.style(),image_style:this.image_style(),color:this.color()}},t.prototype.reset=function(){if(confirm("Are you sure you want to reset the button back to its default settings?"))return this.button_text_toggler.filter(":first").click(),this.size_input.filter(":last").click(),this.image_selector.filter(":first").click(),this.button_text_input.val(""),this.code_container.val("")},t.prototype.image_style=function(){return this.image_selector.filter(":checked").val()},t.prototype.size=function(){return this.size_input.filter(":checked").data()},t.prototype.width=function(){return this.size().width},t.prototype.height=function(){return this.size().height},t.prototype.style=function(){return this.size().style},t.prototype.color=function(){return this.color_container.filter(":checked").val()},t.prototype.actual_width=function(){return this.preview.outerWidth()},t.prototype.actual_height=function(){return this.preview.outerHeight()},t.prototype.update_size=function(){var e;return this.preview.css("width",this.width()+"px"),this.preview.css("height",this.height()+"px"),_.each(this.size_input,(e=this,function(t){return e.preview.removeClass($(t).data().style)})),this.preview.addClass(this.style())},t.prototype.update_color=function(){var e;return _.each(this.color_container,(e=this,function(t){return e.preview.removeClass($(t).val())})),this.preview.addClass(this.color())},t.prototype.update_text=function(t){return this.text().length<=25?this.preview.find(".Text").html(this.text()):(this.button_text_input.val(this.text().substring(0,25)),t.preventDefault(),t.stopPropagation())},t.prototype.update_image_style=function(){var e;return _.each(this.image_selector,(e=this,function(t){return e.preview.removeClass($(t).val())})),this.preview.addClass(this.image_style())},t.prototype.default_text_selected=function(){return"Buy Tickets"===this.button_text_toggler.filter(":checked").val()},t.prototype.text=function(){return this.default_text_selected()?"Buy Tickets":this.button_text_input.val().replace(/<\/?[^>]+(>|$)/g,"")||"Buy Tickets"},t}()}.call(this),function(){$(function(){return $("#Tabs").tabs(),pe.create_button_link=$(".CreateButton"),pe.create_button_wrapper=$(".CreateButtonWrapper"),pe.create_widget_link=$(".CreateWidget"),pe.create_widget_wrapper=$(".CreateWidgetWrapper"),pe.create_widget_link.click(function(){return!pe.create_widget_link.hasClass("Disabled")&&(pe.create_button_link.removeClass("Disabled"),pe.create_button_wrapper.hide(),pe.create_widget_link.addClass("Disabled"),pe.create_widget_wrapper.show(),pe.iframe_loaded?void 0:(pe.iframe_loaded=pe.helpers.init_copy_links(pe.create_widget_wrapper),$(".TicketWrapper").html($(".WidgetCodeContainer").val())))}),pe.create_button_link.click(function(){return!pe.create_button_link.hasClass("Disabled")&&(pe.create_widget_link.removeClass("Disabled"),pe.create_widget_wrapper.hide(),pe.create_button_link.addClass("Disabled"),pe.create_button_wrapper.show(),pe.tbg?void 0:(pe.helpers.init_copy_links(pe.create_button_wrapper),pe.tbg=new pe.TicketButtonGenerator($(".TicketButtonGenerator"))))}),$('a[href="#PromoteEvent"]').click(function(){return pe.create_widget_link.click()}),$('a[href="#Links"]').click(function(){if(!pe.links_set)return pe.links_set=pe.helpers.init_copy_links($("#Links"))}),pe.init_page_framework()})}.call(this);