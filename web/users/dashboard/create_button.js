(function(a){a.fn.zclip=function(c){if("object"==typeof c&&!c.length){var b=a.extend({path:"ZeroClipboard.swf",copy:null,beforeCopy:null,afterCopy:null,clickAfter:!0,setHandCursor:!0,setCSSEffects:!0},c);return this.each(function(){var d=a(this);if(d.is(":visible")&&("string"==typeof b.copy||a.isFunction(b.copy))){ZeroClipboard.setMoviePath(b.path);var c=new ZeroClipboard.Client;a.isFunction(b.copy)&&d.bind("zClip_copy",b.copy);a.isFunction(b.beforeCopy)&&d.bind("zClip_beforeCopy",b.beforeCopy);a.isFunction(b.afterCopy)&&
d.bind("zClip_afterCopy",b.afterCopy);c.setHandCursor(b.setHandCursor);c.setCSSEffects(b.setCSSEffects);c.addEventListener("mouseOver",function(){d.trigger("mouseenter")});c.addEventListener("mouseOut",function(){d.trigger("mouseleave")});c.addEventListener("mouseDown",function(){d.trigger("mousedown");a.isFunction(b.copy)?c.setText(d.triggerHandler("zClip_copy")):c.setText(b.copy);a.isFunction(b.beforeCopy)&&d.trigger("zClip_beforeCopy")});c.addEventListener("complete",function(c,e){a.isFunction(b.afterCopy)?
d.trigger("zClip_afterCopy"):(500<e.length&&(e=e.substr(0,500)+"...\n\n("+(e.length-500)+" characters not shown)"),d.removeClass("hover"),alert("Copied text to clipboard:\n\n "+e));b.clickAfter&&d.trigger("click")});c.glue(d[0],d.parent()[0]);a(window).bind("load resize",function(){c.reposition()})}})}if("string"==typeof c)return this.each(function(){var b=a(this);c=c.toLowerCase();var e=b.data("zclipId"),e=a("#"+e+".zclip");"remove"==c?(e.remove(),b.removeClass("active hover")):"hide"==c?(e.hide(),
b.removeClass("active hover")):"show"==c&&e.show()})}})(jQuery);
var ZeroClipboard={version:"1.0.7",clients:{},moviePath:"ZeroClipboard.swf",nextId:1,$:function(a){"string"==typeof a&&(a=document.getElementById(a));a.addClass||(a.hide=function(){this.style.display="none"},a.show=function(){this.style.display=""},a.addClass=function(a){this.removeClass(a);this.className+=" "+a},a.removeClass=function(a){for(var b=this.className.split(/\s+/),d=-1,e=0;e<b.length;e++)b[e]==a&&(d=e,e=b.length);-1<d&&(b.splice(d,1),this.className=b.join(" "));return this},a.hasClass=
function(a){return!!this.className.match(RegExp("\\s*"+a+"\\s*"))});return a},setMoviePath:function(a){this.moviePath=a},dispatch:function(a,c,b){(a=this.clients[a])&&a.receiveEvent(c,b)},register:function(a,c){this.clients[a]=c},getDOMObjectPosition:function(a,c){var b={left:0,top:0,width:a.width?a.width:a.offsetWidth,height:a.height?a.height:a.offsetHeight};a&&a!=c&&(b.left+=a.offsetLeft,b.top+=a.offsetTop);return b},Client:function(a){this.handlers={};this.id=ZeroClipboard.nextId++;this.movieId=
"ZeroClipboardMovie_"+this.id;ZeroClipboard.register(this.id,this);a&&this.glue(a)}};
ZeroClipboard.Client.prototype={id:0,ready:!1,movie:null,clipText:"",handCursorEnabled:!0,cssEffects:!0,handlers:null,glue:function(a,c,b){this.domElement=ZeroClipboard.$(a);a=99;this.domElement.style.zIndex&&(a=parseInt(this.domElement.style.zIndex,10)+1);"string"==typeof c?c=ZeroClipboard.$(c):"undefined"==typeof c&&(c=document.getElementsByTagName("body")[0]);var d=ZeroClipboard.getDOMObjectPosition(this.domElement,c);this.div=document.createElement("div");this.div.className="zclip";this.div.id=
"zclip-"+this.movieId;$(this.domElement).data("zclipId","zclip-"+this.movieId);var e=this.div.style;e.position="absolute";e.left=""+d.left+"px";e.top=""+d.top+"px";e.width=""+d.width+"px";e.height=""+d.height+"px";e.zIndex=a;if("object"==typeof b)for(addedStyle in b)e[addedStyle]=b[addedStyle];c.appendChild(this.div);this.div.innerHTML=this.getHTML(d.width,d.height)},getHTML:function(a,c){var b="",d="id="+this.id+"&width="+a+"&height="+c;if(navigator.userAgent.match(/MSIE/))var e=location.href.match(/^https/i)?
"https://":"http://",b=b+('<object classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="'+e+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=9,0,0,0" width="'+a+'" height="'+c+'" id="'+this.movieId+'" align="middle"><param name="allowScriptAccess" value="always" /><param name="allowFullScreen" value="false" /><param name="movie" value="'+ZeroClipboard.moviePath+'" /><param name="loop" value="false" /><param name="menu" value="false" /><param name="quality" value="best" /><param name="bgcolor" value="#ffffff" /><param name="flashvars" value="'+
d+'"/><param name="wmode" value="transparent"/></object>');else b+='<embed id="'+this.movieId+'" src="'+ZeroClipboard.moviePath+'" loop="false" menu="false" quality="best" bgcolor="#ffffff" width="'+a+'" height="'+c+'" name="'+this.movieId+'" align="middle" allowScriptAccess="always" allowFullScreen="false" type="application/x-shockwave-flash" pluginspage="http://www.macromedia.com/go/getflashplayer" flashvars="'+d+'" wmode="transparent" />';return b},hide:function(){this.div&&(this.div.style.left=
"-2000px")},show:function(){this.reposition()},destroy:function(){if(this.domElement&&this.div){this.hide();this.div.innerHTML="";var a=document.getElementsByTagName("body")[0];try{a.removeChild(this.div)}catch(c){}this.div=this.domElement=null}},reposition:function(a){a&&((this.domElement=ZeroClipboard.$(a))||this.hide());if(this.domElement&&this.div){a=ZeroClipboard.getDOMObjectPosition(this.domElement);var c=this.div.style;c.left=""+a.left+"px";c.top=""+a.top+"px"}},setText:function(a){this.clipText=
a;this.ready&&this.movie.setText(a)},addEventListener:function(a,c){a=a.toString().toLowerCase().replace(/^on/,"");this.handlers[a]||(this.handlers[a]=[]);this.handlers[a].push(c)},setHandCursor:function(a){this.handCursorEnabled=a;this.ready&&this.movie.setHandCursor(a)},setCSSEffects:function(a){this.cssEffects=!!a},receiveEvent:function(a,c){a=a.toString().toLowerCase().replace(/^on/,"");switch(a){case "load":this.movie=document.getElementById(this.movieId);if(!this.movie){var b=this;setTimeout(function(){b.receiveEvent("load",
null)},1);return}if(!this.ready&&navigator.userAgent.match(/Firefox/)&&navigator.userAgent.match(/Windows/)){b=this;setTimeout(function(){b.receiveEvent("load",null)},100);this.ready=!0;return}this.ready=!0;try{this.movie.setText(this.clipText)}catch(d){}try{this.movie.setHandCursor(this.handCursorEnabled)}catch(e){}break;case "mouseover":this.domElement&&this.cssEffects&&(this.domElement.addClass("hover"),this.recoverActive&&this.domElement.addClass("active"));break;case "mouseout":this.domElement&&
this.cssEffects&&(this.recoverActive=!1,this.domElement.hasClass("active")&&(this.domElement.removeClass("active"),this.recoverActive=!0),this.domElement.removeClass("hover"));break;case "mousedown":this.domElement&&this.cssEffects&&this.domElement.addClass("active");break;case "mouseup":this.domElement&&this.cssEffects&&(this.domElement.removeClass("active"),this.recoverActive=!1)}if(this.handlers[a])for(var g=0,h=this.handlers[a].length;g<h;g++){var f=this.handlers[a][g];if("function"==typeof f)f(this,
c);else if("object"==typeof f&&2==f.length)f[0][f[1]](this,c);else if("string"==typeof f)window[f](this,c)}}};
(function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},c=pe,b=function(b){var c=this;this.container=b;this.update_image_style=a(this.update_image_style,this);this.update_text=a(this.update_text,this);this.update_size=a(this.update_size,this);this.reset=a(this.reset,this);this.generate=a(this.generate,this);this.disabled=!1;this.image_selector=this.container.find(".ImageSelector");this.button_text_toggler=this.container.find(".ButtonTextToggler");this.button_text_input=this.container.find(".ButtonTextInput");
this.size_input=this.container.find(".SizeInput");this.generate_button=this.container.find(".GenerateButton");this.debug_container=this.container.find(".DebugContainer");this.code_container=this.container.find(".CodeContainer");this.preview=this.container.find(".Preview");this.reset_button=this.container.find(".ResetButton");this.button_text_toggler.change(this.update_text);this.button_text_input.keyup(this.update_text);this.size_input.change(this.update_size);this.image_selector.change(this.update_image_style);
this.generate_button.click(this.generate);this.reset_button.click(this.reset);this.container.find("input").change(function(){return c.code_container.css("opacity",0.5)});this.update_size();this.update_text();this.update_image_style();this.code_container.css("opacity",0.5);this.default_state=this.serialize()};b.prototype.generate=function(){var a=this;if(!this.disabled)return this.generate_button.html("Please wait..."),this.generate_button.css("opacity",0.5),this.generate_button.css("cursor","wait"),
pe.routes.Request.from_current_location("generate_button_user_dashboard_event",this.serialize()).get(function(b){a.generate_button.html("Generate");a.generate_button.css("cursor","pointer");a.generate_button.css("opacity",1);a.disabled=!1;a.debug_container.html(b);a.code_container.val(b);return a.code_container.css("opacity",1)}),this.disabled=!0};b.prototype.serialize=function(){return{height:this.height(),width:this.width(),outer_width:this.actual_width(),outer_height:this.actual_height(),text:this.text(),
style:this.style(),image_style:this.image_style()}};b.prototype.reset=function(){if(confirm("Are you sure you want to reset the button back to its default settings?"))return this.button_text_toggler.filter(":first").click(),this.size_input.filter(":last").click(),this.image_selector.filter(":first").click(),this.button_text_input.val("")};b.prototype.image_style=function(){return this.image_selector.filter(":checked").val()};b.prototype.size=function(){return this.size_input.filter(":checked").data()};
b.prototype.width=function(){return this.size().width};b.prototype.height=function(){return this.size().height};b.prototype.style=function(){return this.size().style};b.prototype.actual_width=function(){return this.preview.outerWidth()};b.prototype.actual_height=function(){return this.preview.outerHeight()};b.prototype.update_size=function(){var a=this;this.preview.css("width",this.width()+"px");this.preview.css("height",this.height()+"px");_.each(this.size_input,function(b){return a.preview.removeClass($(b).data().style)});
return this.preview.addClass(this.style())};b.prototype.update_text=function(){return 25>this.text().length?this.preview.find(".Text").html(this.text()):this.button_text_input.val(this.button_text_input.val().substring(0,25))};b.prototype.update_image_style=function(){var a=this;_.each(this.image_selector,function(b){return a.preview.removeClass($(b).val())});return this.preview.addClass(this.image_style())};b.prototype.text=function(){return"Buy Tickets"===this.button_text_toggler.filter(":checked").val()?
"Buy Tickets":this.button_text_input.val()||"Buy Tickets"};c.TicketButtonGenerator=b;$(function(){return pe.init_page_framework(function(){pe.tbg=new pe.TicketButtonGenerator($(".TicketButtonGenerator"));return $(".CopyLinkButton").each(function(){return $(this).zclip({path:$(this).data("path"),copy:function(){return $($(this).data("target")).val()}})})})})}).call(this);
